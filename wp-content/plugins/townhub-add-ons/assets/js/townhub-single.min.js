!function r(o,l,c){function s(t,e){if(!l[t]){if(!o[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(u)return u(t,!0);var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}var i=l[t]={exports:{}};o[t][0].call(i.exports,function(e){return s(o[t][1][e]||e)},i,i.exports,r,o,l,c)}return l[t].exports}for(var u="function"==typeof require&&require,e=0;e<c.length;e++)s(c[e]);return s}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.checkAvailability=function(t){return function(n){var e={action:"check_availability",_wpnonce:_townhub_add_ons.nonce,listing_id:_townhub_add_ons.post_id};return e=Object.assign({},t,e),n({type:a.CHECK_AVAILABILITY_START}),axios.post(_townhub_add_ons.url,Qs.stringify(e)).then(function(e){var t;null!=e.data.debug&&1==e.data.debug&&console.log(e.data),e.data.success&&n((t=e.data,{type:a.CHECK_AVAILABILITY_SUCCESS,data:t}))}).catch(function(e){console.log(e)})}};var a=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(e("./actionTypes"))},{"./actionTypes":2}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.GET_ROOMS_SUCCESS="GET_ROOMS_SUCCESS",n.CHECK_AVAILABILITY_START="CHECK_AVAILABILITY_START",n.CHECK_AVAILABILITY_SUCCESS="CHECK_AVAILABILITY_SUCCESS"},{}],3:[function(e,t,n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)};Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}(),c=e("../utils/helpers");var o=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={is_checking:!1,tickets:[],selected:[]},t.handleAvaiCalEvent=t.handleAvaiCalEvent.bind(t),t.handleGeneralDateEvent=t.handleGeneralDateEvent.bind(t),t.elID="tks_"+Math.random().toString(36).substr(2,16),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,React.Component),r(n,[{key:"componentDidMount",value:function(){window.addEventListener("availability_dates_selected",this.handleAvaiCalEvent,!0),window.addEventListener("general_date_selected",this.handleGeneralDateEvent,!0),this.initCheck()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("availability_dates_selected",this.handleAvaiCalEvent,!0),window.removeEventListener("general_date_selected",this.handleGeneralDateEvent,!0)}},{key:"handleAvaiCalEvent",value:function(e){if(null!=e.detail){var t=e.detail.metas;null!=t&&null!=t.ev_tickets?this.setState({tickets:t.ev_tickets,selected:[]}):this.setState({tickets:[],selected:[]})}}},{key:"handleGeneralDateEvent",value:function(e){null!=e.detail&&(null!=e.detail.ev_tickets?this.setState({tickets:e.detail.ev_tickets,selected:[]}):this.setState({tickets:[],selected:[]}))}},{key:"initCheck",value:function(){var n=this,e=this.props.postid;if(null!=e&&""!=e){n.setState({is_checking:!0});var t={action:"tickets_avai",postid:e},a=new Date,i=a.getFullYear(),r=a.getMonth(),o=this._getMonthNum(r),l=a.getDate(),c=this._getDateNum(l);t.checkin=""+i+o+c,axios.post(_townhub_add_ons.url,Qs.stringify(t)).then(function(e){if(null!=e.data.debug&&e.data.debug&&console.log(e),e.data.success){var t={is_checking:!1};null!=e.data.tickets&&Array.isArray(e.data.tickets)&&(t.tickets=e.data.tickets),n.setState(t)}}).catch(function(e){n.setState({is_checking:!1})})}}},{key:"_getMonthNum",value:function(e){return(e=parseInt(e)+1)<10?"0"+e:e}},{key:"_getDateNum",value:function(e){return e<10?"0"+e:e}},{key:"handleTicketQttChange",value:function(t,e,n){var a=n.target.value,i=this.state.selected;if(Array.isArray(i)){var r=i.findIndex(function(e){return e.id==t});-1!==r?0<a?i[r].qtt=a:i.splice(r,1):0<a&&i.push({id:t,qtt:a,price:(0,c.get_float_price)(e)})}this.setState({selected:i}),this.dispatchTkEvents(i)}},{key:"onClickTicketQtt",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"up",t=arguments[1],n=arguments[2],a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:1e3,r=this.state.selected;if(Array.isArray(r)){var o=r.findIndex(function(e){return e.id==t});if(-1!==o){var l=r[o].qtt;"down"==e&&a<l?--l:"up"==e&&l<i&&++l,0<l?r[o].qtt=l:r.splice(o,1)}else"up"==e&&r.push({id:t,qtt:1,price:(0,c.get_float_price)(n)})}this.setState({selected:r}),this.dispatchTkEvents(r)}},{key:"dispatchTkEvents",value:function(e){var t=new CustomEvent("bk_tickets_selected",{detail:{tickets:e,eleID:this.props.countid}});window.dispatchEvent(t)}},{key:"render",value:function(){var r=this,e=this.state,t=e.tickets,o=e.selected;return React.createElement("div",{className:"bk-tickets-com",id:r.elID},React.createElement("label",{className:"ltickets-qtts-label lservices-qtts-label"},React.createElement("span",{dangerouslySetInnerHTML:{__html:r.props.label}})),Array.isArray(t)&&0<t.length?React.createElement("div",{className:"fl-wrap tickets-select-wrap"},t.map(function(t,e){var n=o.findIndex(function(e){return e.id===t._id}),a=-1!==n?o[n].qtt:0,i="tickets["+t._id+"]";return React.createElement("div",{key:e,className:"tickets-select_item"},React.createElement("div",{className:0===e?"tickets-select_header vis-ticket_select fl-wrap":"tickets-select_header fl-wrap"},t.name,React.createElement("span",{className:"available_counter green-bg"},t.available),React.createElement("i",{className:"fal fa-plus"})),React.createElement("div",{className:0===e?"tickets-select_content vis-ticket_select_cont":"tickets-select_content"},React.createElement("div",{className:"qtt-item qtt-item-full qtt-item-js"},React.createElement("div",{className:"qtt-price text-right"},(0,c.price_format)(t.price)," x "),React.createElement("div",{className:"qtt-input"},React.createElement("input",{type:"number",name:i,min:0,max:t.available,step:1,value:a,onChange:function(e){return r.handleTicketQttChange(t._id,t.price,e)}}),React.createElement("div",{className:"qtt-nav"},React.createElement("div",{className:"qtt-btn qtt-up",onClick:function(e){return r.onClickTicketQtt("up",t._id,t.price,0,t.available)}},"+"),React.createElement("div",{className:"qtt-btn qtt-down",onClick:function(e){return r.onClickTicketQtt("down",t._id,t.price,0,t.available)}},"-"))))))})):React.createElement("div",{className:"ttickets-empty mb-20"},_townhub_add_ons.i18n.no_tickets),0==o.length&&React.createElement("div",{className:"ttickets-required mb-20"},_townhub_add_ons.i18n.tickets_required),0==o.length&&React.createElement("input",{className:"dis-none",type:"checkbox",name:"rqtickets",defaultValue:"",required:"required"}))}}]),n}();n.default=o},{"../utils/helpers":14}],4:[function(e,t,n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)};Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}();function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var l=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={is_checking:!1,slots:[],selected:[]},t.handleAvaiCalEvent=t.handleAvaiCalEvent.bind(t),t.handleGeneralDateEvent=t.handleGeneralDateEvent.bind(t),t.selectSlot=t.selectSlot.bind(t),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,React.Component),r(n,[{key:"componentDidMount",value:function(){window.addEventListener("availability_dates_selected",this.handleAvaiCalEvent,!0),window.addEventListener("general_date_selected",this.handleGeneralDateEvent,!0),this.initCheck()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("availability_dates_selected",this.handleAvaiCalEvent,!0),window.removeEventListener("general_date_selected",this.handleGeneralDateEvent,!0)}},{key:"handleAvaiCalEvent",value:function(e){if(null!=e.detail){var t=e.detail,n=(t.vals,t.metas);null!=n&&null!=n.ltime_slots?this.setState({slots:n.ltime_slots,selected:[]}):null!=n&&null!=n.person_slots?this.setState({slots:n.person_slots,selected:[]}):this.setState({slots:[],selected:[]})}}},{key:"handleGeneralDateEvent",value:function(e){null!=e.detail&&(null!=e.detail.ltime_slots?this.setState({slots:e.detail.ltime_slots,selected:[]}):null!=e.detail.person_slots?this.setState({slots:e.detail.person_slots,selected:[]}):this.setState({slots:[],selected:[]}))}},{key:"initCheck",value:function(){var n=this,e=this.props.postid;if(null!=e&&""!=e){n.setState({is_checking:!0});var t={action:"tslots_avai",postid:e},a=new Date,i=a.getFullYear(),r=a.getMonth(),o=this._getMonthNum(r),l=a.getDate(),c=this._getDateNum(l);t.checkin=""+i+o+c,axios.post(_townhub_add_ons.url,Qs.stringify(t)).then(function(e){if(null!=e.data.debug&&e.data.debug&&console.log(e),e.data.success){var t={is_checking:!1};null!=e.data.time_slots&&Array.isArray(e.data.time_slots)&&(t.slots=e.data.time_slots),n.setState(t)}}).catch(function(e){n.setState({is_checking:!1})})}}},{key:"_getMonthNum",value:function(e){return(e=parseInt(e)+1)<10?"0"+e:e}},{key:"_getDateNum",value:function(e){return e<10?"0"+e:e}},{key:"selectSlot",value:function(t){var e=this.state.selected;if(Array.isArray(e)&&0<e.length){var n=e.findIndex(function(e){return e===t});-1===n?1==this.props.single?e=[t]:e.push(t):e=1==this.props.single?[]:[].concat(o(e.slice(0,n)),o(e.slice(n+1))),e=e.filter(function(e,t,n){return n.indexOf(e)===t})}else e=[t];if(this.setState({selected:e}),""!=this.props.countid){var a=new CustomEvent("bk_time_slots_selected",{detail:{slots:e,eleID:this.props.countid}});window.dispatchEvent(a)}}},{key:"render",value:function(){var a=this,e=this.state,t=e.slots,i=e.selected,n=this.props.label,r="cth-dropdown-warp";if(0<i.length){var o=null;Array.isArray(t)&&0<t.length&&(o=t.find(function(e){return e._id===i[0]})),null!=o&&(n=o.time,1==this.props.single&&(r+=" options-hide"))}return React.createElement("div",{className:"bk-time-slots-com"},Array.isArray(t)&&0<t.length?React.createElement("div",{className:r},React.createElement("div",{className:"cth-dropdown-header"},React.createElement("label",null,React.createElement("span",{dangerouslySetInnerHTML:{__html:n}}))),React.createElement("div",{className:"cth-dropdown-options"},React.createElement("div",{className:"cth-dropdown-inner"},t.map(function(t,e){var n=i.findIndex(function(e){return e===t._id});return React.createElement("div",{key:e,className:"cth-dropdown-item",onClick:function(){return a.selectSlot(t._id)}},-1!==n&&React.createElement("input",{type:"checkbox",checked:!0,name:"slots[]",value:t._id,readOnly:!0,required:a.props.required}),React.createElement("label",null,t.time,React.createElement("span",{className:"cth-dropdown-meta",dangerouslySetInnerHTML:{__html:_townhub_add_ons.i18n.slots_avai.replace("{slots}",t.available)}})))})))):React.createElement("div",{className:"tslots-empty"},_townhub_add_ons.i18n.no_slots),0==i.length&&React.createElement("input",{className:"dis-none",type:"checkbox",name:"slots[]",value:"",readOnly:!0,required:"required"}))}}]),n}();n.default=l},{}],5:[function(e,t,n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)};Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}(),r=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(e("../action/BookingActions")),w=l(e("./RoomSelected")),R=l(e("./CheckInOut")),C=l(e("./LoadingIndicator")),q=e("../utils/helpers");function l(e){return e&&e.__esModule?e:{default:e}}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=ReactRedux.connect,s=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e)),n=null!=e.min_nights?e.min_nights:1,a=(0,q.getDate)(),i=(0,q.getDate)(null,n);return t.format="YYYY-MM-DD",t.bktype="rooms_old",t.price_based="per_night",t.min_nights=n,null!=t.props.format&&""!=t.props.format&&(t.format=t.props.format),null!=t.props.bktype&&""!=t.props.bktype&&(t.bktype=t.props.bktype),null!=t.props.price_based&&""!=t.props.price_based&&(t.price_based=t.props.price_based),t.state={adults:1,children:0,checkin:a,checkout:i,selected:[],selected_services:[],booked:[],bookable:!1,checkavailable:!0,checkingavai:!1,submit:!1,bk_services:[],didChecked:!1,datesChanged:!1},t.formRef=null,t.setFormRef=t.setFormRef.bind(t),t.checkAvailability=t.checkAvailability.bind(t),t.onSelectRoom=t.onSelectRoom.bind(t),t.getCheckInOut=t.getCheckInOut.bind(t),t.onChange=t.onChange.bind(t),t.onClickQtt=t.onClickQtt.bind(t),t.onChangeRoomQtt=t.onChangeRoomQtt.bind(t),t.onSubmit=t.onSubmit.bind(t),t.onClickSubmit=t.onClickSubmit.bind(t),t.handleChange=t.handleChange.bind(t),t.handleClick=t.handleClick.bind(t),t.handleAvaiCalEvent=t.handleAvaiCalEvent.bind(t),t.handleBkSerQttChange=t.handleBkSerQttChange.bind(t),t.onClickBkSerQtt=t.onClickBkSerQtt.bind(t),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,React.Component),i(r,[{key:"componentDidMount",value:function(){window.addEventListener("availability_dates_selected",this.handleAvaiCalEvent,!0)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("availability_dates_selected",this.handleAvaiCalEvent,!0)}},{key:"handleAvaiCalEvent",value:function(e){if(null!=e.detail){var t=e.detail,n=t.vals;t.metas;null!=n&&Array.isArray(n)&&2==n.length&&this.setState({checkin:this._formatOutDate(n[0]),checkout:this._formatOutDate(n[1]),checkavailable:!0,booked:[],bookable:!1})}}},{key:"_formatOutDate",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"20181216",t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n="",a="",i="";return null!=e&&8==e.length?(n=e.substr(0,4),a=e.substr(4,2),i=e.substr(6,2),1==t?n+"-"+a+"-"+i:this.format.replace("YYYY",n).replace("MM",a).replace("DD",i)):""}},{key:"_renderInquiryHtml",value:function(){var e=document.getElementById("tmpl-room-inquiry-fields");return null!=e&&""!=e.innerHTML?React.createElement("div",{className:"room-inquiry-fields-wrap",dangerouslySetInnerHTML:{__html:e.innerHTML}}):null}},{key:"_renderCusHtml",value:function(){var e=document.getElementById("tmpl-custom-get-field").innerHTML;return""!=e&&React.createElement("div",{className:"cus-field-bk-content",dangerouslySetInnerHTML:{__html:e}})}},{key:"setFormRef",value:function(e){this.formRef=e}},{key:"checkAvailability",value:function(e){this.setState({bookable:!1,checkavailable:!1,checkingavai:!0,didChecked:!0,datesChanged:!1}),this.props.checkAvailability(this.state)}},{key:"onChange",value:function(e,t){var n;this.setState((p(n={},t,e.target.value),p(n,"checkavailable",!0),n))}},{key:"handleChange",value:function(t,e){var n=e.target.value,a=this.state.selected_services,i=a.findIndex(function(e){return e.id==t});-1!==i?a.splice(i,1):a.push({id:t,price:n,qtt:1}),this.setState({selected_services:a})}},{key:"handleClick",value:function(){this.setState(function(e){return{isToggleOn:!e.isToggleOn}})}},{key:"handleBkSerQttChange",value:function(t,e,n){var a=n.target.value,i=this.state.bk_services;if(Array.isArray(i)){var r=i.findIndex(function(e){return e.id==t});-1!==r?0<a?i[r].qtt=a:i.splice(r,1):0<a&&i.push({id:t,qtt:a,price:e})}this.setState({bk_services:i})}},{key:"onClickBkSerQtt",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"up",t=arguments[1],n=arguments[2],a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:1e3,r=this.state.bk_services;if(Array.isArray(r)){var o=r.findIndex(function(e){return e.id==t});if(-1!==o){var l=r[o].qtt;"down"==e&&a<l?--l:"up"==e&&l<i&&++l,0<l?r[o].qtt=l:r.splice(o,1)}else"up"==e&&r.push({id:t,qtt:1,price:n})}this.setState({bk_services:r})}},{key:"getCheckInOut",value:function(e){Array.isArray(e)&&2==e.length&&this.setState({checkin:e[0],checkout:e[1],checkavailable:!0,datesChanged:!0})}},{key:"onClickQtt",value:function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"up",n=arguments[1],a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1e3,r=this.state,o=r.booked,l=r.adults,c=r.children,s=!0,u=this.props.booking.rooms,d=0;o.length&&o.forEach(function(t,e){var n=u.find(function(e){return e.id==t.id});null!=n&&null!=n.adults&&null!=n.children&&(d+=t.qtt*(n.adults+n.children))}),0==d&&(s=!1);var h=this.state[n];"down"==t&&a<h?(--h,d<l+c-1&&(s=!1)):"up"==t&&h<i&&s&&(++h,d<l+c+1&&(s=!1)),this.setState((p(e={},n,h),p(e,"checkavailable",!0),p(e,"bookable",s),e))}},{key:"onChangeRoomQtt",value:function(e,t,n){var a=this.state,i=a.booked,r=a.bookable,o=a.adults,l=a.children;if(Array.isArray(i)){var c=i.findIndex(function(e){return e.id==t}),s=n.min_adults;(null==s||s<0)&&(s=1),-1!==c?0<e&&s<=e?i[c]={id:t,qtt:e}:i.splice(c,1):0<e&&s<=e&&i.push({id:t,qtt:e});var u=!0,d=this.props.booking.rooms;if(i.length){var h=0;i.forEach(function(t,e){var n=d.find(function(e){return e.id==t.id});null!=n&&null!=n.adults&&null!=n.children&&(h+=t.qtt*(n.adults+n.children))}),h<o+l&&(u=!1)}r=!!(0<i.length&&u)}this.setState({booked:i,bookable:r})}},{key:"onSelectRoom",value:function(e){var t=e.target.value,n=this.state.selected;-1===n.indexOf(t)&&this.setState({selected:[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(n),[t])})}},{key:"onClickSubmit",value:function(e){this.setState({submit:!0,bookable:!1,checkavailable:!1})}},{key:"onSubmit",value:function(e){this.state.submit||e.preventDefault()}},{key:"componentDidUpdate",value:function(e,t){this.state.submit&&this.formRef.submit()}},{key:"_getDatesDiff",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=this.state,n=t.checkin,a=t.checkout,i=0;if(""!=n&&""!=a){var r=new Date(n),o=new Date(a);i=Math.floor((o-r)/864e5),1==e&&++i}return i}},{key:"render",value:function(){var o=this,i=this,e=this.props.booking,c=e.rooms,t=e.available,n=e.services,a=this.state,l=a.booked,s=(a.selected,a.submit),r=a.bookable,u=a.checkavailable,d=a.checkingavai,h=a.selected_services,p=a.checkin,m=a.checkout,f=a.bk_services,v=a.didChecked,_=a.datesChanged,b=[],y=0,k=1;null!=c&&c.length&&Array.isArray(t)&&t.length&&t.forEach(function(t,e){if(0<parseInt(t.quantities)){var n=c.find(function(e){return e.id==t.id}),a=l.find(function(e){return e.id==t.id}),i=0;null!=a&&(i=a.qtt);var r=Object.assign({},n);r=Object.assign(r,t,{available:!0,qtt:i}),b.push(React.createElement(w.default,{rOrder:k,key:e,room:r,changeRoomQtt:o.onChangeRoomQtt})),k++}});var g=[];null!=n&&n.length&&n.forEach(function(t,e){if(i.props.qtt_service){var n=f.findIndex(function(e){return e.id==t.service_id});g.push(React.createElement("div",{key:e,className:"lservices-qtts-item"},React.createElement("div",{className:"qtt-item qtt-item-full qtt-item-js"},React.createElement("div",{className:"qtt-serv-label"},React.createElement("div",{className:"qtt-label-wrap"},t.service_name),null!=t.service_desc&&""!=t.service_desc&&React.createElement("div",{className:"serv-item-desc"},t.service_desc)),React.createElement("div",{className:"qtt-price text-right"},(0,q.price_format)(t.service_price)," x "),React.createElement("div",{className:"qtt-input"},React.createElement("input",{type:"number",min:"0",step:"1",value:-1!==n?f[n].qtt:0,onChange:function(e){return o.handleBkSerQttChange(t.service_id,t.service_price,e)}}),React.createElement("div",{className:"qtt-nav"},React.createElement("div",{className:"qtt-btn qtt-up",onClick:function(e){return o.onClickBkSerQtt("up",t.service_id,t.service_price)}},"+"),React.createElement("div",{className:"qtt-btn qtt-down",onClick:function(e){return o.onClickBkSerQtt("down",t.service_id,t.service_price)}},"-"))))))}else{var a=h.findIndex(function(e){return e.id==t.service_id});g.push(React.createElement("div",{key:e,className:"cth-dropdown-item lserv-dropdown"},React.createElement("input",{name:t.service_id,onChange:function(e){return o.handleChange(t.service_id,e)},type:"checkbox",value:t.service_price,defaultChecked:-1!==a,id:t.service_id}),React.createElement("label",{htmlFor:t.service_id},t.service_name,React.createElement("span",{className:"cth-dropdown-meta"},(0,q.price_format)(t.service_price))),null!=t.service_desc&&""!=t.service_desc&&React.createElement("div",{className:"serv-item-desc"},t.service_desc)))}});var E=[];return Array.isArray(l)&&l.length&&(l.forEach(function(t,e){var n=c.find(function(e){return e.id==t.id}),a=n.price,i=n.dPrices,r=(0,q.get_float_price)(a);for(var o in i)if(i[o].iso!=m){var l=(0,q.get_float_price)(i[o].price);0<l?(y+=l*t.qtt,s&&E.push(React.createElement("input",{key:"price_"+o+"_"+t.id,type:"hidden",name:"rooms_old["+t.id+"]["+i[o].iso+"]",value:l,readOnly:!0}))):(y+=r*t.qtt,s&&E.push(React.createElement("input",{key:"price_"+o+"_"+t.id,type:"hidden",name:"rooms_old["+t.id+"]["+i[o].iso+"]",value:r,readOnly:!0})))}s&&E.push(React.createElement("input",{key:"qtt_"+e,type:"hidden",name:"rooms_old["+t.id+"][qtt]",value:t.qtt,readOnly:!0}))}),s&&(h.forEach(function(e,t){var n="addservices["+t+"]";E.push(React.createElement("input",{key:"addservices_"+t,type:"hidden",name:n,value:e.id,readOnly:!0}))}),0<f.length&&Array.isArray(f)&&f.forEach(function(e,t){var n="bk_services["+e.id+"]";E.push(React.createElement("input",{key:"bk_services_"+e.id,type:"hidden",name:n,value:e.qtt,readOnly:!0}))}),E.push(React.createElement("input",{key:"product_id",type:"hidden",name:"product_id",value:_townhub_add_ons.post_id,readOnly:!0})),null!=i.props.as_inquiry&&i.props.as_inquiry?(E.push(React.createElement("input",{key:"esb_add_booking",type:"hidden",name:"action",value:"esb_add_booking",readOnly:!0})),E.push(React.createElement("input",{key:"_wpnonce",type:"hidden",name:"_wpnonce",value:i.props.nonce,readOnly:!0}))):E.push(React.createElement("input",{key:"esb_add_to_cart",type:"hidden",name:"action",value:"esb_add_to_cart",readOnly:!0})),E.push(React.createElement("input",{key:"booking_type",type:"hidden",name:"booking_type",value:i.bktype,readOnly:!0})),E.push(React.createElement("input",{key:"price_based",type:"hidden",name:"price_based",value:i.price_based,readOnly:!0}))),null!=h&&h.length&&h.forEach(function(e,t){y+=parseFloat(e.price)*parseFloat(e.qtt)}),null!=f&&f.length&&f.forEach(function(e,t){y+=parseFloat(e.price)*parseFloat(e.qtt)})),React.createElement("form",{method:"post",className:"book-formsss custom-formsss",onSubmit:this.onSubmit,ref:this.setFormRef},React.createElement("fieldset",null,null!=i.props.as_inquiry&&i.props.as_inquiry&&i._renderInquiryHtml(),React.createElement("div",{className:"cal-item checkin-out-inputs"},React.createElement(R.default,{fieldName:"checkinout",fieldValue:[p,m],field:{label:_townhub_add_ons.i18n.book_dates,icon:"fal fa-calendar-check",format:this.format},getCheckInOut:this.getCheckInOut,min_nights:i.min_nights}),React.createElement("input",{type:"hidden",name:"checkout",value:m,readOnly:!0}),React.createElement("input",{type:"hidden",name:"checkin",value:p,readOnly:!0})),React.createElement("div",{className:"cal-item guests-inputs"},React.createElement("div",{className:"qtt-item fl-wrap adults-qtt"},React.createElement("label",{className:"qtt-label"},_townhub_add_ons.i18n.book_ad),React.createElement("div",{className:"qtt-input"},React.createElement("input",{type:"number",name:"adults",min:"1",max:"10",step:"1",value:this.state.adults,onChange:function(e){return o.onChange(e,"adults")}}),React.createElement("div",{className:"qtt-nav"},React.createElement("div",{className:"qtt-btn qtt-up",onClick:function(e){return o.onClickQtt("up","adults",1,10)}},"+"),React.createElement("div",{className:"qtt-btn qtt-down",onClick:function(e){return o.onClickQtt("down","adults",1,10)}},"-")))),React.createElement("div",{className:"qtt-item fl-wrap children-qtt"},React.createElement("label",{className:"qtt-label"},_townhub_add_ons.i18n.book_chi),React.createElement("div",{className:"qtt-input"},React.createElement("input",{type:"number",name:"children",min:"0",max:"10",step:"1",value:this.state.children,onChange:function(e){return o.onChange(e,"children")}}),React.createElement("div",{className:"qtt-nav"},React.createElement("div",{className:"qtt-btn qtt-up",onClick:function(e){return o.onClickQtt("up","children",0,10)}},"+"),React.createElement("div",{className:"qtt-btn qtt-down",onClick:function(e){return o.onClickQtt("down","children",0,10)}},"-"))))),d?React.createElement(C.default,null):0<b.length&&0==_?React.createElement("div",{className:"cal-item available-rooms-services"},React.createElement("div",{className:"available-rooms"},React.createElement("label",null,_townhub_add_ons.i18n.book_avr),React.createElement("div",{className:"fl-wrap multiqtts-select-wrap rooms-items-wrap"},b)),0<n.length&&!i.props.qtt_service&&React.createElement("div",{className:"cth-dropdown-warp services-wrap"},React.createElement("div",{className:"cth-dropdown-header",onClick:this.handleClick},React.createElement("label",null,_townhub_add_ons.i18n.book_services,React.createElement("span",{className:"count-select-ser"},h.length))),this.state.isToggleOn?React.createElement("div",{className:"cth-dropdown-options"},React.createElement("div",{className:"cth-dropdown-inner"},g)):null),0<n.length&&i.props.qtt_service&&React.createElement("div",{className:"lservices-qtts-wrap"},React.createElement("label",{className:"lservices-qtts-label"},_townhub_add_ons.i18n.book_services),React.createElement("div",{className:"lservices-qtts-items"},g))):React.createElement("div",{className:"no-rooms"},1==v&&0==_?_townhub_add_ons.i18n.no_rooms:_townhub_add_ons.i18n.no_rooms_init),React.createElement("div",{className:"total-coast fl-wrap clearfix"},React.createElement("strong",null,_townhub_add_ons.i18n.book_ts),React.createElement("span",null,(0,q.price_format)(y))),React.createElement("div",{className:"booking-buttons"},React.createElement("button",{type:"button",onClick:this.checkAvailability,className:"btn-check-availability",disabled:!u},_townhub_add_ons.i18n.book_chev),React.createElement("button",{type:"button",onClick:this.onClickSubmit,className:"btn-book-now",disabled:!r},_townhub_add_ons.i18n.book_bn))),E)}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.booking.checkingavai!==t.checkingavai?{booked:[],checkingavai:!1}:null}}]),r}();n.default=c(function(e){return{booking:e.booking}},function(t){return{checkAvailability:function(e){return t(r.checkAvailability(e))}}})(s)},{"../action/BookingActions":1,"../utils/helpers":14,"./CheckInOut":7,"./LoadingIndicator":8,"./RoomSelected":10}],6:[function(e,t,n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)};Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}(),r=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(e("../action/BookingActions")),w=l(e("./RoomSelected")),R=l(e("./RoomPerson")),C=l(e("./CheckInOut")),q=l(e("./LoadingIndicator")),S=e("../utils/helpers");function l(e){return e&&e.__esModule?e:{default:e}}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=ReactRedux.connect,s=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e)),n=null!=e.min_nights?e.min_nights:1,a=(0,S.getDate)(),i=(0,S.getDate)(null,n);return t.format="YYYY-MM-DD",t.bktype="rooms",t.price_based="per_night",t.min_nights=n,null!=t.props.format&&""!=t.props.format&&(t.format=t.props.format),null!=t.props.bktype&&""!=t.props.bktype&&(t.bktype=t.props.bktype),null!=t.props.price_based&&""!=t.props.price_based&&(t.price_based=t.props.price_based),t.state={adults:1,children:0,checkin:a,checkout:i,selected:[],selected_services:[],booked:[],bookable:!1,checkavailable:!0,checkingavai:!1,submit:!1,bk_services:[],didChecked:!1,datesChanged:!1},t.formRef=null,t.setFormRef=t.setFormRef.bind(t),t.checkAvailability=t.checkAvailability.bind(t),t.onSelectRoom=t.onSelectRoom.bind(t),t.getCheckInOut=t.getCheckInOut.bind(t),t.onChange=t.onChange.bind(t),t.onClickQtt=t.onClickQtt.bind(t),t.onChangeRoomQtt=t.onChangeRoomQtt.bind(t),t.onSubmit=t.onSubmit.bind(t),t.onClickSubmit=t.onClickSubmit.bind(t),t.handleChange=t.handleChange.bind(t),t.handleClick=t.handleClick.bind(t),t.handleAvaiCalEvent=t.handleAvaiCalEvent.bind(t),t.onchangePersonQtt=t.onchangePersonQtt.bind(t),t.handleBkSerQttChange=t.handleBkSerQttChange.bind(t),t.onClickBkSerQtt=t.onClickBkSerQtt.bind(t),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,React.Component),i(r,[{key:"componentDidMount",value:function(){window.addEventListener("availability_dates_selected",this.handleAvaiCalEvent,!0)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("availability_dates_selected",this.handleAvaiCalEvent,!0)}},{key:"handleAvaiCalEvent",value:function(e){if(null!=e.detail){var t=e.detail,n=t.vals;t.metas;null!=n&&Array.isArray(n)&&2==n.length&&this.setState({checkin:this._formatOutDate(n[0]),checkout:this._formatOutDate(n[1]),checkavailable:!0,booked:[],bookable:!1})}}},{key:"_formatOutDate",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"20181216",t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n="",a="",i="";return null!=e&&8==e.length?(n=e.substr(0,4),a=e.substr(4,2),i=e.substr(6,2),1==t?n+"-"+a+"-"+i:this.format.replace("YYYY",n).replace("MM",a).replace("DD",i)):""}},{key:"_renderInquiryHtml",value:function(){var e=document.getElementById("tmpl-room-inquiry-fields");return null!=e&&""!=e.innerHTML?React.createElement("div",{className:"room-inquiry-fields-wrap",dangerouslySetInnerHTML:{__html:e.innerHTML}}):null}},{key:"_renderCusHtml",value:function(){var e=document.getElementById("tmpl-custom-get-field").innerHTML;return""!=e&&React.createElement("div",{className:"cus-field-bk-content",dangerouslySetInnerHTML:{__html:e}})}},{key:"setFormRef",value:function(e){this.formRef=e}},{key:"checkAvailability",value:function(e){this.setState({bookable:!1,checkavailable:!1,checkingavai:!0,didChecked:!0,datesChanged:!1}),this.props.checkAvailability(this.state)}},{key:"onChange",value:function(e,t){var n;this.setState((p(n={},t,e.target.value),p(n,"checkavailable",!0),n))}},{key:"handleChange",value:function(t,e){var n=e.target.value,a=this.state.selected_services,i=a.findIndex(function(e){return e.id==t});-1!==i?a.splice(i,1):a.push({id:t,price:n,qtt:1}),this.setState({selected_services:a})}},{key:"handleBkSerQttChange",value:function(t,e,n){var a=n.target.value,i=this.state.bk_services;if(Array.isArray(i)){var r=i.findIndex(function(e){return e.id==t});-1!==r?0<a?i[r].qtt=a:i.splice(r,1):0<a&&i.push({id:t,qtt:a,price:e})}this.setState({bk_services:i})}},{key:"onClickBkSerQtt",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"up",t=arguments[1],n=arguments[2],a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:1e3,r=this.state.bk_services;if(Array.isArray(r)){var o=r.findIndex(function(e){return e.id==t});if(-1!==o){var l=r[o].qtt;"down"==e&&a<l?--l:"up"==e&&l<i&&++l,0<l?r[o].qtt=l:r.splice(o,1)}else"up"==e&&r.push({id:t,qtt:1,price:n})}this.setState({bk_services:r})}},{key:"handleClick",value:function(){this.setState(function(e){return{isToggleOn:!e.isToggleOn}})}},{key:"getCheckInOut",value:function(e){Array.isArray(e)&&2==e.length&&this.setState({checkin:e[0],checkout:e[1],checkavailable:!0,datesChanged:!0})}},{key:"onClickQtt",value:function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"up",n=arguments[1],a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1e3,r=this.state,o=r.booked,l=r.adults,c=r.children,s=!0,u=this.props.booking.rooms,d=0;o.length&&o.forEach(function(t,e){var n=u.find(function(e){return e.id==t.id});null!=n&&null!=n.adults&&null!=n.children&&(d+=t.qtt*(n.adults+n.children))}),0==d&&(s=!1);var h=this.state[n];"down"==t&&a<h?(--h,d<l+c-1&&(s=!1)):"up"==t&&h<i&&s&&(++h,d<l+c+1&&(s=!1)),this.setState((p(e={},n,h),p(e,"checkavailable",!0),p(e,"bookable",s),e))}},{key:"onChangeRoomQtt",value:function(e,t,n){var a=this.state,i=a.booked,r=a.bookable,o=a.adults,l=a.children;if(Array.isArray(i)){var c=i.findIndex(function(e){return e.id==t}),s=n.min_adults;(null==s||s<0)&&(s=1),-1!==c?0<e&&s<=e?i[c]={id:t,qtt:e}:i.splice(c,1):0<e&&s<=e&&i.push({id:t,qtt:e});var u=!0,d=this.props.booking.rooms;if(i.length){var h=0;i.forEach(function(t,e){var n=d.find(function(e){return e.id==t.id});null!=n&&null!=n.adults&&null!=n.children&&(h+=t.qtt*(n.adults+n.children))}),h<o+l&&(u=!1)}r=!!(0<i.length&&u)}this.setState({booked:i,bookable:r})}},{key:"onchangePersonQtt",value:function(e,t,n){var a=this.state,i=a.booked,r=a.bookable;if(Array.isArray(i)){var o=i.findIndex(function(e){return e.id==t}),l=e.qtt,c=e.adults,s=e.children,u=e.infant,d=n.min_adults;(null==d||d<0)&&(d=1),-1!==o?0<c+s+u&&d<=c?i[o]={id:t,qtt:l,adults:c,children:s,infant:u}:i.splice(o,1):0<c+s+u&&d<=c&&i.push({id:t,qtt:l,adults:c,children:s,infant:u}),r=0<i.length}this.setState({booked:i,bookable:r})}},{key:"onSelectRoom",value:function(e){var t=e.target.value,n=this.state.selected;-1===n.indexOf(t)&&this.setState({selected:[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(n),[t])})}},{key:"onClickSubmit",value:function(e){this.setState({submit:!0,bookable:!1,checkavailable:!1})}},{key:"onSubmit",value:function(e){this.state.submit||e.preventDefault()}},{key:"componentDidUpdate",value:function(e,t){this.state.submit&&this.formRef.submit()}},{key:"_getDatesDiff",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=this.state,n=t.checkin,a=t.checkout,i=0;if(""!=n&&""!=a){var r=new Date(n),o=new Date(a);i=Math.floor((o-r)/864e5),1==e&&++i}return i}},{key:"render",value:function(){var o=this,l=this,e=this.props.booking,m=e.rooms,t=e.available,n=e.services,a=this.state,c=a.booked,f=(a.selected,a.submit),i=a.bookable,r=a.checkavailable,s=a.checkingavai,u=a.selected_services,d=a.checkin,v=a.checkout,h=a.bk_services,p=a.didChecked,_=a.datesChanged,b=[],y=0,k=1;null!=m&&m.length&&Array.isArray(t)&&t.length&&t.forEach(function(t,e){if(0<parseInt(t.quantities)){var n=m.find(function(e){return e.id==t.id}),a=c.find(function(e){return e.id==t.id}),i=0;null!=a&&(i=a.qtt);var r=Object.assign({},n);r=Object.assign(r,t,{available:!0,qtt:i}),"per_night"===l.price_based?b.push(React.createElement(w.default,{rOrder:k,key:e,room:r,changeRoomQtt:o.onChangeRoomQtt})):b.push(React.createElement(R.default,{rOrder:k,key:e,room:r,changePersonQtt:o.onchangePersonQtt})),k++}});var g=[];null!=n&&n.length&&n.forEach(function(t,e){if(l.props.qtt_service){var n=h.findIndex(function(e){return e.id==t.service_id});g.push(React.createElement("div",{key:e,className:"lservices-qtts-item"},React.createElement("div",{className:"qtt-item qtt-item-full qtt-item-js"},React.createElement("div",{className:"qtt-serv-label"},React.createElement("div",{className:"qtt-label-wrap"},t.service_name),null!=t.service_desc&&""!=t.service_desc&&React.createElement("div",{className:"serv-item-desc"},t.service_desc)),React.createElement("div",{className:"qtt-price text-right"},(0,S.price_format)(t.service_price)," x "),React.createElement("div",{className:"qtt-input"},React.createElement("input",{type:"number",min:"0",step:"1",value:-1!==n?h[n].qtt:0,onChange:function(e){return o.handleBkSerQttChange(t.service_id,t.service_price,e)}}),React.createElement("div",{className:"qtt-nav"},React.createElement("div",{className:"qtt-btn qtt-up",onClick:function(e){return o.onClickBkSerQtt("up",t.service_id,t.service_price)}},"+"),React.createElement("div",{className:"qtt-btn qtt-down",onClick:function(e){return o.onClickBkSerQtt("down",t.service_id,t.service_price)}},"-"))))))}else{var a=u.findIndex(function(e){return e.id==t.service_id});g.push(React.createElement("div",{key:e,className:"cth-dropdown-item lserv-dropdown"},React.createElement("input",{name:t.service_id,onChange:function(e){return o.handleChange(t.service_id,e)},type:"checkbox",value:t.service_price,defaultChecked:-1!==a,id:t.service_id}),React.createElement("label",{htmlFor:t.service_id},t.service_name,React.createElement("span",{className:"cth-dropdown-meta"},(0,S.price_format)(t.service_price))),null!=t.service_desc&&""!=t.service_desc&&React.createElement("div",{className:"serv-item-desc"},t.service_desc)))}});var E=[];return Array.isArray(c)&&c.length&&(c.forEach(function(t,e){var n=m.find(function(e){return e.id==t.id}),a=n.price,i=n.children_price,r=n.infant_price,o=n.dPrices,l=(0,S.get_float_price)(a),c=(0,S.get_float_price)(i),s=(0,S.get_float_price)(r);for(var u in o)if(o[u].iso!=v){var d=(0,S.get_float_price)(o[u].price),h=(0,S.get_float_price)(o[u].children_price),p=(0,S.get_float_price)(o[u].infant_price);0<d?(y+=d*t.adults,f&&E.push(React.createElement("input",{key:"adults_"+u+"_"+t.id,type:"hidden",name:"rooms_new["+t.id+"]["+o[u].iso+"][adults]",value:d,readOnly:!0}))):(y+=l*t.adults,f&&E.push(React.createElement("input",{key:"adults_"+u+"_"+t.id,type:"hidden",name:"rooms_new["+t.id+"]["+o[u].iso+"][adults]",value:l,readOnly:!0}))),0<h?(y+=h*t.children,f&&E.push(React.createElement("input",{key:"children_"+u+"_"+t.id,type:"hidden",name:"rooms_new["+t.id+"]["+o[u].iso+"][children]",value:h,readOnly:!0}))):(y+=c*t.children,f&&E.push(React.createElement("input",{key:"children_"+u+"_"+t.id,type:"hidden",name:"rooms_new["+t.id+"]["+o[u].iso+"][children]",value:c,readOnly:!0}))),0<p?(y+=p*t.infant,f&&E.push(React.createElement("input",{key:"infant_"+u+"_"+t.id,type:"hidden",name:"rooms_new["+t.id+"]["+o[u].iso+"][infant]",value:p,readOnly:!0}))):(y+=s*t.infant,f&&E.push(React.createElement("input",{key:"infant_"+u+"_"+t.id,type:"hidden",name:"rooms_new["+t.id+"]["+o[u].iso+"][infant]",value:s,readOnly:!0})))}f&&(E.push(React.createElement("input",{key:"adults_"+e,type:"hidden",name:"rooms_new["+t.id+"][adults]",value:t.adults,readOnly:!0})),E.push(React.createElement("input",{key:"children_"+e,type:"hidden",name:"rooms_new["+t.id+"][children]",value:t.children,readOnly:!0})),E.push(React.createElement("input",{key:"infant_"+e,type:"hidden",name:"rooms_new["+t.id+"][infant]",value:t.infant,readOnly:!0})))}),f&&(u.forEach(function(e,t){var n="addservices["+t+"]";E.push(React.createElement("input",{key:"addservices_"+t,type:"hidden",name:n,value:e.id,readOnly:!0}))}),0<h.length&&Array.isArray(h)&&h.forEach(function(e,t){var n="bk_services["+e.id+"]";E.push(React.createElement("input",{key:"bk_services_"+e.id,type:"hidden",name:n,value:e.qtt,readOnly:!0}))}),E.push(React.createElement("input",{key:"product_id",type:"hidden",name:"product_id",value:_townhub_add_ons.post_id,readOnly:!0})),null!=l.props.as_inquiry&&l.props.as_inquiry?(E.push(React.createElement("input",{key:"esb_add_booking",type:"hidden",name:"action",value:"esb_add_booking",readOnly:!0})),E.push(React.createElement("input",{key:"_wpnonce",type:"hidden",name:"_wpnonce",value:l.props.nonce,readOnly:!0}))):E.push(React.createElement("input",{key:"esb_add_to_cart",type:"hidden",name:"action",value:"esb_add_to_cart",readOnly:!0})),E.push(React.createElement("input",{key:"booking_type",type:"hidden",name:"booking_type",value:l.bktype,readOnly:!0})),E.push(React.createElement("input",{key:"price_based",type:"hidden",name:"price_based",value:l.price_based,readOnly:!0}))),null!=u&&u.length&&u.forEach(function(e,t){y+=parseFloat(e.price)*parseFloat(e.qtt)}),null!=h&&h.length&&h.forEach(function(e,t){y+=parseFloat(e.price)*parseFloat(e.qtt)})),React.createElement("form",{method:"post",className:"book-formsss custom-formsss",onSubmit:this.onSubmit,ref:this.setFormRef},React.createElement("fieldset",null,null!=l.props.as_inquiry&&l.props.as_inquiry&&l._renderInquiryHtml(),React.createElement("div",{className:"cal-item checkin-out-inputs"},React.createElement(C.default,{fieldName:"checkinout",fieldValue:[d,v],field:{label:_townhub_add_ons.i18n.book_dates,icon:"fal fa-calendar-check",format:this.format},getCheckInOut:this.getCheckInOut,min_nights:l.min_nights}),React.createElement("input",{type:"hidden",name:"checkout",value:v,readOnly:!0}),React.createElement("input",{type:"hidden",name:"checkin",value:d,readOnly:!0})),"per_night"===this.price_based&&React.createElement("div",{className:"cal-item guests-inputs"},React.createElement("div",{className:"qtt-item fl-wrap adults-qtt"},React.createElement("label",{className:"qtt-label"},_townhub_add_ons.i18n.book_ad),React.createElement("div",{className:"qtt-input"},React.createElement("input",{type:"number",name:"adults",min:"1",max:"10",step:"1",value:this.state.adults,onChange:function(e){return o.onChange(e,"adults")}}),React.createElement("div",{className:"qtt-nav"},React.createElement("div",{className:"qtt-btn qtt-up",onClick:function(e){return o.onClickQtt("up","adults",1,10)}},"+"),React.createElement("div",{className:"qtt-btn qtt-down",onClick:function(e){return o.onClickQtt("down","adults",1,10)}},"-")))),React.createElement("div",{className:"qtt-item fl-wrap children-qtt"},React.createElement("label",{className:"qtt-label"},_townhub_add_ons.i18n.book_chi),React.createElement("div",{className:"qtt-input"},React.createElement("input",{type:"number",name:"children",min:"0",max:"10",step:"1",value:this.state.children,onChange:function(e){return o.onChange(e,"children")}}),React.createElement("div",{className:"qtt-nav"},React.createElement("div",{className:"qtt-btn qtt-up",onClick:function(e){return o.onClickQtt("up","children",0,10)}},"+"),React.createElement("div",{className:"qtt-btn qtt-down",onClick:function(e){return o.onClickQtt("down","children",0,10)}},"-"))))),s?React.createElement(q.default,null):0<b.length&&0==_?React.createElement("div",{className:"cal-item available-rooms-services"},React.createElement("div",{className:"available-rooms"},React.createElement("label",null,_townhub_add_ons.i18n.book_avr),React.createElement("div",{className:"fl-wrap multiqtts-select-wrap rooms-items-wrap"},b)),0<n.length&&!l.props.qtt_service&&React.createElement("div",{className:"cth-dropdown-warp services-wrap"},React.createElement("div",{className:"cth-dropdown-header",onClick:this.handleClick},React.createElement("label",null,_townhub_add_ons.i18n.book_services,React.createElement("span",{className:"count-select-ser"},u.length))),this.state.isToggleOn?React.createElement("div",{className:"cth-dropdown-options"},React.createElement("div",{className:"cth-dropdown-inner"},g)):null),0<n.length&&l.props.qtt_service&&React.createElement("div",{className:"lservices-qtts-wrap"},React.createElement("label",{className:"lservices-qtts-label"},_townhub_add_ons.i18n.book_services),React.createElement("div",{className:"lservices-qtts-items"},g))):React.createElement("div",{className:"no-rooms"},1==p&&0==_?_townhub_add_ons.i18n.no_rooms:_townhub_add_ons.i18n.no_rooms_init),React.createElement("div",{className:"total-coast fl-wrap clearfix"},React.createElement("strong",null,_townhub_add_ons.i18n.book_ts),React.createElement("span",null,(0,S.price_format)(y))),React.createElement("div",{className:"booking-buttons"},React.createElement("button",{type:"button",onClick:this.checkAvailability,className:"btn-check-availability",disabled:!r},_townhub_add_ons.i18n.book_chev),React.createElement("button",{type:"button",onClick:this.onClickSubmit,className:"btn-book-now",disabled:!i},_townhub_add_ons.i18n.book_bn))),E)}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.booking.checkingavai!==t.checkingavai?{booked:[],checkingavai:!1}:null}}]),r}();n.default=c(function(e){return{booking:e.booking}},function(t){return{checkAvailability:function(e){return t(r.checkAvailability(e))}}})(s)},{"../action/BookingActions":1,"../utils/helpers":14,"./CheckInOut":7,"./LoadingIndicator":8,"./RoomPerson":9,"./RoomSelected":10}],7:[function(e,t,n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)};Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}();function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(e){function l(e){c(this,l);var t=s(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,e));t.fieldName="";var n=t.props,a=n.fieldName,i=n.fieldValue,r=n.field;null!=a&&(t.fieldName=a);var o=t.parseFieldValue(i);return t.state={vals:o,current:0,show_selector:!1,is_checking:!1,check_available:!1},t.options={showing:1,max:12},t.format="YYYY-MM-DD",null!=r&&null!=r.format&&""!=r.format&&(t.format=r.format),t.wrapperRef=null,t.toggleDate=t.toggleDate.bind(t),t.switchMonth=t.switchMonth.bind(t),t.onFocusInput=t.onFocusInput.bind(t),t.setWrapperRef=t.setWrapperRef.bind(t),t.handleClickOutside=t.handleClickOutside.bind(t),t.onClickApply=t.onClickApply.bind(t),t.onClickCancel=t.onClickCancel.bind(t),t}return o(l,React.Component),r(l,[{key:"setWrapperRef",value:function(e){this.wrapperRef=e}},{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClickOutside,!0)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClickOutside,!0)}},{key:"handleClickOutside",value:function(e){1==this.state.show_selector&&this.wrapperRef&&0==this.wrapperRef.contains(e.target)&&this.setState({show_selector:!1})}},{key:"parseFieldValue",value:function(e){var t=[];if(null!=e&&Array.isArray(e)&&2==e.length){var n=/-/gm;t=[e[0].replace(n,""),e[1].replace(n,"")]}return(t=t.filter(function(e,t,n){return n.indexOf(e)===t})).length<2&&(t=[]),t}},{key:"doAvailableCheck",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,n=this,t=n.props.field;if(null!=t&&null!=t.action&&""!=t.action){n.setState({is_checking:!0});var a={action:t.action};null!=t.postid&&""!=t.postid&&(a.postid=t.postid),a.dates=n.getQueryDates(e),axios.post(_townhub_add_ons.url,Qs.stringify(a)).then(function(e){if(null!=e.data.debug&&e.data.debug&&console.log(e),e.data.success){var t={available:e.data.available};null!=e.data.check_available&&!0===e.data.check_available&&(t.check_available=!0),t.is_checking=!1,n.setState(t)}}).catch(function(e){console.log(e),n.setState({is_checking:!1})})}}},{key:"getQueryDates",value:function(e){var t=this.options.showing,n=this.state.current;null!=e&&(n=e);for(var a=[],i=0;i<t;i++)for(var r=new Date,o=r.getFullYear(),l=r.getMonth(),c=new Date(o,l+n+i+1,0).getDate(),s=1;s<=c;s++){var u=new Date(o,l+n+i,s),d=u.getFullYear(),h=u.getMonth(),p=this._getMonthNum(h),m=this._getDateNum(s);a.push(""+d+p+m)}return a}},{key:"onFocusInput",value:function(e){this.doAvailableCheck(),this.setState({show_selector:!0})}},{key:"onClickCancel",value:function(){this.setState({vals:[],show_selector:!1}),this.props.getCheckInOut(["",""])}},{key:"onClickApply",value:function(){this.setState({show_selector:!1})}},{key:"switchMonth",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"next",t=this.options.max,n=this.state.current;"next"==e?n<t&&++n:0<n&&--n,this.setState({current:n})}},{key:"toggleDate",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=this.state.vals;Array.isArray(n)&&(2<=n.length?n=[e]:1==n.length?t?n=[e]:n[0]<=e?n.push(e):n=[e]:n=[e],2==n.length?(this.props.getCheckInOut([this._formatOutDate(n[0]),this._formatOutDate(n[1])]),this.setState({show_selector:!1})):this.setState({vals:n}))}},{key:"_fieldClass",value:function(){var e="submit-field",t=this.state,n=t.vals,a=t.show_selector;return 2==n.length&&(e+=" ckinout-has-value"),1==a&&(e+=" show-selector"),e}},{key:"_renderFieldHeader",value:function(){var e=this.props.field;return React.createElement("div",{className:"lfield-header"},""!=e.icon&&React.createElement("span",{className:"lfield-icon"},React.createElement("i",{className:e.icon})),""!=e.label&&React.createElement("label",{className:"lfield-label",onClick:this.onFocusInput},e.label))}},{key:"_getMonthDatas",value:function(e){var t=this.state,n=t.check_available,a=t.available,i=this.state.vals;null!=e&&"function"==typeof e.getMonth||(e=new Date);var r=new Date,o=e.getFullYear(),l=e.getMonth(),c=this._getMonthNum(l),s=new Date(o,l,1),u=new Date(o,l+1,0),d=s.getDay(),h=u.getDate();r=new Date(r.getFullYear(),r.getMonth(),r.getDate());var p=[],m={iso_date:"2018-12-16",date:0,status:"prev",time:"",selected:!1,first:!1,last:!1,inside:!1};if(null!=_townhub_add_ons.week_starts_monday&&"yes"==_townhub_add_ons.week_starts_monday)if(0===d)p.push(m),p.push(m),p.push(m),p.push(m),p.push(m),p.push(m);else for(var f=1;f<d;f++)p.push(m);else if(0!==d)for(var v=0;v<d;v++)p.push(m);for(var _=1;_<=h;_++){var b=new Date(o,l,_),y=this._getDateNum(_),k=""+o+c+y,g=o+"-"+c+"-"+y,E=!1,w=!1,R=!1,C=!1;2==i.length?(k==i[0]&&(w=E=!0),k==i[1]&&(R=E=!0),i[0]<k&&k<i[1]&&(C=!0)):1==i.length&&k==i[0]&&(w=E=!0);var q={iso_date:g,date:_,status:b<r?"past":"available",time:k,selected:E,first:w,last:R,inside:C};if(1===i.length&&null!=this.props.min_nights&&"available"==q.status){var S=parseInt(i[0]),N=parseInt(k),O=parseInt(this.props.min_nights);isNaN(S)||isNaN(N)||isNaN(O)||S<N&&this._getNightsDiff(N,S)<O&&(q.status="unavailable")}null!=n&&!0===n&&(null!=a[k]?q.metas=a[k]:"past"!=q.status&&(q.status="unavailable")),p.push(q)}return p}},{key:"_getMonthNum",value:function(e){return(e=parseInt(e)+1)<10?"0"+e:e}},{key:"_getDateNum",value:function(e){return e<10?"0"+e:e}},{key:"_renderDays",value:function(){var n=[];return _townhub_add_ons.i18n.days.forEach(function(e,t){return n.push(React.createElement(u,{key:t,day:e}))}),React.createElement("div",{className:"cal-days"},n)}},{key:"_getMonthString",value:function(e){null!=e&&"function"==typeof e.getMonth||(e=new Date);var t=e.getFullYear(),n=e.getMonth();return t+" "+_townhub_add_ons.i18n.months[n]}},{key:"_formatOutDate",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"20181216",t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n="",a="",i="";return null!=(e=String(e))&&8==e.length?(n=e.substr(0,4),a=e.substr(4,2),i=e.substr(6,2),1==t?n+"-"+a+"-"+i:this.format.replace("YYYY",n).replace("MM",a).replace("DD",i)):""}},{key:"_renderStringValue",value:function(){var e=this.state.vals,t="";return 2==e.length&&(t+=this._formatOutDate(e[0],!1),t+=" -> ",t+=this._formatOutDate(e[1],!1)),t}},{key:"_getDatesDiff",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=this.state.vals,n=0;if(2==t.length){var a=new Date(this._formatOutDate(t[0])),i=new Date(this._formatOutDate(t[1]));n=Math.floor((i-a)/864e5),1==e&&++n}return n}},{key:"_getNightsDiff",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],a=0,i=new Date(this._formatOutDate(e,!0)),r=new Date(this._formatOutDate(t,!0));return a=Math.floor((i-r)/864e5),1==n&&++a,a}},{key:"_renderMonthFooter",value:function(){return this.state.vals.length<2&&" disabled",React.createElement("div",{className:"cal-months-footer"},React.createElement("span",{className:"selected-date"},this._renderStringValue()),React.createElement("button",{className:"btn-cal-cancel",type:"button",onClick:this.onClickCancel},_townhub_add_ons.i18n.checkout_can))}},{key:"_renderSelector",value:function(){var l=this,e=this.options,t=e.showing,n=e.max,c=this.state.current,a="cal-month-nav month-next",i="cal-month-nav month-prev";c<=0&&(i+=" month-disabled"),n<=c&&(a+=" month-disabled");for(var r=React.createElement("article",{className:"cal-months-header"},React.createElement("div",{className:i,onClick:function(e){return l.switchMonth("prev")}},React.createElement("span",null)),React.createElement("div",{className:a,onClick:function(e){return l.switchMonth("next")}},React.createElement("span",null))),s=[],o=function(e){var t=new Date,n=t.getFullYear(),a=t.getMonth(),i=new Date(n,a+c+e,1),r=l._getMonthDatas(i),o=[];r.forEach(function(e,t){return o.push(React.createElement(p,{key:t,date:e,toggleDate:l.toggleDate}))}),s.push(React.createElement("div",{key:e,className:"cal-month"},React.createElement("div",{className:"cal-month-header"},React.createElement("div",{className:"cal-month-string"},l._getMonthString(i))),React.createElement("div",{className:"cal-dates-wrap"},l._renderDays(),React.createElement("div",{className:"cal-dates"},o))))},u=0;u<t;u++)o(u);var d="cal-months-wrap months-"+this.options.showing,h="lfield-content checkinout-field";return null!=this.props.field&&null!=this.props.field.action&&""!=this.props.field.action&&(h+=" checkinout-picker-wrap"),React.createElement("div",{className:h},!0===this.state.is_checking&&React.createElement("div",{className:"loading-indicator calendar-check-loading"},React.createElement("span",null),React.createElement("span",null),React.createElement("span",null)),React.createElement("div",{className:d},r,s,this._renderMonthFooter()))}},{key:"render",value:function(){var e=this.options;e.showing,e.max,this.state.current;return React.createElement("div",{className:this._fieldClass(),ref:this.setWrapperRef},null!=this.props.field&&this._renderFieldHeader(),React.createElement("input",{type:"text",className:"in-out-dates",value:this._renderStringValue(),readOnly:!0,onFocus:this.onFocusInput}),React.createElement("div",{className:"in-out-count"},React.createElement("i",{className:"fa fa-question-circle"}),React.createElement("span",null,_townhub_add_ons.i18n.nights," : ",React.createElement("strong",null,this._getDatesDiff(!1)))),1==this.state.show_selector&&this._renderSelector())}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=t.vals,a=e.fieldValue;if(2===a.length){var i=a[0].replace(/-/gm,""),r=a[1].replace(/-/gm,"");if(2===n.length&&(i!=n[0]||r!=n[1]))return{vals:[i,r]};if(0===n.length&&""!=i&&""!=r)return{vals:[i,r]}}return null}}]),l}();n.default=l;var p=function(e){function n(e){c(this,n);var t=s(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.onToggle=t.onToggle.bind(t),t}return o(n,React.Component),r(n,[{key:"onToggle",value:function(e){var t=this.props.date,n=t.time,a=t.status,i=t.selected;"available"===a&&this.props.toggleDate(n,i)}},{key:"render",value:function(){var e=this.props.date,t=e.status,n=e.date,a="cal-date";return a+="prev"===t?" cal-date-diff":"past"===t?" cal-date-past":"unavailable"===t?" cal-date-unavailable":" cal-date-available",e.selected&&(a+=" cal-date-checked"),e.first&&(a+=" cal-date-cfirst"),e.last&&(a+=" cal-date-clast"),e.inside&&(a+=" cal-date-inside"),React.createElement("div",{className:a,onClick:this.onToggle},"prev"!=t&&React.createElement("span",null,n))}}]),n}(),u=function(e){function t(){return c(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,React.Component),r(t,[{key:"render",value:function(){var e=this.props.day;return React.createElement("div",{className:"cal-day"},e)}}]),t}()},{}],8:[function(e,t,n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)};Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}();var o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,React.Component),r(t,[{key:"render",value:function(){var e="loading-indicator";return null!=this.props.class&&(e+=" "+this.props.class),React.createElement("div",{className:e},React.createElement("span",null),React.createElement("span",null),React.createElement("span",null))}}]),t}();n.default=o},{}],9:[function(e,t,n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)};Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}(),u=e("../utils/helpers");var i=function(e){function i(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e)),n=t.props.room;t.state={qtt:n.qtt,adults:0,children:0,infant:0};var a=5;return parseInt(n.quantities)<a&&(a=parseInt(n.quantities)),t.max_qtt=a,t.onChangeQtt=t.onChangeQtt.bind(t),t.onClickQtt=t.onClickQtt.bind(t),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,React.Component),o(i,[{key:"onChangeQtt",value:function(e,t){this.handleQttChange(t,e.target.value)}},{key:"handleQttChange",value:function(e,t){var n=this.props.room,a=n.id,i=n.available,r=this.state;0<=t&&(r[e]=t,this.setState(r),i&&this.props.changePersonQtt(r,a,this.props.room))}},{key:"onClickQtt",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"up",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1e3,i=0;null!=this.state[e]&&(i=this.state[e]),"down"==t&&n<i?--i:"up"==t&&i<a&&++i,this.handleQttChange(e,i)}},{key:"render",value:function(){var t=this,e=this.props.room,n=(e.id,e.adults),a=e.children,i=e.title,r=(e.quantities,e.available),o=e.price,l=e.children_price,c=this.props.rOrder,s=parseInt(n)+parseInt(a);return React.createElement("div",{className:"multiqtts-select_item bkroom_new-item"},React.createElement("div",{className:null!=c&&1===c?"multiqtts-select_header vis-multiqtt_select fl-wrap":"multiqtts-select_header fl-wrap"},i,React.createElement("span",{className:"available_counter green-bg"},s),React.createElement("i",{className:"fal fa-plus"})),r&&React.createElement("div",{className:null!=c&&1===c?"custom-tour-quantities multiqtts-select_content vis-multiqtt_select_cont":"custom-tour-quantities multiqtts-select_content"},React.createElement("div",{className:"qtt-item qtt-item-full"},React.createElement("div",{className:"qtt-label-wrap"},_townhub_add_ons.i18n.adults),React.createElement("div",{className:"qtt-price text-right"},(0,u.price_format)(o)," x "),React.createElement("div",{className:"qtt-input"},React.createElement("input",{type:"number",className:"tour-quantity-input",min:"0",step:"1",max:parseInt(n),value:this.state.adults,readOnly:!0,onChange:function(e){return t.onChangeQtt(e,"adults")}}),React.createElement("div",{className:"qtt-nav"},React.createElement("div",{className:"qtt-btn qtt-up",onClick:function(e){return t.onClickQtt("adults","up",0,parseInt(n))}},"+"),React.createElement("div",{className:"qtt-btn qtt-down",onClick:function(e){return t.onClickQtt("adults","down",0,parseInt(n))}},"-")))),React.createElement("div",{className:"qtt-item qtt-item-full mt-10"},React.createElement("div",{className:"qtt-label-wrap"},_townhub_add_ons.i18n.children),React.createElement("div",{className:"qtt-price text-right"},(0,u.price_format)(l)," x "),React.createElement("div",{className:"qtt-input"},React.createElement("input",{type:"number",className:"tour-quantity-input",min:"0",step:"1",max:parseInt(a),value:this.state.children,readOnly:!0,onChange:function(e){return t.onChangeQtt(e,"children")}}),React.createElement("div",{className:"qtt-nav"},React.createElement("div",{className:"qtt-btn qtt-up",onClick:function(e){return t.onClickQtt("children","up",0,parseInt(a))}},"+"),React.createElement("div",{className:"qtt-btn qtt-down",onClick:function(e){return t.onClickQtt("children","down",0,parseInt(a))}},"-"))))))}}]),i}();n.default=i},{"../utils/helpers":14}],10:[function(e,t,n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)};Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}();var i=function(e){function i(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e)),n=t.props.room;t.state={qtt:n.qtt};var a=5;return parseInt(n.quantities)<a&&(a=parseInt(n.quantities)),t.max_qtt=a,t.onChangeQtt=t.onChangeQtt.bind(t),t.onClickQtt=t.onClickQtt.bind(t),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,React.Component),o(i,[{key:"onChangeQtt",value:function(e){this.handleQttChange(e.target.value)}},{key:"handleQttChange",value:function(e){var t=this.props.room,n=t.id,a=t.available;0<=e&&(this.setState({qtt:e}),a&&this.props.changeRoomQtt(e,n,this.props.room))}},{key:"onClickQtt",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"up",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1e3,a=this.state.qtt;"down"==e&&t<a?--a:"up"==e&&a<n&&++a,this.handleQttChange(a)}},{key:"render",value:function(){var t=this,e=(this.props.room,this.props.room),n=(e.id,e.adults),a=e.children,i=e.title,r=e.quantities,o=e.available,l=(e.price,e.children_price,parseInt(n),parseInt(a),this.props.rOrder);return React.createElement("div",{className:"multiqtts-select_item bkroom-item"},React.createElement("div",{className:null!=l&&1===l?"multiqtts-select_header vis-multiqtt_select fl-wrap":"multiqtts-select_header fl-wrap"},i,React.createElement("span",{className:"available_counter green-bg"},r),React.createElement("i",{className:"fal fa-plus"})),o&&React.createElement("div",{className:null!=l&&1===l?"custom-tour-quantities multiqtts-select_content vis-multiqtt_select_cont":"custom-tour-quantities multiqtts-select_content"},React.createElement("div",{className:"qtt-item qtt-item-full"},React.createElement("div",{className:"qtt-label-wrap"},_townhub_add_ons.i18n.roomsl_quan),React.createElement("div",{className:"qtt-input"},React.createElement("input",{type:"number",className:"tour-quantity-input",min:"0",step:"1",max:this.max_qtt,value:this.state.qtt,readOnly:!0,onChange:this.onChangeQtt}),React.createElement("div",{className:"qtt-nav"},React.createElement("div",{className:"qtt-btn qtt-up",onClick:function(e){return t.onClickQtt("up",0,t.max_qtt)}},"+"),React.createElement("div",{className:"qtt-btn qtt-down",onClick:function(e){return t.onClickQtt("down",0,t.max_qtt)}},"-"))))))}}]),i}();n.default=i},{}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:r.default.booking,t=arguments[1];switch(t.type){case o.CHECK_AVAILABILITY_START:return Object.assign({},e,{checkingavai:!0});case o.CHECK_AVAILABILITY_SUCCESS:return Object.assign({},e,{rooms:t.data.rooms,available:t.data.available,services:t.data.add_services,checkingavai:!1});default:return e}};var a,i=e("./initialState"),r=(a=i)&&a.__esModule?a:{default:a},o=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(e("../action/actionTypes"))},{"../action/actionTypes":2,"./initialState":13}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a,i=e("./Booking"),r=(a=i)&&a.__esModule?a:{default:a};var o=Redux.combineReducers;n.default=o({booking:r.default})},{"./Booking":11}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={booking:{rooms:[],available:[],services:[],checkingavai:!1}}},{}],14:[function(e,t,n){"use strict";function l(e){return(e=parseInt(e)+1)<10?"0"+e:e}function c(e){return e<10?"0"+e:e}function i(e){return e=parseFloat(e),isNaN(e)&&(e=0),e}Object.defineProperty(n,"__esModule",{value:!0}),n.getDate=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"YYYY-MM-DD";e=null==e||""==e?new Date:new Date(e);"function"!=typeof e.getMonth&&(e=new Date);var a=e.getDate();null==t||isNaN(parseInt(t))||(a+=parseInt(t),e.setDate(a));a=e.getDate();var i=e.getFullYear(),r=l(e.getMonth()),o=c(a);return""!=n?n.replace(/YYYY/g,i).replace(/MM/g,r).replace(/DD/g,o):e.toString()},n.validateEmail=function(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)},n.price_to_usd=function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];e=i(e),null!=_townhub_add_ons.currency?(e=(e+"").replace(new RegExp("."==_townhub_add_ons.currency.ths_sep?"\\.":_townhub_add_ons.currency.ths_sep,"g"),"").replace(_townhub_add_ons.currency.dec_sep,"."),e=parseFloat(e)/parseFloat(_townhub_add_ons.currency.rate),t&&("left"==_townhub_add_ons.currency.sb_pos?e=_townhub_add_ons.currency.symbol+e:e+=_townhub_add_ons.currency.symbol)):t&&(e=_townhub_add_ons.base_currency.symbol+e);return e},n.price_format=function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if(e=i(e),null!=_townhub_add_ons.currency){e=parseFloat(e)*parseFloat(_townhub_add_ons.currency.rate);var n=parseInt(_townhub_add_ons.currency.decimal);if(0<n){var a=new RegExp("."==_townhub_add_ons.currency.dec_sep?"(\\d)(?=(\\d{3})+\\.)":"(\\d)(?=(\\d{3})+"+_townhub_add_ons.currency.dec_sep+")","g");e=e.toFixed(n).replace(".",_townhub_add_ons.currency.dec_sep).replace(a,"$1"+_townhub_add_ons.currency.ths_sep)}else e=(parseInt(e)+"").replace(/(\d)(?=(\d{3})+$)/g,"$1"+_townhub_add_ons.currency.ths_sep);t&&("left"==_townhub_add_ons.currency.sb_pos?e=_townhub_add_ons.currency.symbol+e:"left_space"==_townhub_add_ons.currency.sb_pos?e=_townhub_add_ons.currency.symbol+" "+e:"right_space"==_townhub_add_ons.currency.sb_pos?e+=" "+_townhub_add_ons.currency.symbol:e+=_townhub_add_ons.currency.symbol)}else t&&(e=_townhub_add_ons.currency.symbol+e);return e},n.base_price_format=function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if(e=i(e),null!=_townhub_add_ons.base_currency){e=parseFloat(e)*parseFloat(_townhub_add_ons.base_currency.rate);var n=parseInt(_townhub_add_ons.base_currency.decimal);if(0<n){var a=new RegExp("."==_townhub_add_ons.base_currency.dec_sep?"(\\d)(?=(\\d{3})+\\.)":"(\\d)(?=(\\d{3})+"+_townhub_add_ons.base_currency.dec_sep+")","g");e=e.toFixed(n).replace(".",_townhub_add_ons.base_currency.dec_sep).replace(a,"$1"+_townhub_add_ons.base_currency.ths_sep)}else e=(parseInt(e)+"").replace(/(\d)(?=(\d{3})+$)/g,"$1"+_townhub_add_ons.base_currency.ths_sep);t&&("left"==_townhub_add_ons.base_currency.sb_pos?e=_townhub_add_ons.base_currency.symbol+e:"left_space"==_townhub_add_ons.base_currency.sb_pos?e=_townhub_add_ons.base_currency.symbol+" "+e:"right_space"==_townhub_add_ons.base_currency.sb_pos?e+=" "+_townhub_add_ons.base_currency.symbol:e+=_townhub_add_ons.base_currency.symbol)}return e},n.currency_symbol=function(){return null!=_townhub_add_ons.currency&&null!=_townhub_add_ons.currency.symbol?_townhub_add_ons.currency.symbol:_townhub_add_ons.base_currency.symbol},n.getWithdrawalDate=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"YYYY-MM-DD";e=null==e||""==e?new Date:new Date(e);"function"!=typeof e.getMonth&&(e=new Date);if(e.getDate()>t){var a=e.getMonth();e.setMonth(a+1,t)}else e.setDate(t);var i=e.getFullYear(),r=l(e.getMonth()),o=c(t);return""!=n?n.replace(/YYYY/g,i).replace(/MM/g,r).replace(/DD/g,o):e.toString()},n.get_float_price=i},{}],15:[function(e,t,n){"use strict";var a=o(e("./bookingsrc/components/BookingForm")),i=o(e("./bookingsrc/components/BookingFormNew")),v=o(e("./bookingsrc/components/BKTimeSlots")),_=o(e("./bookingsrc/components/BKTickets")),r=o(e("./bookingsrc/reducers"));function o(e){return e&&e.__esModule?e:{default:e}}var l=ReactRedux.Provider,c=Redux,s=c.createStore,u=c.applyMiddleware,d=s(r.default,u(ReduxThunk.default)),h=document.getElementById("bookingform-app");if(null!=h){var p="",m=1,f=!1,b=!1,y="";h.hasAttribute("data-format")&&(p=h.getAttribute("data-format")),h.hasAttribute("min_nights")&&(m=h.getAttribute("min_nights")),h.hasAttribute("qtt_service")&&(f="yes"===h.getAttribute("qtt_service")),h.hasAttribute("as_inquiry")&&(b="yes"===h.getAttribute("as_inquiry")),h.hasAttribute("nonce")&&(y=h.getAttribute("nonce")),ReactDOM.render(React.createElement(l,{store:d},React.createElement(a.default,{format:p,min_nights:m,qtt_service:f,as_inquiry:b,nonce:y})),h)}var k=document.getElementById("bookingrooms-app");if(null!=k){var g="",E="per_night",w=1,R=!1,C=!1,q="";k.hasAttribute("data-format")&&(g=k.getAttribute("data-format")),k.hasAttribute("price_based")&&(E=k.getAttribute("price_based")),k.hasAttribute("min_nights")&&(w=k.getAttribute("min_nights")),k.hasAttribute("qtt_service")&&(R="yes"===k.getAttribute("qtt_service")),k.hasAttribute("as_inquiry")&&(C="yes"===k.getAttribute("as_inquiry")),k.hasAttribute("nonce")&&(q=k.getAttribute("nonce")),ReactDOM.render(React.createElement(l,{store:d},React.createElement(i.default,{format:g,price_based:E,bktype:"rooms_new",min_nights:w,qtt_service:R,as_inquiry:C,nonce:q})),k)}!function(){var e=document.querySelectorAll(".cth-bk-tslots");if(e.length)for(var t=0;t<e.length;t++){var n=e[t],a="",i="Time Slots",r=!1,o="yes",l="";n.hasAttribute("data-postid")&&(a=n.getAttribute("data-postid")),n.hasAttribute("data-label")&&(i=n.getAttribute("data-label")),n.hasAttribute("data-single")&&(r="yes"===n.getAttribute("data-single")),n.hasAttribute("data-required")&&(o="yes"===n.getAttribute("data-required")),n.hasAttribute("data-countid")&&(l=n.getAttribute("data-countid")),ReactDOM.render(React.createElement(v.default,{postid:a,single:r,label:i,required:o,countid:l}),n)}var c=document.querySelectorAll(".cth-bk-tickets");if(c.length)for(var s=0;s<c.length;s++){var u=c[s],d="",h="Tickets",p=!1,m="yes",f="";u.hasAttribute("data-postid")&&(d=u.getAttribute("data-postid")),u.hasAttribute("data-label")&&(h=u.getAttribute("data-label")),u.hasAttribute("data-single")&&(p="yes"===u.getAttribute("data-single")),u.hasAttribute("data-required")&&(m="yes"===u.getAttribute("data-required")),u.hasAttribute("data-countid")&&(f=u.getAttribute("data-countid")),ReactDOM.render(React.createElement(_.default,{postid:d,single:p,label:h,required:m,countid:f}),u)}}()},{"./bookingsrc/components/BKTickets":3,"./bookingsrc/components/BKTimeSlots":4,"./bookingsrc/components/BookingForm":5,"./bookingsrc/components/BookingFormNew":6,"./bookingsrc/reducers":12}]},{},[15]);