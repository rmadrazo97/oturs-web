var _createClass=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},loginCaptcha,regCaptcha,submitCaptcha;function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(t){"use strict";t.fn.twittie=function(){var e=arguments[0]instanceof Object?arguments[0]:{},i="function"==typeof arguments[0]?arguments[0]:arguments[1],l=t.extend({username:null,list:null,hashtag:null,count:10,hideReplies:!1,dateFormat:"%b/%d/%Y",template:"{{date}} - {{tweet}}",apiPath:"api/tweet.php",loadingText:"Loading..."},e);l.list&&!l.username&&t.error("If you want to fetch tweets from a list, you must define the username of the list owner.");var s=function(e){return e.replace(/(https?:\/\/([-\w\.]+)+(:\d+)?(\/([\w\/_\.]*(\?\S+)?)?)?)/gi,'<a href="$1" target="_blank" title="Visit this link">$1</a>').replace(/#([a-zA-Z0-9_]+)/g,'<a href="https://twitter.com/search?q=%23$1&amp;src=hash" target="_blank" title="Search for #$1">#$1</a>').replace(/@([a-zA-Z0-9_]+)/g,'<a href="https://twitter.com/$1" target="_blank" title="$1 on Twitter">@$1</a>')},o=function(e){for(var t=e.split(" "),n=["January","February","March","April","May","June","July","August","September","October","November","December"],a={"%d":(e=new Date(Date.parse(t[1]+" "+t[2]+", "+t[5]+" "+t[3]+" UTC"))).getDate(),"%m":e.getMonth()+1,"%b":n[e.getMonth()].substr(0,3),"%B":n[e.getMonth()],"%y":String(e.getFullYear()).slice(-2),"%Y":e.getFullYear()},i=l.dateFormat,s=l.dateFormat.match(/%[dmbByY]/g),o=0,r=s.length;o<r;o++)i=i.replace(s[o],a[s[o]]);return i},r=function(e){for(var t=l.template,n=["id","id_str","date","tweet","avatar","url","retweeted","screen_name","user_name"],a=0,i=n.length;a<i;a++)t=t.replace(new RegExp("{{"+n[a]+"}}","gi"),e[n[a]]);return t};this.html("<span>"+l.loadingText+"</span>");var d=this;t.getJSON(l.apiPath,{action:l.action,username:l.username,list:l.list,hashtag:l.hashtag,count:l.count,exclude_replies:l.hideReplies},function(a){null!=a&&0!=a&&!1!==Array.isArray(a)?d.find("span").fadeOut("fast",function(){d.html("<ul></ul>");for(var e=0;e<l.count;e++){var t=!1;if(null!=a[e])t=a[e];else{if(null==a.statuses||!a.statuses[e])break;t=a.statuses[e]}var n={id:t.id,id_str:t.id_str,user_name:t.user.name,date:o(t.created_at),tweet:t.retweeted?s("RT @"+t.user.screen_name+": "+t.retweeted_status.text):s(t.text),avatar:'<img src="'+t.user.profile_image_url.replace("http:",window.location.protocol)+'" />',url:"https://twitter.com/"+t.user.screen_name+"/status/"+t.id_str,retweeted:t.retweeted,screen_name:s("@"+t.user.screen_name)};d.find("ul").append("<li>"+r(n)+"</li>")}"function"==typeof i&&i()}):console.log(a)})}}(jQuery),function(e){"use strict";e.fn.list_ticker=function(i){i=e.extend({speed:4e3,effect:"slide"},i);return this.each(function(){var n=e(this),a=n.children();a.not(":first").hide(),setInterval(function(){(a=n.children()).not(":first").hide();var e=a.eq(0),t=a.eq(1);"slide"==i.effect?(e.slideUp(),t.slideDown(function(){e.remove().appendTo(n)})):"fade"==i.effect&&e.fadeOut(function(){t.fadeIn(),e.remove().appendTo(n)})},i.speed)})}}(jQuery),function(s){function o(e,t){var n=e.getBoundingClientRect(),a=e.clientHeight,i=(e.clientWidth,t.getBoundingClientRect());i.top>=n.top&&i.top<=n.top+a||(e.scrollTop=i.top+e.scrollTop-n.top)}s.fn.niceSelect=function(e){if("string"==typeof e)return"update"==e?this.each(function(){var e=s(this),t=s(this).next(".nice-select"),n=t.hasClass("open");t.length&&(t.remove(),a(e),n&&e.next().trigger("click"))}):"destroy"==e&&(this.each(function(){var e=s(this),t=s(this).next(".nice-select");t.length&&(t.remove(),e.css("display",""))}),0==s(".nice-select").length&&s(document).off(".nice_select")),this;function a(e){e.after(s("<div></div>").addClass("nice-select").addClass(e.attr("class")||"").addClass(e.attr("disabled")?"disabled":"").addClass(e.attr("multiple")?"has-multiple":"").attr("tabindex",e.attr("disabled")?null:"0").html(e.attr("multiple")?'<span class="multiple-options"></span><div class="nice-select-search-box"><input type="text" class="nice-select-search" placeholder="'+_townhub_add_ons.search+'"/></div><ul class="list"></ul>':'<span class="current"></span><div class="nice-select-search-box"><input type="text" class="nice-select-search" placeholder="'+_townhub_add_ons.search+'"/></div><ul class="list"></ul>'));var a=e.next(),t=e.find("option");if(e.attr("multiple")){var n=e.find("option:selected"),i="";n.each(function(){$selected_option=s(this),$selected_text=$selected_option.data("display")||$selected_option.text(),i+='<span class="current">'+$selected_text+"</span>"}),$select_placeholder=e.data("placeholder")||e.attr("placeholder"),$select_placeholder=""==$select_placeholder?"Select":$select_placeholder,i=""==i?$select_placeholder:i,a.find(".multiple-options").html(i)}else{n=e.find("option:selected");a.find(".current").html(n.data("display")||n.text())}t.each(function(e){var t=s(this),n=t.data("display");a.find("ul").append(s("<li></li>").attr("data-value",t.val()).attr("data-display",n||null).addClass("option"+(t.is(":selected")?" selected":"")+(t.is(":disabled")?" disabled":"")).html(t.text()))})}this.hide(),this.each(function(){var e=s(this);e.next().hasClass("nice-select")||a(e)}),s(document).off(".nice_select"),s(document).on("click.nice_select",".nice-select",function(e){var t=s(this);s(".nice-select").not(t).removeClass("open"),t.toggleClass("open"),t.hasClass("open")?(t.find(".option"),t.find(".nice-select-search").val(""),t.find(".nice-select-search").focus(),t.find(".focus").removeClass("focus"),t.find(".selected").addClass("focus"),t.find("ul li").show()):t.focus()}),s(document).on("click",".nice-select-search-box",function(e){return e.stopPropagation(),!1}),s(document).on("click.nice_select",function(e){0===s(e.target).closest(".nice-select").length&&s(".nice-select").removeClass("open").find(".option")}),s(document).on("click.nice_select",".nice-select .option:not(.disabled)",function(e){var t=s(this),n=t.closest(".nice-select");if(n.hasClass("has-multiple"))t.hasClass("selected")?t.removeClass("selected"):t.addClass("selected"),$selected_html="",$selected_values=[],n.find(".selected").each(function(){$selected_option=s(this);var e=$selected_option.data("display")||$selected_option.text();$selected_html+='<span class="current">'+e+"</span>",$selected_values.push($selected_option.data("value"))}),$select_placeholder=n.prev("select").data("placeholder")||n.prev("select").attr("placeholder"),$select_placeholder=""==$select_placeholder?"Select":$select_placeholder,$selected_html=""==$selected_html?$select_placeholder:$selected_html,n.find(".multiple-options").html($selected_html),n.prev("select").val($selected_values).trigger("change");else{n.find(".selected").removeClass("selected"),t.addClass("selected");var a=t.data("display")||t.text();n.find(".current").text(a),n.prev("select").val(t.data("value")).trigger("change")}}),s(document).on("keydown.nice_select",".nice-select",function(e){var t=s(this),n=s(t.find(".focus")||t.find(".list .option.selected"));if(13==e.keyCode)return t.hasClass("open")?n.trigger("click"):t.trigger("click"),!1;if(40==e.keyCode){if(t.hasClass("open")){var a=n.nextAll(".option:not(.disabled)").first();0<a.length&&(t.find(".focus").removeClass("focus"),a.addClass("focus"),o(a.closest(".list")[0],a[0]))}else t.trigger("click");return!1}if(38==e.keyCode){if(t.hasClass("open")){var i=n.prevAll(".option:not(.disabled)").first();0<i.length&&(t.find(".focus").removeClass("focus"),i.addClass("focus"),o(i.closest(".list")[0],i[0]))}else t.trigger("click");return!1}if(27==e.keyCode)t.hasClass("open")&&t.trigger("click");else if(9==e.keyCode&&t.hasClass("open"))return!1}),s(document).on("keydown.nice-select-search",".nice-select",function(){var e=s(this),t=e.find(".nice-select-search").val(),n=e.find("ul li");if(""==t)n.show();else if(e.hasClass("open")){t=t.toLowerCase();var a=new RegExp(t);0<n.length?n.each(function(){var e=s(this),t=e.text().toLowerCase();a.test(t)?e.show():e.hide()}):n.show()}});var t=document.createElement("a").style;return t.cssText="pointer-events:auto","auto"!==t.pointerEvents&&s("html").addClass("no-csspointerevents"),this}}(jQuery),function(t){t.fn.downCount=function(e,d){var c=t.extend({date:null,offset:null},e);c.date||t.error("Date is not defined."),Date.parse(c.date)||t.error("Incorrect date format, it should look like this, 12/24/2012 12:00:00.");var u=this,h=function(){var e=new Date,t=e.getTime()+6e4*e.getTimezoneOffset();return new Date(t+36e5*c.offset)};var p=setInterval(function(){var e=new Date(c.date)-h();if(e<0)return clearInterval(p),void(d&&"function"==typeof d&&d());var t=Math.floor(e/864e5),n=Math.floor(e%864e5/36e5),a=Math.floor(e%36e5/6e4),i=Math.floor(e%6e4/1e3),s=1===(t=2<=String(t).length?t:"0"+t)?"day":"days",o=1===(n=2<=String(n).length?n:"0"+n)?"hour":"hours",r=1===(a=2<=String(a).length?a:"0"+a)?"minute":"minutes",l=1===(i=2<=String(i).length?i:"0"+i)?"second":"seconds";u.find(".days").text(t),u.find(".hours").text(n),u.find(".minutes").text(a),u.find(".seconds").text(i),u.find(".days_ref").text(s),u.find(".hours_ref").text(o),u.find(".minutes_ref").text(r),u.find(".seconds_ref").text(l)},1e3)}}(jQuery),function(f,g){var n=g.document;f.fn.share=function(e){var t={init:function(e){this.share.settings=f.extend({},this.share.defaults,e);var o=(this.share.settings,this.share.settings.networks),r=this.share.settings.theme,l=this.share.settings.orientation,d=this.share.settings.affix,c=this.share.settings.margin,u=this.share.settings.title||f(n).attr("title"),h=this.share.settings.urlToShare||f(location).attr("href"),p="";return f.each(f(n).find('meta[name="description"]'),function(e,t){p=f(t).attr("content")}),this.each(function(){var t,n=f(this),e=n.attr("id"),a=encodeURIComponent(h),i=u.replace("|",""),s=p.substring(0,250);o.forEach(function(e){void 0!==m.networkDefs[e]&&(t=(t=m.networkDefs[e].url).replace("|u|",a).replace("|t|",i).replace("|d|",s).replace("|140|",i.substring(0,130)),f("<a href='"+t+"' title='"+_townhub_add_ons.i18n.share_on.replace("{SOCIAL}",e)+"' class='pop share-"+r+" share-"+r+"-"+e+"'></a>").appendTo(n))}),f("#"+e+".share-"+r).css("margin",c),"horizontal"!=l?f("#"+e+" a.share-"+r).css("display","block"):f("#"+e+" a.share-"+r).css("display","inline-block"),void 0!==d&&(n.addClass("share-affix"),-1!=d.indexOf("right")?(n.css("left","auto"),n.css("right","0px"),-1!=d.indexOf("center")&&n.css("top","40%")):-1!=d.indexOf("left center")&&n.css("top","40%"),-1!=d.indexOf("bottom")&&(n.css("bottom","0px"),n.css("top","auto"),-1!=d.indexOf("center")&&n.css("left","40%"))),f(".pop").click(function(){return g.open(f(this).attr("href"),"t","toolbar=0,resizable=1,status=0,width=640,height=528"),!1})})}},m={networkDefs:{facebook:{url:"http://www.facebook.com/share.php?u=|u|"},twitter:{url:"https://twitter.com/share?via=in1.com&text=|140|"},linkedin:{url:"http://www.linkedin.com/shareArticle?mini=true&url=|u|&title=|t|&summary=|d|&source=in1.com"},in1:{url:"http://www.in1.com/cast?u=|u|",w:"490",h:"529"},tumblr:{url:"http://www.tumblr.com/share?v=3&u=|u|"},digg:{url:"http://digg.com/submit?url=|u|&title=|t|"},googleplus:{url:"https://plusone.google.com/_/+1/confirm?hl=en&url=|u|"},reddit:{url:"http://reddit.com/submit?url=|u|"},pinterest:{url:"http://pinterest.com/pin/create/button/?url=|u|&media=&description=|d|"},posterous:{url:"http://posterous.com/share?linkto=|u|&title=|t|"},stumbleupon:{url:"http://www.stumbleupon.com/submit?url=|u|&title=|t|"},email:{url:"mailto:?subject=|t|"},vk:{url:"http://vk.com/share.php?url=|u|&title=|t|&description=|d|"},whatsapp:{url:"whatsapp://send?text=|u|"},okru:{url:"https://connect.ok.ru/offer?url=|u|&title=|t|"},telegram:{url:"https://telegram.me/share/url?url=|u|&text=|t|"},instagram:{url:"https://www.instagram.com/?url=|u|&text=|t|"}}};return t[e]?t[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=(void 0===e?"undefined":_typeof(e))&&e?void f.error('Method "'+e+'" does not exist in social plugin'):t.init.apply(this,arguments)},f.fn.share.defaults={networks:["in1","facebook","twitter","linkedin"],theme:"icon",autoShow:!0,margin:"3px",orientation:"horizontal",useIn1:!0},f.fn.share.settings={}}(jQuery,window),function(_){_.fn.timeDropper=function(i,e){return _(this).each(function(){var d,u=_(this),c=!1,h=!1,p=function(e){return e<10?"0"+e:e},e=_(".td-clock").length,t=null,m=_.extend({format:"h:mm a",autoswitch:!1,meridians:!1,mousewheel:!1,setCurrentTime:!0,init_animation:"fadein",primaryColor:"#1977CC",borderColor:"#1977CC",backgroundColor:"#FFF",textColor:"#555"},i,{setCurrentTime:!0===u.data("init-set")});u.prop({readonly:!0}).addClass("td-input"),_("body").append('<div class="td-wrap td-n2" id="td-clock-'+e+'"><div class="td-overlay"></div><div class="td-clock td-init"><div class="td-deg td-n"><div class="td-select"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 35.4" enable-background="new 0 0 100 35.4" xml:space="preserve"><g><path fill="none" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M98.1,33C85.4,21.5,68.5,14.5,50,14.5S14.6,21.5,1.9,33"/><line fill="none" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" x1="1.9" y1="33" x2="1.9" y2="28.6"/><line fill="none" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" x1="1.9" y1="33" x2="6.3" y2="33"/><line fill="none" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" x1="98.1" y1="33" x2="93.7" y2="33"/><line fill="none" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" x1="98.1" y1="33" x2="98.1" y2="28.6"/></g></svg></div></div><div class="td-medirian"><span class="td-icon-am td-n">AM</span><span class="td-icon-pm td-n">PM</span></div><div class="td-lancette"><div></div><div></div></div><div class="td-time"><span class="on"></span>:<span></span></div></div></div>'),_("head").append("<style>#td-clock-"+e+" .td-clock {color:"+m.textColor+";background: "+m.backgroundColor+"; box-shadow: 0 0 0 1px "+m.borderColor+",0 0 0 8px rgba(0, 0, 0, 0.05); } #td-clock-"+e+" .td-clock .td-time span.on { color:"+m.primaryColor+"} #td-clock-"+e+" .td-clock:before { border-color: "+m.borderColor+"} #td-clock-"+e+" .td-select:after { box-shadow: 0 0 0 1px "+m.borderColor+" } #td-clock-"+e+" .td-clock:before,#td-clock-"+e+" .td-select:after {background: "+m.backgroundColor+";} #td-clock-"+e+" .td-lancette {border: 2px solid "+m.primaryColor+"; opacity:0.1}#td-clock-"+e+" .td-lancette div:after { background: "+m.primaryColor+";} #td-clock-"+e+" .td-bulletpoint div:after { background:"+m.primaryColor+"; opacity:0.1}</style>");var n=_("#td-clock-"+e),a=n.find(".td-overlay"),f=n.find(".td-clock");f.find("svg").attr("style","stroke:"+m.borderColor);var g=-1,v=0,w=0,b=function(){var e=f.find(".td-time span.on"),t=parseInt(e.attr("data-id"));if(0==e.index())var n=Math.round(360*t/23);else n=Math.round(360*t/59);g=-1,w=v=n},y=function(e){var t=f.find(".td-time span.on"),n=t.attr("data-id");n||(n=0);var a=Math.round(23*e/360),i=Math.round(59*e/360);if(0==t.index()?(t.attr("data-id",p(a)),m.meridians&&(12<=a&&a<24?(f.find(".td-icon-pm").addClass("td-on"),f.find(".td-icon-am").removeClass("td-on")):(f.find(".td-icon-am").addClass("td-on"),f.find(".td-icon-pm").removeClass("td-on")),12<a&&(a-=12),0==a&&(a=12)),t.text(p(a))):t.attr("data-id",p(i)).text(p(i)),w=e,f.find(".td-deg").css("transform","rotate("+e+"deg)"),0==t.index()){var s=Math.round(360*a/12);f.find(".td-lancette div:last").css("transform","rotate("+s+"deg)")}else f.find(".td-lancette div:first").css("transform","rotate("+e+"deg)");var o=f.find(".td-time span:first").attr("data-id"),r=f.find(".td-time span:last").attr("data-id");if(12<=Math.round(o)&&Math.round(o)<24){a=Math.round(o)-12;var l="pm",d="PM"}else a=Math.round(o),l="am",d="AM";0==a&&(a=12);var c=m.format.replace(/\b(H)\b/g,Math.round(o)).replace(/\b(h)\b/g,Math.round(a)).replace(/\b(m)\b/g,Math.round(r)).replace(/\b(HH)\b/g,p(Math.round(o))).replace(/\b(hh)\b/g,p(Math.round(a))).replace(/\b(mm)\b/g,p(Math.round(r))).replace(/\b(a)\b/g,l).replace(/\b(A)\b/g,d);u.val(c)};/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(h=!0),f.find(".td-time span").on("click",function(e){var t=_(this);f.find(".td-time span").removeClass("on"),t.addClass("on");var n=parseInt(t.attr("data-id"));0==t.index()?deg=Math.round(360*n/23):deg=Math.round(360*n/59),g=-1,v=deg,w=deg,y(deg)}),f.find(".td-deg").on("touchstart mousedown",function(e){b(),e.preventDefault(),clearInterval(d),f.find(".td-deg").removeClass("td-n"),f.find(".td-select").removeClass("td-rubber"),c=!0;var n,a,i,s,t=f.offset(),o=t.top+f.height()/2,r=t.left+f.width()/2,l=180/Math.PI;f.removeClass("td-rubber"),_(window).on("touchmove mousemove",function(e){if(1==c){if(h)var t=e.originalEvent.touches[0];else t=e;n=o-t.pageY,a=r-t.pageX,(i=Math.atan2(n,a)*l)<0&&(i=360+i),-1==g&&(g=i),(s=Math.floor(i-g+v))<0?s=360+s:360<s&&(s%=360),y(s)}})}),m.mousewheel&&f.on("mousewheel",function(e){e.preventDefault(),f.find(".td-deg").removeClass("td-n"),0<e.originalEvent.wheelDelta?w<=360&&(e.originalEvent.wheelDelta<=120?w++:120<e.originalEvent.wheelDelta&&(w+=20),360<w&&(w=0)):0<=w&&(-120<=e.originalEvent.wheelDelta?w--:e.originalEvent.wheelDelta<-120&&(w-=20),w<0&&(w=360)),g=-1,y(v=w)}),_(document).on("touchend mouseup",function(){c&&(c=!1,m.autoswitch&&(f.find(".td-time span").toggleClass("on"),f.find(".td-time span.on").click()),f.find(".td-deg").addClass("td-n"),f.find(".td-select").addClass("td-rubber"))});!function(e){var t,n,a=new Date,i=f.find(".td-time span:first"),s=f.find(".td-time span:last");if(u.val().length&&!m.setCurrentTime){var o=/\d+/g,r=u.val().split(":");r?(t=r[0].match(o),n=r[1].match(o),-1!=u.val().indexOf("am")||-1!=u.val().indexOf("AM")||-1!=u.val().indexOf("pm")||-1!=u.val().indexOf("PM")?-1!=u.val().indexOf("am")||-1!=u.val().indexOf("AM")?12==t&&(t=0):t<13&&24==(t=parseInt(t)+12)&&(t=0):24==t&&(t=0)):(t=parseInt(i.text())?p(i.text()):p(a.getHours()),n=parseInt(s.text())?p(s.text()):p(a.getMinutes()))}else t=parseInt(i.text())?p(i.text()):p(a.getHours()),n=parseInt(s.text())?p(s.text()):p(a.getMinutes());i.attr("data-id",t).text(t),s.attr("data-id",n).text(n),v=Math.round(360*t/23),f.find(".td-lancette div:first").css("transform","rotate("+Math.round(360*n/59)+"deg)"),m.setCurrentTime&&y(v),w=v,g=-1}(),u.focus(function(e){e.preventDefault(),u.blur()}),u.click(function(e){clearInterval(t),n.removeClass("td-fadeout"),n.addClass("td-show").addClass("td-"+m.init_animation),f.css({top:u.offset().top+(u.outerHeight()-8),left:u.offset().left+u.outerWidth()/2-f.outerWidth()/2}),f.hasClass("td-init")&&(d=setInterval(function(){f.find(".td-select").addClass("td-alert"),setTimeout(function(){f.find(".td-select").removeClass("td-alert")},1e3)},2e3),f.removeClass("td-init"))}),a.click(function(){n.addClass("td-fadeout").removeClass("td-"+m.init_animation),t=setTimeout(function(){n.removeClass("td-show")},300),u.change()}),_(window).on("resize",function(){b(),f.css({top:u.offset().top+(u.outerHeight()-8),left:u.offset().left+u.outerWidth()/2-f.outerWidth()/2})})})}}(jQuery),function(e){var t;if("function"==typeof define&&define.amd&&(define(e),t=!0),"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&(module.exports=e(),t=!0),!t){var n=window.Cookies,a=window.Cookies=e();a.noConflict=function(){return window.Cookies=n,a}}}(function(){function f(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var a in n)t[a]=n[a]}return t}return function e(p){function m(e,t,n){if("undefined"!=typeof document){if(1<arguments.length){"number"==typeof(n=f({path:"/"},m.defaults,n)).expires&&(n.expires=new Date(1*new Date+864e5*n.expires)),n.expires=n.expires?n.expires.toUTCString():"";try{var a=JSON.stringify(t);/^[\{\[]/.test(a)&&(t=a)}catch(e){}t=p.write?p.write(t,e):encodeURIComponent(String(t)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var i="";for(var s in n)n[s]&&(i+="; "+s,!0!==n[s]&&(i+="="+n[s].split(";")[0]));return document.cookie=e+"="+t+i}for(var o={},r=function(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)},l=document.cookie?document.cookie.split("; "):[],d=0;d<l.length;d++){var c=l[d].split("="),u=c.slice(1).join("=");this.json||'"'!==u.charAt(0)||(u=u.slice(1,-1));try{var h=r(c[0]);if(u=(p.read||p)(u,h)||r(u),this.json)try{u=JSON.parse(u)}catch(e){}if(o[h]=u,e===h)break}catch(e){}}return e?o[e]:o}}return(m.set=m).get=function(e){return m.call(m,e)},m.getJSON=function(e){return m.call({json:!0},e)},m.remove=function(e,t){m(e,"",f(t,{expires:-1}))},m.defaults={},m.withConverter=e,m}(function(){})}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"undefined"!=typeof module&&module.exports?module.exports=e(require("jquery")):e(jQuery)}(function(l){var a=-1,i=-1,d=function(e){return parseFloat(e)||0},c=function(e){var t=l(e),a=null,i=[];return t.each(function(){var e=l(this),t=e.offset().top-d(e.css("margin-top")),n=0<i.length?i[i.length-1]:null;null===n?i.push(e):Math.floor(Math.abs(a-t))<=1?i[i.length-1]=n.add(e):i.push(e),a=t}),i},u=function(e){var t={byRow:!0,property:"height",target:null,remove:!1};return"object"==(void 0===e?"undefined":_typeof(e))?l.extend(t,e):("boolean"==typeof e?t.byRow=e:"remove"===e&&(t.remove=!0),t)},h=l.fn.matchHeight=function(e){var t=u(e);if(t.remove){var n=this;return this.css(t.property,""),l.each(h._groups,function(e,t){t.elements=t.elements.not(n)}),this}return this.length<=1&&!t.target||(h._groups.push({elements:this,options:t}),h._apply(this,t)),this};h.version="0.7.2",h._groups=[],h._throttle=80,h._maintainScroll=!1,h._beforeUpdate=null,h._afterUpdate=null,h._rows=c,h._parse=d,h._parseOptions=u,h._apply=function(e,t){var s=u(t),n=l(e),a=[n],i=l(window).scrollTop(),o=l("html").outerHeight(!0),r=n.parents().filter(":hidden");return r.each(function(){var e=l(this);e.data("style-cache",e.attr("style"))}),r.css("display","block"),s.byRow&&!s.target&&(n.each(function(){var e=l(this),t=e.css("display");"inline-block"!==t&&"flex"!==t&&"inline-flex"!==t&&(t="block"),e.data("style-cache",e.attr("style")),e.css({display:t,"padding-top":"0","padding-bottom":"0","margin-top":"0","margin-bottom":"0","border-top-width":"0","border-bottom-width":"0",height:"100px",overflow:"hidden"})}),a=c(n),n.each(function(){var e=l(this);e.attr("style",e.data("style-cache")||"")})),l.each(a,function(e,t){var n=l(t),i=0;if(s.target)i=s.target.outerHeight(!1);else{if(s.byRow&&n.length<=1)return void n.css(s.property,"");n.each(function(){var e=l(this),t=e.attr("style"),n=e.css("display");"inline-block"!==n&&"flex"!==n&&"inline-flex"!==n&&(n="block");var a={display:n};a[s.property]="",e.css(a),e.outerHeight(!1)>i&&(i=e.outerHeight(!1)),t?e.attr("style",t):e.css("display","")})}n.each(function(){var e=l(this),t=0;s.target&&e.is(s.target)||("border-box"!==e.css("box-sizing")&&(t+=d(e.css("border-top-width"))+d(e.css("border-bottom-width")),t+=d(e.css("padding-top"))+d(e.css("padding-bottom"))),e.css(s.property,i-t+"px"))})}),r.each(function(){var e=l(this);e.attr("style",e.data("style-cache")||null)}),h._maintainScroll&&l(window).scrollTop(i/o*l("html").outerHeight(!0)),this},h._applyDataApi=function(){var n={};l("[data-match-height], [data-mh]").each(function(){var e=l(this),t=e.attr("data-mh")||e.attr("data-match-height");n[t]=t in n?n[t].add(e):e}),l.each(n,function(){this.matchHeight(!0)})};var s=function(e){h._beforeUpdate&&h._beforeUpdate(e,h._groups),l.each(h._groups,function(){h._apply(this.elements,this.options)}),h._afterUpdate&&h._afterUpdate(e,h._groups)};h._update=function(e,t){if(t&&"resize"===t.type){var n=l(window).width();if(n===a)return;a=n}e?-1===i&&(i=setTimeout(function(){s(t),i=-1},h._throttle)):s(t)},l(h._applyDataApi);var e=l.fn.on?"on":"bind";l(window)[e]("load",function(e){h._update(!1,e)}),l(window)[e]("resize orientationchange",function(e){h._update(!0,e)})}),function(b,e,t,n){function a(e,t){this.element=e,this.settings=b.extend({},s,t),this.settings.units&&"auto"!=this.settings.units||(this.settings.units=-1==["united states","usa","united states of america","us"].indexOf(this.settings.country.toLowerCase())?"metric":"imperial"),this.settings.forecast=Math.min(this.settings.forecast,39),"wunderground"==this.settings.api&&(this.settings.forecast=Math.min(this.settings.forecast,3)),this._name=i,this.once=!1,this.init()}function h(e,t){return t[e.getDay()]}function p(e,t){if(null==e)return!1;var n=(e=new Date(1e3*e)).getHours(),a=e.getMinutes(),i=12<=n?"PM":"AM";return"24"==t&&(i="",n=n<10?"0"+n:n),"12"==t&&(n%=12),(n=n||12)+":"+(a=a<10?"0"+a:a)+" "+i}var i="flatWeatherPlugin",s={location:"Boston, MA",country:"USA",zmw:"02108.1.99999",displayCityNameOnly:!1,api:"openweathermap",forecast:50,apikey:"",view:"full",render:!0,loadingAnimation:!0,strings:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],min:"Min",max:"Max",direction:["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"]},timeformat:"12",lang:"EN",units:"metric"};b.extend(a.prototype,{init:function(){this.settings.render&&(this.settings.loadingAnimation&&!this.once&&(this.loading=b("<div/>",{id:"flatWeatherLoading",class:"wi loading"}),this.loading.appendTo(this.element)),this.fetchWeather().then(this.render,this.error)),this.once=!0},fetchWeather:function(){var a=this,i=new b.Deferred,e={action:"fetch_weather",location:this.settings.location+(null!=this.settings.country&&""!=this.settings.country?","+this.settings.country:""),view:this.settings.view};null!=this.settings.lat&&null!=this.settings.lon&&this.settings.lat&&this.settings.lon&&(e.lat=this.settings.lat,e.lon=this.settings.lon);var t=b.ajax({type:"POST",url:_townhub_add_ons.url,data:e,dataType:"json"});return b.when.call(this,t).done(function(e){if(null!=e.debug&&e.debug&&console.log(e),1==e.success){var t=e.result;if("200"==t.cod){var n=function(e,t){var n={};if("openweathermap"==t.api)if(null!=e.name&&""!=e.name)n.city=e.name,n.location=e.name+", "+e.sys.country,n.today={},n.today.temp={},n.today.temp.now=Math.round(e.main.temp),n.today.temp.min=Math.round(e.main.temp_min),n.today.temp.max=Math.round(e.main.temp_max),n.today.desc=e.weather[0].description.capitalize(),n.today.code=e.weather[0].id,n.today.wind=e.wind,n.today.humidity=e.main.humidity,n.today.pressure=e.main.pressure,n.today.sunrise=p(e.sys.sunrise,t.timeformat),n.today.sunset=p(e.sys.sunset,t.timeformat),n.today.day=h(new Date,t.strings.days),n.forecast=[];else{n.city=e.city.name,n.location=e.city.name+", "+e.city.country,n.today={},n.today.temp={};var a=e.list[0];n.today.temp.now=Math.round(a.main.temp),n.today.temp.min=Math.round(a.main.temp_min),n.today.temp.max=Math.round(a.main.temp_max),n.today.desc=a.weather[0].description.capitalize(),n.today.code=a.weather[0].id,n.today.wind=a.wind,n.today.humidity=a.main.humidity,n.today.pressure=a.main.pressure,n.today.sunrise=p(null,t.timeformat),n.today.sunset=p(null,t.timeformat),n.today.day=h(new Date,t.strings.days),n.forecast=[];var i=[];for(c=0;c<e.list.length;c++)if(null!=e.list[c].dt&&Array.isArray(e.list)){var s=new Date(1e3*e.list[c].dt);null==i[s.getDate()]?(i[s.getDate()]={},i[s.getDate()].day=h(s,t.strings.days),i[s.getDate()].main=[e.list[c].weather[0].main],i[s.getDate()].code=[e.list[c].weather[0].id],i[s.getDate()].icon=[e.list[c].weather[0].icon],i[s.getDate()].desc=[e.list[c].weather[0].desc],i[s.getDate()].min=[Math.round(e.list[c].main.temp_min)],i[s.getDate()].max=[Math.round(e.list[c].main.temp_max)]):(i[s.getDate()].main.push(e.list[c].weather[0].main),i[s.getDate()].code.push(e.list[c].weather[0].id),i[s.getDate()].icon.push(e.list[c].weather[0].icon),i[s.getDate()].desc.push(e.list[c].weather[0].desc),i[s.getDate()].min.push(Math.round(e.list[c].main.temp_min)),i[s.getDate()].max.push(Math.round(e.list[c].main.temp_max)))}i.length&&i.forEach(function(e,t){(u={}).day=e.day,u.main=e.main[0],u.code=e.code[0],u.icon=e.icon[0],u.desc=e.desc[0],u.temp={max:Math.max.apply(null,e.max),min:Math.min.apply(null,e.min)},n.forecast.push(u)})}else if("yahoo"==t.api)for(o={0:"900",1:"901",2:"902",3:"212",4:"200",5:"616",6:"612",7:"611",8:"511",9:"301",10:"511",11:"521",12:"521",13:"600",14:"615",15:"601",16:"601",17:"906",18:"611",19:"761",20:"741",21:"721",22:"711",23:"956",24:"954",25:"903",26:"802",27:"802",28:"802",29:"802",30:"802",31:"800",32:"800",33:"951",34:"951",35:"906",36:"904",37:"210",38:"210",39:"210",40:"521",41:"602",42:"621",43:"602",44:"802",45:"201",46:"621",47:"210",3200:"951"},e=e.query.results.channel,n.location=e.location.city+", "+e.location.country,n.city=e.location.city,n.today={},n.today.temp={},n.today.temp.now=Math.round(e.item.condition.temp),n.today.temp.min=Math.round(e.item.forecast[0].low),n.today.temp.max=Math.round(e.item.forecast[0].high),n.today.desc=e.item.condition.text.capitalize(),n.today.code=o[e.item.condition.code],n.today.wind={},n.today.wind.speed=e.wind.speed,n.today.wind.deg=e.wind.direction,n.today.humidity=e.atmosphere.humidity,n.today.pressure=e.atmosphere.pressure,"12"==t.timeformat?(n.today.sunrise=e.astronomy.sunrise.toUpperCase(),n.today.sunset=e.astronomy.sunset.toUpperCase()):(n.today.sunrise=0+e.astronomy.sunrise.match(/\d+/)[0]+e.astronomy.sunrise.match(/:\d+/)[0],n.today.sunset=parseInt(e.astronomy.sunset.match(/\d+/)[0])+12+e.astronomy.sunset.match(/:\d+/)[0]),n.today.day=h(new Date,t.strings.days),n.forecast=[],c=0;c<t.forecast;c++)(u={}).day=h(new Date(e.item.forecast[c].date),t.strings.days),u.code=o[e.item.forecast[c].code],u.desc=e.item.forecast[c].text.capitalize(),u.temp={max:Math.round(e.item.forecast[c].high),min:Math.round(e.item.forecast[c].low)},n.forecast.push(u);else if("wunderground"==t.api){var o={chanceflurries:"600",chancerain:"500",chancesleet:"611",chancesnow:"600",chancetstorms:"200",clear:"800",cloudy:"802",flurries:"600",fog:"741",hazy:"721",mostlycloudy:"802",mostlysunny:"802",partlycloudy:"802",partlysunny:"802",sleet:"611",rain:"501",snow:"601",sunny:"800",tstorms:"211",unknown:"951"};n.location=e.current_observation.display_location.full,n.city=e.current_observation.display_location.city,n.today={},n.today.temp={},"metric"==t.units?(n.today.temp.now=Math.round(e.current_observation.temp_c),n.today.temp.min=Math.round(e.forecast.simpleforecast.forecastday[0].low.celsius),n.today.temp.max=Math.round(e.forecast.simpleforecast.forecastday[0].high.celsius)):(n.today.temp.now=Math.round(e.current_observation.temp_f),n.today.temp.min=Math.round(e.forecast.simpleforecast.forecastday[0].low.fahrenheit),n.today.temp.max=Math.round(e.forecast.simpleforecast.forecastday[0].high.fahrenheit)),n.today.desc=e.current_observation.weather,n.today.code=o[e.current_observation.icon],n.today.wind={},"metric"==t.units?n.today.wind.speed=e.current_observation.wind_kph:n.today.wind.speed=e.current_observation.wind_mph,n.today.wind.deg=e.current_observation.wind_degrees,n.today.humidity=e.current_observation.relative_humidity,"metric"==t.units?n.today.pressure=e.current_observation.pressure_mb:n.today.pressure=e.current_observation.pressure_in;var r=e.sun_phase.sunrise.minute,l=e.sun_phase.sunset.minute;if("12"==t.timeformat){n.today.sunrise=e.sun_phase.sunrise.hour+":"+r+" AM";var d=e.sun_phase.sunset.hour%12;d=d||12,n.today.sunset=d+":"+l+" PM"}else n.today.sunrise=e.sun_phase.sunrise.hour+":"+r,n.today.sunset=e.sun_phase.sunset.hour+":"+l;n.today.day=h(new Date,t.strings.days),n.forecast=[];for(var c=0;c<t.forecast+1;c++){var u={};u.day=h(new Date(1e3*e.forecast.simpleforecast.forecastday[c].date.epoch),t.strings.days),u.code=o[e.forecast.simpleforecast.forecastday[c].icon],u.desc=e.forecast.simpleforecast.forecastday[c].conditions,"metric"==t.units?u.temp={max:Math.round(e.forecast.simpleforecast.forecastday[c].high.celsius),min:Math.round(e.forecast.simpleforecast.forecastday[c].low.celsius)}:u.temp={max:Math.round(e.forecast.simpleforecast.forecastday[c].high.fahrenheit),min:Math.round(e.forecast.simpleforecast.forecastday[c].low.fahrenheit)},n.forecast.push(u)}}return n}(t,a.settings);a._weather=n,b.data(a.element,"weather",n),i.resolve(n,a)}else i.reject(t,a)}else i.reject(e,a)}).fail(function(e){i.reject(e,a)}),i},error:function(e,t){t||(t=this),t.settings.loadingAnimation&&t.settings.render&&t.loading.remove(),"openweathermap"==t.settings.api?e=null!=e.error?e.error:"Weather request error. Please make sure that your api is entered.":"yahoo"==t.settings.api?e=e.query.results?"Error: "+e.query.results.channel.item.title+". See console log for details.":"Error: no results. See console log for details.":"wunderground"==t.settings.api&&(e=e.response.error.type+" See console log for details.");var n=b("<div/>",{class:"flatWeatherPlugin "+t.settings.view});return b("<h2/>").text("Error").appendTo(n),b("<p/>").text(e).appendTo(n),b(t.element).html(n),b(t.element)},render:function(e,t){t||(e=(t=this)._weather);var n="metric"==t.settings.units?"&#176;C":"&#176;F";t.settings.loadingAnimation&&t.settings.render&&t.loading.remove();var a,i,s,o,r,l=b("<div/>",{class:"flatWeatherPlugin "+t.settings.view});if(t.settings.displayCityNameOnly?b("<h2/>").text(e.city).appendTo(l):b("<h2/>").text(e.location).appendTo(l),"forecast"!=t.settings.view){var d=b("<div/>",{class:"wiToday"}),c=b("<div/>",{class:"wiIconGroup"});b("<div/>",{class:"wi wi"+e.today.code}).appendTo(c),b("<p/>",{class:"wiText"}).text(e.today.desc).appendTo(c),c.appendTo(d),b("<p/>",{class:"wiTemperature"}).html(e.today.temp.now+"<sup>"+n+"</sup>").prependTo(d),d.appendTo(l)}if("simple"!=t.settings.view){var u=b("<div/>",{class:"wiDetail"});if("partial"==t.settings.view&&b("<p/>",{class:"wiDay"}).text(e.today.day).appendTo(d),"partial"!=t.settings.view){"today"!=t.settings.view&&b("<p/>",{class:"wiDay"}).text(e.today.day).appendTo(u);var h=b("<ul/>",{class:"astronomy"}).appendTo(u);e.today.sunrise&&b("<li/>",{class:"wi sunrise"}).text(e.today.sunrise).appendTo(h),e.today.sunset&&b("<li/>",{class:"wi sunset"}).text(e.today.sunset).appendTo(h);var p=b("<ul/>",{class:"temp"}).appendTo(u);b("<li/>").html(t.settings.strings.max+": "+e.today.temp.max+"<sup>"+n+"</sup>").appendTo(p),b("<li/>").html(t.settings.strings.min+": "+e.today.temp.min+"<sup>"+n+"</sup>").appendTo(p);var m=b("<ul/>",{class:"atmosphere"}).appendTo(u);b("<li/>",{class:"wi humidity"}).text(e.today.humidity).appendTo(m),b("<li/>",{class:"wi pressure"}).text(e.today.pressure).appendTo(m),b("<li/>",{class:"wi wind"}).text((a=e.today.wind.speed,i=e.today.wind.deg,s=t.settings.units,o=t.settings.strings.direction,r=i,0<=r&&r<=11.25||348.75<r&&r<=360?r=o[0]:11.25<r&&r<=33.75?r=o[1]:33.75<r&&r<=56.25?r=o[2]:56.25<r&&r<=78.75?r=o[3]:78.75<r&&r<=101.25?r=o[4]:101.25<r&&r<=123.75?r=o[5]:123.75<r&&r<=146.25?r=o[6]:146.25<r&&r<=168.75?r=o[7]:168.75<r&&r<=191.25?r=o[8]:191.25<r&&r<=213.75?r=o[9]:213.75<r&&r<=236.25?r=o[10]:236.25<r&&r<=258.75?r=o[11]:258.75<r&&r<=281.25?r=o[12]:281.25<r&&r<=303.75?r=o[13]:303.75<r&&r<=326.25?r=o[14]:326.25<r&&r<=348.75&&(r=o[15]),r||(r=""),r+" "+a+" "+("metric"==s?"km/h":"mph"))).appendTo(m),u.appendTo(d)}if("today"!=t.settings.view||"forecast"==t.settings.view){for(var f=b("<ul/>",{class:"wiForecasts"}),g="forecast"==t.settings.view?0:1;g<e.forecast.length;g++){var v=b("<li/>",{class:"wiDay"}).html("<span>"+e.forecast[g].day+"</span>").appendTo(f),w=b("<ul/>",{class:"wiForecast"}).appendTo(v);b("<li/>",{class:"wi wi"+e.forecast[g].code}).appendTo(w),b("<li/>",{class:"wiMax"}).html(e.forecast[g].temp.max+"<sup>"+n+"</sup>").appendTo(w),b("<li/>",{class:"wiMin"}).html(e.forecast[g].temp.min+"<sup>"+n+"</sup>").appendTo(w)}f.appendTo(l)}}return b(t.element).html(l),b(t.element)}}),b.fn[i]=function(t,e){return b.isFunction(a.prototype[t])?this.data("plugin_"+i)[t](e):this.each(function(){if(!b.data(this,"plugin_"+i)){var e=new a(this,t);return b.data(this,"plugin_"+i,e)}})},String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)}}(jQuery,window,document),function(e,t,n){void 0===t.CTH_FILTERS&&(t.CTH_FILTERS={},t.CTH_ACTIONS={},t._cth_add=function(e,t,n,a){var i="filter"==e?CTH_FILTERS:CTH_ACTIONS;a=a||10,t in i||(i[t]=[]),a in i[t]||(i[t][a]=[]),i[t][a].push({func:n,pri:a})},t.cth_add_filter=function(e,t,n){_cth_add("filter",e,t,n)},t.cth_add_action=function(e,t,n){_cth_add("action",e,t,n)},t._cth_do=function(e,t){var n,a="action"==e?CTH_ACTIONS:CTH_FILTERS,i=t[0];if(!(i in a))return t[1];for(var s in[].shift.apply(t),a[i])if(void 0!==(n=a[i][s]))for(var o in n){var r=n[o].func;"function"==typeof r&&("filter"===e?t[0]=r.apply(null,t):r.apply(null,t))}return"filter"===e?t[0]:void 0},t.cth_apply_filters=function(e,t,n){return _cth_do("filter",arguments)},t.cth_do_action=function(e,t){_cth_do("action",arguments)})}(jQuery,window,document),"function"==typeof window.cth_do_add_hooks&&window.cth_do_add_hooks(),function(n){"function"==typeof define&&define.amd?define(["jquery"],n):"object"==("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=function(e,t){return void 0===t&&(t="undefined"!=typeof window?require("jquery"):require("jquery")(e)),n(t),t}:n(jQuery)}(function(j){function a(e,t,n){var a,i,s;"string"==typeof n&&(n={className:n}),this.options=(a=f,i=j.isPlainObject(n)?n:{},(s=function(){}).prototype=a,j.extend(!0,new s,i)),this.loadHTML(),this.wrapper=j(c.html),this.options.clickToHide&&this.wrapper.addClass(l+"-hidable"),this.wrapper.data(l,this),this.arrow=this.wrapper.find("."+l+"-arrow"),this.container=this.wrapper.find("."+l+"-container"),this.container.append(this.userContainer),e&&e.length&&(this.elementType=e.attr("type"),this.originalElement=e,this.elem=w(e),this.elem.data(l,this),this.elem.before(this.wrapper)),this.container.hide(),this.run(t)}var S=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},o="notify",l=o+"js",r=o+"!blank",T={t:"top",m:"middle",b:"bottom",l:"left",c:"center",r:"right"},E=["l","c","r"],I=["t","m","b"],M=["t","b","l","r"],O={t:"b",m:null,b:"t",l:"r",c:null,r:"l"},d={},c={name:"core",html:'<div class="'+l+'-wrapper">\n    <div class="'+l+'-arrow"></div>\n   <div class="'+l+'-container"></div>\n</div>',css:"."+l+"-corner {\n position: fixed;\n  margin: 5px;\n  z-index: 1050;\n}\n\n."+l+"-corner ."+l+"-wrapper,\n."+l+"-corner ."+l+"-container {\n  position: relative;\n   display: block;\n   height: inherit;\n  width: inherit;\n   margin: 3px;\n}\n\n."+l+"-wrapper {\n   z-index: 1;\n   position: absolute;\n   display: inline-block;\n    height: 0;\n    width: 0;\n}\n\n."+l+"-container {\n    display: none;\n    z-index: 1;\n   position: absolute;\n}\n\n."+l+"-hidable {\n    cursor: pointer;\n}\n\n[data-notify-text],[data-notify-html] {\n    position: relative;\n}\n\n."+l+"-arrow {\n  position: absolute;\n   z-index: 2;\n   width: 0;\n height: 0;\n}"},u={"border-radius":["-webkit-","-moz-"]},e=function(e,n){if(!e)throw"Missing Style name";if(!n)throw"Missing Style definition";if(!n.html)throw"Missing Style HTML";var t=d[e];t&&t.cssElem&&(window.console&&console.warn(o+": overwriting style '"+e+"'"),d[e].cssElem.remove()),n.name=e,d[e]=n;var i="";n.classes&&j.each(n.classes,function(e,t){return i+="."+l+"-"+n.name+"-"+e+" {\n",j.each(t,function(n,a){return u[n]&&j.each(u[n],function(e,t){return i+=" "+t+n+": "+a+";\n"}),i+="   "+n+": "+a+";\n"}),i+="}\n"}),n.css&&(i+="/* styles for "+n.name+" */\n"+n.css),i&&(n.cssElem=h(i),n.cssElem.attr("id","notify-"+n.name));var a={},s=j(n.html);p("html",s,a),p("text",s,a),n.fields=a},h=function(t){var n;(n=g("style")).attr("type","text/css"),j("head").append(n);try{n.html(t)}catch(e){n[0].styleSheet.cssText=t}return n},p=function(t,e,n){var a;return"html"!==t&&(t="text"),m(e,"["+(a="data-notify-"+t)+"]").each(function(){var e;(e=j(this).attr(a))||(e=r),n[e]=t})},m=function(e,t){return e.is(t)?e:e.find(t)},f={clickToHide:!0,autoHide:!0,autoHideDelay:5e3,arrowShow:!0,arrowSize:5,breakNewLines:!0,elementPosition:"bottom",globalPosition:"top right",style:"bootstrap",className:"error",showAnimation:"slideDown",showDuration:400,hideAnimation:"slideUp",hideDuration:200,gap:5},g=function(e){return j("<"+e+"></"+e+">")},v={},w=function(n){return n.is("[type=radio]")&&(n=n.parents("form:first").find("[type=radio]").filter(function(e,t){return j(t).attr("name")===n.attr("name")}).first()),n},P=function(e,t,n){var a;if("string"==typeof n)n=parseInt(n,10);else if("number"!=typeof n)return;if(!isNaN(n))return a=T[O[t.charAt(0)]],t,void 0!==e[a]&&(t=T[a.charAt(0)],n=-n),void 0===e[t]?e[t]=n:e[t]+=n,null},N=function(e,t,n){if("l"===e||"t"===e)return 0;if("c"===e||"m"===e)return n/2-t/2;if("r"===e||"b"===e)return n-t;throw"Invalid alignment"},b=function e(t){return(e.e=e.e||g("div")).text(t).html()};a.prototype.loadHTML=function(){var e;e=this.getStyle(),this.userContainer=j(e.html),this.userFields=e.fields},a.prototype.show=function(e,t){var n,a,i,s,o,r;if(a=function(){if(!e&&!r.elem&&r.destroy(),t)return t()},o=0<(r=this).container.parent().parents(":hidden").length,i=this.container.add(this.arrow),n=[],o&&e)s="show";else if(o&&!e)s="hide";else if(!o&&e)s=this.options.showAnimation,n.push(this.options.showDuration);else{if(o||e)return a();s=this.options.hideAnimation,n.push(this.options.hideDuration)}return n.push(a),i[s].apply(i,n)},a.prototype.setGlobalPosition=function(){var e=this.getPosition(),t=e[0],n=e[1],a=T[t],i=T[n],s=t+"|"+n,o=v[s];if(!o||!document.body.contains(o[0])){o=v[s]=g("div");var r={};r[a]=0,"middle"===i?r.top="45%":"center"===i?r.left="45%":r[i]=0,o.css(r).addClass(l+"-corner"),j("body").append(o)}return o.prepend(this.wrapper)},a.prototype.setElementPosition=function(){var e,t,n,a,i,s,o,r,l,d,c,u,h,p,m,f,g,v,w,b,y,_,k,x,C,$,A,D;for(k=($=this.getPosition())[0],_=$[1],$[2],c=this.elem.position(),r=this.elem.outerHeight(),u=this.elem.outerWidth(),l=this.elem.innerHeight(),d=this.elem.innerWidth(),D=this.wrapper.position(),i=this.container.height(),s=this.container.width(),v=T[k],(o={})[y=T[b=O[k]]]="b"===k?r:"r"===k?u:0,P(o,"top",c.top-D.top),P(o,"left",c.left-D.left),p=0,f=(A=["top","left"]).length;p<f;p++)x=A[p],(w=parseInt(this.elem.css("margin-"+x),10))&&P(o,x,w);if(h=Math.max(0,this.options.gap-(this.options.arrowShow?n:0)),P(o,y,h),this.options.arrowShow){for(n=this.options.arrowSize,t=j.extend({},o),e=this.userContainer.css("border-color")||this.userContainer.css("border-top-color")||this.userContainer.css("background-color")||"white",m=0,g=M.length;m<g;m++)C=T[x=M[m]],x!==b&&(a=C===v?e:"transparent",t["border-"+C]=n+"px solid "+a);P(o,T[b],n),0<=S.call(M,_)&&P(t,T[_],2*n)}else this.arrow.hide();if(0<=S.call(I,k)?(P(o,"left",N(_,s,u)),t&&P(t,"left",N(_,n,d))):0<=S.call(E,k)&&(P(o,"top",N(_,i,r)),t&&P(t,"top",N(_,n,l))),this.container.is(":visible")&&(o.display="block"),this.container.removeAttr("style").css(o),t)return this.arrow.removeAttr("style").css(t)},a.prototype.getPosition=function(){var e,t,n,a,i,s,o,r,l,d;if(r=this.options.position||(this.elem?this.options.elementPosition:this.options.globalPosition),l=r,d=[],j.each(l.split(/\W+/),function(e,t){var n;if(n=t.toLowerCase().charAt(0),T[n])return d.push(n)}),0===(e=d).length&&(e[0]="b"),t=e[0],S.call(M,t)<0)throw"Must be one of ["+M+"]";return(1===e.length||(n=e[0],0<=S.call(I,n)&&(a=e[1],S.call(E,a)<0))||(i=e[0],0<=S.call(E,i)&&(s=e[1],S.call(I,s)<0)))&&(e[1]=(o=e[0],0<=S.call(E,o)?"m":"l")),2===e.length&&(e[2]=e[1]),e},a.prototype.getStyle=function(e){var t;if(e||(e=this.options.style),e||(e="default"),!(t=d[e]))throw"Missing style: "+e;return t},a.prototype.updateClasses=function(){var e,t;return e=["base"],j.isArray(this.options.className)?e=e.concat(this.options.className):this.options.className&&e.push(this.options.className),t=this.getStyle(),e=j.map(e,function(e){return l+"-"+t.name+"-"+e}).join(" "),this.userContainer.attr("class",e)},a.prototype.run=function(e,t){var n,a,i,s,o;if(j.isPlainObject(t)?j.extend(this.options,t):"string"===j.type(t)&&(this.options.className=t),!this.container||e){if(this.container||e){for(i in a={},j.isPlainObject(e)?a=e:a[r]=e,a)n=a[i],(s=this.userFields[i])&&("text"===s&&(n=b(n),this.options.breakNewLines&&(n=n.replace(/\n/g,"<br/>"))),o=i===r?"":"="+i,m(this.userContainer,"[data-notify-"+s+o+"]").html(n));this.updateClasses(),this.elem?this.setElementPosition():this.setGlobalPosition(),this.show(!0),this.options.autoHide&&(clearTimeout(this.autohideTimer),this.autohideTimer=setTimeout(this.show.bind(this,!1),this.options.autoHideDelay))}}else this.show(!1)},a.prototype.destroy=function(){this.wrapper.data(l,null),this.wrapper.remove()},j[o]=function(e,t,n){return e&&e.nodeName||e.jquery?j(e)[o](t,n):(n=t,new a(null,t=e,n)),e},j.fn[o]=function(t,n){return j(this).each(function(){var e=w(j(this)).data(l);e&&e.destroy();new a(j(this),t,n)}),this},j.extend(j[o],{defaults:function(e){return j.extend(f,e)},addStyle:e,removeStyle:function(e){if(!e)throw"Missing Style name";d[e]&&delete d[e]},pluginOptions:f,getStyle:function(e){return d[e]},insertCSS:h}),e("bootstrap",{html:"<div>\n<span data-notify-text></span>\n</div>",classes:{base:{"font-weight":"bold",padding:"8px 15px 8px 14px","text-shadow":"0 1px 0 rgba(255, 255, 255, 0.5)","background-color":"#fcf8e3",border:"1px solid #fbeed5","border-radius":"4px","white-space":"nowrap","padding-left":"25px","background-repeat":"no-repeat","background-position":"3px 7px"},error:{color:"#B94A48","background-color":"#F2DEDE","border-color":"#EED3D7","background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAtRJREFUeNqkVc1u00AQHq+dOD+0poIQfkIjalW0SEGqRMuRnHos3DjwAH0ArlyQeANOOSMeAA5VjyBxKBQhgSpVUKKQNGloFdw4cWw2jtfMOna6JOUArDTazXi/b3dm55socPqQhFka++aHBsI8GsopRJERNFlY88FCEk9Yiwf8RhgRyaHFQpPHCDmZG5oX2ui2yilkcTT1AcDsbYC1NMAyOi7zTX2Agx7A9luAl88BauiiQ/cJaZQfIpAlngDcvZZMrl8vFPK5+XktrWlx3/ehZ5r9+t6e+WVnp1pxnNIjgBe4/6dAysQc8dsmHwPcW9C0h3fW1hans1ltwJhy0GxK7XZbUlMp5Ww2eyan6+ft/f2FAqXGK4CvQk5HueFz7D6GOZtIrK+srupdx1GRBBqNBtzc2AiMr7nPplRdKhb1q6q6zjFhrklEFOUutoQ50xcX86ZlqaZpQrfbBdu2R6/G19zX6XSgh6RX5ubyHCM8nqSID6ICrGiZjGYYxojEsiw4PDwMSL5VKsC8Yf4VRYFzMzMaxwjlJSlCyAQ9l0CW44PBADzXhe7xMdi9HtTrdYjFYkDQL0cn4Xdq2/EAE+InCnvADTf2eah4Sx9vExQjkqXT6aAERICMewd/UAp/IeYANM2joxt+q5VI+ieq2i0Wg3l6DNzHwTERPgo1ko7XBXj3vdlsT2F+UuhIhYkp7u7CarkcrFOCtR3H5JiwbAIeImjT/YQKKBtGjRFCU5IUgFRe7fF4cCNVIPMYo3VKqxwjyNAXNepuopyqnld602qVsfRpEkkz+GFL1wPj6ySXBpJtWVa5xlhpcyhBNwpZHmtX8AGgfIExo0ZpzkWVTBGiXCSEaHh62/PoR0p/vHaczxXGnj4bSo+G78lELU80h1uogBwWLf5YlsPmgDEd4M236xjm+8nm4IuE/9u+/PH2JXZfbwz4zw1WbO+SQPpXfwG/BBgAhCNZiSb/pOQAAAAASUVORK5CYII=)"},success:{color:"#468847","background-color":"#DFF0D8","border-color":"#D6E9C6","background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAutJREFUeNq0lctPE0Ecx38zu/RFS1EryqtgJFA08YCiMZIAQQ4eRG8eDGdPJiYeTIwHTfwPiAcvXIwXLwoXPaDxkWgQ6islKlJLSQWLUraPLTv7Gme32zoF9KSTfLO7v53vZ3d/M7/fIth+IO6INt2jjoA7bjHCJoAlzCRw59YwHYjBnfMPqAKWQYKjGkfCJqAF0xwZjipQtA3MxeSG87VhOOYegVrUCy7UZM9S6TLIdAamySTclZdYhFhRHloGYg7mgZv1Zzztvgud7V1tbQ2twYA34LJmF4p5dXF1KTufnE+SxeJtuCZNsLDCQU0+RyKTF27Unw101l8e6hns3u0PBalORVVVkcaEKBJDgV3+cGM4tKKmI+ohlIGnygKX00rSBfszz/n2uXv81wd6+rt1orsZCHRdr1Imk2F2Kob3hutSxW8thsd8AXNaln9D7CTfA6O+0UgkMuwVvEFFUbbAcrkcTA8+AtOk8E6KiQiDmMFSDqZItAzEVQviRkdDdaFgPp8HSZKAEAL5Qh7Sq2lIJBJwv2scUqkUnKoZgNhcDKhKg5aH+1IkcouCAdFGAQsuWZYhOjwFHQ96oagWgRoUov1T9kRBEODAwxM2QtEUl+Wp+Ln9VRo6BcMw4ErHRYjH4/B26AlQoQQTRdHWwcd9AH57+UAXddvDD37DmrBBV34WfqiXPl61g+vr6xA9zsGeM9gOdsNXkgpEtTwVvwOklXLKm6+/p5ezwk4B+j6droBs2CsGa/gNs6RIxazl4Tc25mpTgw/apPR1LYlNRFAzgsOxkyXYLIM1V8NMwyAkJSctD1eGVKiq5wWjSPdjmeTkiKvVW4f2YPHWl3GAVq6ymcyCTgovM3FzyRiDe2TaKcEKsLpJvNHjZgPNqEtyi6mZIm4SRFyLMUsONSSdkPeFtY1n0mczoY3BHTLhwPRy9/lzcziCw9ACI+yql0VLzcGAZbYSM5CCSZg1/9oc/nn7+i8N9p/8An4JMADxhH+xHfuiKwAAAABJRU5ErkJggg==)"},info:{color:"#3A87AD","background-color":"#D9EDF7","border-color":"#BCE8F1","background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3QYFAhkSsdes/QAAA8dJREFUOMvVlGtMW2UYx//POaWHXg6lLaW0ypAtw1UCgbniNOLcVOLmAjHZolOYlxmTGXVZdAnRfXQm+7SoU4mXaOaiZsEpC9FkiQs6Z6bdCnNYruM6KNBw6YWewzl9z+sHImEWv+vz7XmT95f/+3/+7wP814v+efDOV3/SoX3lHAA+6ODeUFfMfjOWMADgdk+eEKz0pF7aQdMAcOKLLjrcVMVX3xdWN29/GhYP7SvnP0cWfS8caSkfHZsPE9Fgnt02JNutQ0QYHB2dDz9/pKX8QjjuO9xUxd/66HdxTeCHZ3rojQObGQBcuNjfplkD3b19Y/6MrimSaKgSMmpGU5WevmE/swa6Oy73tQHA0Rdr2Mmv/6A1n9w9suQ7097Z9lM4FlTgTDrzZTu4StXVfpiI48rVcUDM5cmEksrFnHxfpTtU/3BFQzCQF/2bYVoNbH7zmItbSoMj40JSzmMyX5qDvriA7QdrIIpA+3cdsMpu0nXI8cV0MtKXCPZev+gCEM1S2NHPvWfP/hL+7FSr3+0p5RBEyhEN5JCKYr8XnASMT0xBNyzQGQeI8fjsGD39RMPk7se2bd5ZtTyoFYXftF6y37gx7NeUtJJOTFlAHDZLDuILU3j3+H5oOrD3yWbIztugaAzgnBKJuBLpGfQrS8wO4FZgV+c1IxaLgWVU0tMLEETCos4xMzEIv9cJXQcyagIwigDGwJgOAtHAwAhisQUjy0ORGERiELgG4iakkzo4MYAxcM5hAMi1WWG1yYCJIcMUaBkVRLdGeSU2995TLWzcUAzONJ7J6FBVBYIggMzmFbvdBV44Corg8vjhzC+EJEl8U1kJtgYrhCzgc/vvTwXKSib1paRFVRVORDAJAsw5FuTaJEhWM2SHB3mOAlhkNxwuLzeJsGwqWzf5TFNdKgtY5qHp6ZFf67Y/sAVadCaVY5YACDDb3Oi4NIjLnWMw2QthCBIsVhsUTU9tvXsjeq9+X1d75/KEs4LNOfcdf/+HthMnvwxOD0wmHaXr7ZItn2wuH2SnBzbZAbPJwpPx+VQuzcm7dgRCB57a1uBzUDRL4bfnI0RE0eaXd9W89mpjqHZnUI5Hh2l2dkZZUhOqpi2qSmpOmZ64Tuu9qlz/SEXo6MEHa3wOip46F1n7633eekV8ds8Wxjn37Wl63VVa+ej5oeEZ/82ZBETJjpJ1Rbij2D3Z/1trXUvLsblCK0XfOx0SX2kMsn9dX+d+7Kf6h8o4AIykuffjT8L20LU+w4AZd5VvEPY+XpWqLV327HR7DzXuDnD8r+ovkBehJ8i+y8YAAAAASUVORK5CYII=)"},warn:{color:"#C09853","background-color":"#FCF8E3","border-color":"#FBEED5","background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAABJlBMVEXr6eb/2oD/wi7/xjr/0mP/ykf/tQD/vBj/3o7/uQ//vyL/twebhgD/4pzX1K3z8e349vK6tHCilCWbiQymn0jGworr6dXQza3HxcKkn1vWvV/5uRfk4dXZ1bD18+/52YebiAmyr5S9mhCzrWq5t6ufjRH54aLs0oS+qD751XqPhAybhwXsujG3sm+Zk0PTwG6Shg+PhhObhwOPgQL4zV2nlyrf27uLfgCPhRHu7OmLgAafkyiWkD3l49ibiAfTs0C+lgCniwD4sgDJxqOilzDWowWFfAH08uebig6qpFHBvH/aw26FfQTQzsvy8OyEfz20r3jAvaKbhgG9q0nc2LbZxXanoUu/u5WSggCtp1anpJKdmFz/zlX/1nGJiYmuq5Dx7+sAAADoPUZSAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfdBgUBGhh4aah5AAAAlklEQVQY02NgoBIIE8EUcwn1FkIXM1Tj5dDUQhPU502Mi7XXQxGz5uVIjGOJUUUW81HnYEyMi2HVcUOICQZzMMYmxrEyMylJwgUt5BljWRLjmJm4pI1hYp5SQLGYxDgmLnZOVxuooClIDKgXKMbN5ggV1ACLJcaBxNgcoiGCBiZwdWxOETBDrTyEFey0jYJ4eHjMGWgEAIpRFRCUt08qAAAAAElFTkSuQmCC)"}}}),j(function(){h(c.css).attr("id","core-notify"),j(document).on("click","."+l+"-hidable",function(e){j(this).trigger("notify-hide")}),j(document).on("notify-hide","."+l+"-wrapper",function(e){var t=j(this).data(l);t&&t.show(!1)})})});var cthCaptchaCallback=function(){document.getElementById("loginCaptcha")&&(loginCaptcha=grecaptcha.render("loginCaptcha",{sitekey:_townhub_add_ons.gcaptcha_key})),document.getElementById("regCaptcha")&&(regCaptcha=grecaptcha.render("regCaptcha",{sitekey:_townhub_add_ons.gcaptcha_key})),document.getElementById("submitCaptcha")&&(submitCaptcha=grecaptcha.render("submitCaptcha",{sitekey:_townhub_add_ons.gcaptcha_key}))};!function(n){n.notify.defaults({autoHideDelay:1e4,globalPosition:"bottom right",className:"cth-success"}),window.cthMobileDetect=function(){var e={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return e.Android()||e.BlackBerry()||e.iOS()||e.Opera()||e.Windows()}};return null==e.any()?(n("body").removeClass("cth-mobile"),!1):(n("body").addClass("cth-mobile"),!0)},n(function(){cthMobileDetect(),n(window).on("resize",function(){cthMobileDetect()}),n(".cth-scroll-link").on("click",function(){var e=10+n(".main-header").height();if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")||location.hostname==this.hostname){var t=n(this.hash);if((t=t.length?t:n("[name="+this.hash.slice(1)+"]")).length)return n("html,body").animate({scrollTop:t.offset().top-e},{queue:!1,duration:1200,easing:"easeInOutExpo"}),!1}})})}(jQuery),function(t){"use strict";var e={setCurrentTime:!1,meridians:!0,format:"h:mm a",primaryColor:"#4DB7FE",borderColor:"#4DB7FE",minutesInterval:"15"};_townhub_add_ons.lb_24h&&(e.meridians=!1,e.format="HH:mm"),""!=_townhub_add_ons.td_color&&(e.primaryColor=e.borderColor=_townhub_add_ons.td_color),t("input.timepicker").each(function(){t(this).timeDropper(e)}),t(".eye").on("click touchstart",function(){var e=t(this).parent(".pass-input-wrap").find("input");"password"===e.attr("type")?e.attr("type","text"):e.attr("type","password")}),t(function(){t(document).on("click",".remove-date-time",function(e){e.preventDefault(),t(this).parent().children("input").val("").trigger("change")})})}(jQuery),function(o){"use strict";o(document).ready(function(){o(".townhub-tweet").each(function(){var e=o(this),t=e.data("username"),n=e.data("list"),a=e.data("hashtag"),i=e.data("ticker"),s=e.data("count");e.twittie({username:t,list:n,hashtag:a,dateFormat:"%b %d, %Y",template:'<p class="tweet">{{tweet}}</p><p class="timePosted"><a href="{{url}}">'+_townhub_add_ons.posted_on+'{{date}}</a></p><p class="interact"><a href="https://twitter.com/intent/tweet?in_reply_to={{id_str}}" class="twitter_reply_icon" target="_blank">'+_townhub_add_ons.reply+'</a><a href="https://twitter.com/intent/retweet?tweet_id={{id_str}}" class="twitter_retweet_icon" target="_blank">'+_townhub_add_ons.retweet+'</a><a href="https://twitter.com/intent/favorite?tweet_id={{id_str}}" class="twitter_fav_icon" target="_blank">'+_townhub_add_ons.favorite+"</a></p>",count:s,loadingText:"Loading!",apiPath:_townhub_add_ons.url,action:"townhub_get_tweets",hideReplies:!1},function(){"yes"==i&&o("ul",e).list_ticker({speed:5e3,effect:"fade"})})}),o(".townhub_mailchimp-form").each(function(){var n=o(this);n.submit(function(e){e.preventDefault(),n.find(".subscribe-message").fadeIn("slow").text(_townhub_add_ons.pl_w);var t=n.serialize();t+="&action=townhub_mailchimp";o.ajax({type:"POST",data:t,url:_townhub_add_ons.url,success:function(e){if(null!=e.debug&&1==e.debug&&console.log(e),e.success)if("yes"===e.success)n.find(".subscribe-message").fadeIn("slow").text(e.message);else if(n.find(".subscribe-message").fadeIn("slow").text(e.message),null!=e.last_response&&null!=e.last_response.body){var t=JSON.parse(e.last_response.body);n.find(".subscribe-message").fadeIn("slow").text(t.title)}else null!=e.last_response&&n.find(".subscribe-message").fadeIn("slow").text(e.last_response)}})})})})}(jQuery),function(e){var t,n,a;t=function(){function a(e,t){var n,a;if(this.options={target:"instafeed",get:"popular",resolution:"thumbnail",sortBy:"none",links:!0,mock:!1,useHttp:!1},"object"===(void 0===e?"undefined":_typeof(e)))for(n in e)a=e[n],this.options[n]=a;this.context=null!=t?t:this,this.unique=this._genKey()}return a.prototype.hasNext=function(){return"string"==typeof this.context.nextUrl&&0<this.context.nextUrl.length},a.prototype.next=function(){return!!this.hasNext()&&this.run(this.context.nextUrl)},a.prototype.run=function(e){var t,n;if("string"!=typeof this.options.clientId&&"string"!=typeof this.options.accessToken)throw new Error("Missing clientId or accessToken.");if("string"!=typeof this.options.accessToken&&"string"!=typeof this.options.clientId)throw new Error("Missing clientId or accessToken.");return null!=this.options.before&&"function"==typeof this.options.before&&this.options.before.call(this),"undefined"!=typeof document&&null!==document&&((n=document.createElement("script")).id="instafeed-fetcher",n.src=e||this._buildUrl(),document.getElementsByTagName("head")[0].appendChild(n),t="instafeedCache"+this.unique,window[t]=new a(this.options,this),window[t].unique=this.unique),!0},a.prototype.parse=function(e){var t,n,a,i,s,o,r,l,d,c,u,h,p,m,f,g,v,w,b,y,_,k,x,C,$,A,D,j;if("object"!==(void 0===e?"undefined":_typeof(e))){if(null!=this.options.error&&"function"==typeof this.options.error)return this.options.error.call(this,"Invalid JSON data"),!1;throw new Error("Invalid JSON response")}if(200!==e.meta.code){if(null!=this.options.error&&"function"==typeof this.options.error)return this.options.error.call(this,e.meta.error_message),!1;throw new Error("Error from Instagram: "+e.meta.error_message)}if(0===e.data.length){if(null!=this.options.error&&"function"==typeof this.options.error)return this.options.error.call(this,"No images were returned from Instagram"),!1;throw new Error("No images were returned from Instagram")}if(null!=this.options.success&&"function"==typeof this.options.success&&this.options.success.call(this,e),this.context.nextUrl="",null!=e.pagination&&(this.context.nextUrl=e.pagination.next_url),"none"!==this.options.sortBy)switch($="least"===(A="random"===this.options.sortBy?["","random"]:this.options.sortBy.split("-"))[0],A[1]){case"random":e.data.sort(function(){return.5-Math.random()});break;case"recent":e.data=this._sortBy(e.data,"created_time",$);break;case"liked":e.data=this._sortBy(e.data,"likes.count",$);break;case"commented":e.data=this._sortBy(e.data,"comments.count",$);break;default:throw new Error("Invalid option for sortBy: '"+this.options.sortBy+"'.")}if("undefined"!=typeof document&&null!==document&&!1===this.options.mock){if(h=e.data,C=parseInt(this.options.limit,10),null!=this.options.limit&&h.length>C&&(h=h.slice(0,C)),o=document.createDocumentFragment(),null!=this.options.filter&&"function"==typeof this.options.filter&&(h=this._filter(h,this.options.filter)),null!=this.options.template&&"string"==typeof this.options.template){for(r="",j=document.createElement("div"),l=0,y=h.length;l<y;l++){if("object"!==(void 0===(c=(d=h[l]).images[this.options.resolution])?"undefined":_typeof(c)))throw s="No image found for resolution: "+this.options.resolution+".",new Error(s);g=c.width,f="square",(m=c.height)<g&&(f="landscape"),g<m&&(f="portrait"),u=c.url,0<=window.location.protocol.indexOf("http")&&!this.options.useHttp&&(u=u.replace(/https?:\/\//,"//")),r+=this._makeTemplate(this.options.template,{model:d,id:d.id,link:d.link,type:d.type,image:u,width:g,height:m,orientation:f,caption:this._getObjectProperty(d,"caption.text"),likes:d.likes.count,comments:d.comments.count,location:this._getObjectProperty(d,"location.name")})}for(j.innerHTML=r,i=[],a=0,n=j.childNodes.length;a<n;)i.push(j.childNodes[a]),a+=1;for(w=0,_=i.length;w<_;w++)x=i[w],o.appendChild(x)}else for(b=0,k=h.length;b<k;b++){if(d=h[b],p=document.createElement("img"),"object"!==(void 0===(c=d.images[this.options.resolution])?"undefined":_typeof(c)))throw s="No image found for resolution: "+this.options.resolution+".",new Error(s);u=c.url,0<=window.location.protocol.indexOf("http")&&!this.options.useHttp&&(u=u.replace(/https?:\/\//,"//")),p.src=u,!0===this.options.links?((t=document.createElement("a")).href=d.link,t.appendChild(p),o.appendChild(t)):o.appendChild(p)}if("string"==typeof(D=this.options.target)&&(D=document.getElementById(D)),null==D)throw s='No element with id="'+this.options.target+'" on page.',new Error(s);D.appendChild(o),document.getElementsByTagName("head")[0].removeChild(document.getElementById("instafeed-fetcher")),v="instafeedCache"+this.unique,window[v]=void 0;try{delete window[v]}catch(e){e}}return null!=this.options.after&&"function"==typeof this.options.after&&this.options.after.call(this),!0},a.prototype._buildUrl=function(){var e,t;switch("https://api.instagram.com/v1",this.options.get){case"popular":e="media/popular";break;case"tagged":if(!this.options.tagName)throw new Error("No tag name specified. Use the 'tagName' option.");e="tags/"+this.options.tagName+"/media/recent";break;case"location":if(!this.options.locationId)throw new Error("No location specified. Use the 'locationId' option.");e="locations/"+this.options.locationId+"/media/recent";break;case"user":if(!this.options.userId)throw new Error("No user specified. Use the 'userId' option.");e="users/"+this.options.userId+"/media/recent";break;default:throw new Error("Invalid option for get: '"+this.options.get+"'.")}return t="https://api.instagram.com/v1/"+e,null!=this.options.accessToken?t+="?access_token="+this.options.accessToken:t+="?client_id="+this.options.clientId,null!=this.options.limit&&(t+="&count="+this.options.limit),t+="&callback=instafeedCache"+this.unique+".parse"},a.prototype._genKey=function(){var e;return""+(e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)})()+e()+e()+e()},a.prototype._makeTemplate=function(e,t){var n,a,i,s,o;for(a=/(?:\{{2})([\w\[\]\.]+)(?:\}{2})/,n=e;a.test(n);)s=n.match(a)[1],o=null!=(i=this._getObjectProperty(t,s))?i:"",n=n.replace(a,function(){return""+o});return n},a.prototype._getObjectProperty=function(e,t){var n,a;for(a=(t=t.replace(/\[(\w+)\]/g,".$1")).split(".");a.length;){if(n=a.shift(),!(null!=e&&n in e))return null;e=e[n]}return e},a.prototype._sortBy=function(e,i,s){var t;return t=function(e,t){var n,a;return n=this._getObjectProperty(e,i),a=this._getObjectProperty(t,i),s?a<n?1:-1:n<a?1:-1},e.sort(t.bind(this)),e},a.prototype._filter=function(e,t){var n,a,i,s;for(n=[],a=function(e){if(t(e))return n.push(e)},i=0,s=e.length;i<s;i++)a(e[i]);return n},a}(),n=e,a=function(){return t},"function"==typeof define&&define.amd?define([],a):"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=a():n.Instafeed=a()}.call(void 0,window),function(l){"use strict";l(function(){jQuery(".townhub-instafeed").length&&jQuery(".townhub-instafeed").each(function(){var e=jQuery(this).data("client"),t=jQuery(this).data("access"),n=jQuery(this).data("limit"),a=jQuery(this).data("get"),i=jQuery(this).data("getval"),s=jQuery(this).data("res"),o=jQuery(this).find(".townhub-instafeed-ul").attr("id"),r={get:a,target:o,resolution:s,template:'<li><a class="insta-popup" href="{{link}}"><img src="{{image}}" alt="{{caption}}"/></a></li>',limit:n,error:function(e){console.log(e)},clientID:"clientID",accessToken:"accessToken",tagName:"tagName",userId:4385108};r.template='<li><a class="insta-popup" href="{{image}}"><img src="{{image}}" alt="{{caption}}"/></a></li>',r.after=function(){l("#"+o).lightGallery({selector:".insta-popup",cssEasing:"cubic-bezier(0.25, 0, 0.25, 1)",download:!1,loop:!1,counter:!1,thumbnail:!1,loadVimeoThumbnail:!1,loadYoutubeThumbnail:!1})},""!=e&&(r.clientID=e),""!=t&&(r.accessToken=t),null!=i&&""!=i&&("tagged"==a?r.tagName=i:"user"==a&&(r.userId=i)),new Instafeed(r).run()})}),l(function(){if(l(".review-range-item").each(function(){l(".leave-rating input").change(function(){var e=l(this);l(".leave-rating .selected").removeClass("selected"),e.closest("label").addClass("selected")})}),"yes"!=_townhub_add_ons.disable_bubble){var t=function(e){return e[Math.floor(Math.random()*e.length)]};l('<div class="bubbles"></div>').appendTo(".bubble-bg");for(var n=[],a=[2,4,6,8],e=0;e<l(".bubbles").width();e++)n.push(e);setInterval(function(){var e=t(a);l(".bubbles").append('<div class="individual-bubble" style="left: '+t(n)+"px; width: "+e+"px; height:"+e+'px;"></div>'),l(".individual-bubble").animate({bottom:"100%",opacity:"-=0.7"},4e3,function(){l(this).remove()})},350)}}),l(function(){l(".listing-review-form").length&&l(".listing-review-form").attr("enctype","multipart/form-data"),l(document).on("click",".townhub_addons-like-button",function(e){e.preventDefault();var t=l(this),n=t.attr("data-post-id"),a=t.attr("data-nonce"),i=t.attr("data-iscomment");return""!==n&&l.ajax({type:"POST",url:_townhub_add_ons.url,data:{action:"townhub_addons_like",post_id:n,nonce:a,is_comment:i},beforeSend:function(){t.addClass("like-process")},success:function(e){"1"==i?(t.children(".comment-like-icon").html(e.icon),t.children(".comment-like-count").html(e.count)):t.html(e.count+e.icon),t.prop("title",e.status_text),"unliked"===e.status?t.removeClass("liked"):t.addClass("liked"),t.removeClass("like-process")}}),!1})}),l(".accordion a.toggle").on("click",function(e){e.preventDefault();var t=l(this).closest(".accordion");t.find("a.toggle").removeClass("act-accordion"),l(this).next("div.accordion-inner").is(":visible")?l(this).next("div.accordion-inner").slideUp():(l(this).addClass("act-accordion"),768<l(window).width()&&t.find("a.toggle").next("div.accordion-inner").slideUp(),l(this).next("div.accordion-inner").slideToggle())}),l(document).on("click",".tabs-menu a",function(e){e.preventDefault();var t=l(this),n=t.attr("href");t.parent().addClass("current"),t.parent().siblings().removeClass("current"),t.closest(".tabs-wrapper").find(".tab-content").not(n).css("display","none").removeClass("tab-current"),t.closest(".tabs-wrapper").find(n).fadeIn().addClass("tab-current")}),l(".change_bg .lfilter-tabitem > a").on("click",function(){var e=l(this).data("bgtab"),t=l(this).closest(".elementor-hero-section");if(t.length&&""!=e){var n=t.children(".hero-bg-wrap");n.length&&n.children(".bg").css("background-image","url("+e+")").attr("data-bg",e)}}),l(document).on("click",".repeating-fields .add-field",function(e){e.preventDefault();var t=l(this).closest(".entry"),n=l(this).closest(".repeating-fields"),a=n.data("remove-text");l(t.clone()).appendTo(n);n.find(".entry:not(:last) .add-field").removeClass("add-field").addClass("remove-field").text(a)}),l(document).on("click",".repeating-fields .remove-field",function(e){e.preventDefault(),l(this).closest(".entry").remove()}),l(document).on("click",".repeater-fields-wrap .addfield,.repeater-fields-wrap .btn-add",function(e){e.preventDefault();var t=l(this).closest(".repeater-fields-wrap"),n=t.children(".repeater-fields"),a=l(this).data("index")?l(this).data("index"):n.children().length?n.children().length:0,i=t.data("tmpl"),s=t.data("tmpl_data")?t.data("tmpl_data"):{},o=_.template(l("#"+i).html(),{variable:"data",evaluate:/<#([\s\S]+?)#>/g,interpolate:/{{{([\s\S]+?)}}}/g,escape:/{{([^}]+?)}}(?!})/g});n.append(o(l.extend({index:++a},s))),l(this).data("index",a)}),l(document).on("click",".repeater-fields-wrap .rmfield,.repeater-fields-wrap .btn-del",function(e){e.preventDefault(),l(this).closest(".entry").remove()}),l(".header-user-name").on("click",function(){l(".header-user-menu ul").toggleClass("hu-menu-vis"),l(this).toggleClass("hu-menu-visdec")});var n={hide:function(){l(".ctb-modal , .reg-overlay").fadeOut(200),l("html, body").removeClass("hid-body"),l(".modal_main").removeClass("vis_mr")}};l(document).on("click",".ctb-modal-open",function(e){e.preventDefault(),l(".ctb-modal , .reg-overlay").fadeIn(200),l(".modal_main").addClass("vis_mr"),l("html, body").addClass("hid-body")}),l(document).on("click",".logreg-modal-open",function(e){if(e.preventDefault(),l("#ctb-logreg-modal").length){var t=l("#ctb-logreg-modal"),n=void 0!==l(this).data("message")?l(this).data("message"):"";t.find(".prelog-message").text(""),""!=n&&t.find(".prelog-message").text(n),t.fadeIn(200),l(".reg-overlay").fadeIn(200),t.find(".modal_main").addClass("vis_mr"),l("html, body").addClass("hid-body")}}),l(".lost-password").on("click",function(e){e.preventDefault(),l(".modal_main").removeClass("vis_mr"),l(".ctb-modal").fadeOut(200,function(){l("#ctb-resetpsw-modal").fadeIn(200),l("#ctb-resetpsw-modal").find(".modal_main").addClass("vis_mr")})}),l(".cplan-modal-open").on("click",function(e){e.preventDefault();var t=l(this).data("listing");null!=t?(l("#ctb-cplan-modal").find('input[name="listing_id"]').val(t),l("#ctb-cplan-modal").fadeIn(),l("html, body").addClass("hid-body")):console.log("invalid listing id")}),l(".reply-lauthor_msg").on("click",function(e){e.preventDefault();var t=l("#ctb-reply-msg-modal"),n=l(this).data("id"),a=l(this).data("replyto"),i=l(this).data("firstmsg"),s=l(this).data("title");null!=n&&null!=a?(l(".author-message-form").show().trigger("reset"),l(".author-message-form + .lauthor-message").remove(),t.find(".lauthor-msg-title").text(s),t.find('input[name="authid"]').val(n),t.find('input[name="reply_to"]').val(a),t.find('input[name="first_msg"]').val(i),t.fadeIn(),t.find(".modal_main").addClass("vis_mr"),l("html, body").addClass("hid-body")):console.log("invalid message id")}),l(".open-listing-claim").on("click",function(e){e.preventDefault();var t=l("#ctb-listing-claim-modal");t.fadeIn(),t.find(".modal_main").addClass("vis_mr"),l("html, body").addClass("hid-body")}),l(".open-new-campaign-modal").on("click",function(e){e.preventDefault();var t=l("#ctb-new-campaign-modal");t.fadeIn(),l("html, body").addClass("hid-body"),t.find(".modal_main").addClass("vis_mr")}),l(".ctb-modal-close, .reg-overlay").on("click",function(){n.hide()}),l("#townhub-login").on("submit",function(e){e.preventDefault();var t=l(this).serialize();l("#log-submit").attr("disabled",!0).addClass("submitted"),l.ajax({method:"POST",url:_townhub_add_ons.url,data:t+"&action=townhub-login"}).done(function(e){null!=e.debug&&e.debug&&console.log(e),l("#log-submit").removeClass("submitted"),0==e.success?(l(".log-message").html(e.message).addClass("show"),l("#log-submit").attr("disabled",!1).removeClass("submitted"),_townhub_add_ons.gcaptcha&&grecaptcha.reset(loginCaptcha)):(l(".log-message").html(e.message).addClass("show success"),setTimeout(function(){null!=e.redirection?window.location.href=e.redirection:_townhub_add_ons.gcaptcha&&grecaptcha.reset(loginCaptcha),n.hide()},_townhub_add_ons.login_delay))}).fail(function(e,t,n){console.log(e)})}),l("#townhub-register").on("submit",function(e){e.preventDefault();var t=l(this).serialize();l("#reg-submit").attr("disabled",!0).addClass("submitted"),l.ajax({method:"POST",url:_townhub_add_ons.url,data:t+"&action=townhub-register"}).done(function(e){l("#reg-submit").removeClass("submitted"),0==e.success?(l(".reg-message").html(e.data.reg_err).addClass("show"),l("#reg-submit").attr("disabled",!1).removeClass("submitted"),_townhub_add_ons.gcaptcha&&grecaptcha.reset(regCaptcha)):(void 0!==e.data.reg_msg&&l(".reg-message").html(e.data.reg_msg).addClass("show success"),setTimeout(function(){void 0!==e.data.redirection?window.location.href=e.data.redirection:_townhub_add_ons.gcaptcha&&grecaptcha.reset(regCaptcha)},5e3))}).fail(function(e,t,n){console.log(e)})})}(jQuery),function($){"use strict";function cardRaining(){$(".card-popup-raining").each(function(e){var t=Math.round(parseFloat($(this).attr("data-rating"))),n=$(this).attr("data-stars");if($(this).children(".stars-wrapper").length&&$(this).children(".stars-wrapper").remove(),0<t)if($(this).prepend('<span class="stars-wrapper"></span>'),t<parseFloat(n)){var a=parseInt(n-t);$("<i class='far fa-star'></i>").duplicate(a).prependTo($(this).children(".stars-wrapper")),$("<i class='fas fa-star'></i>").duplicate(t).prependTo($(this).children(".stars-wrapper"))}else $("<i class='fas fa-star'></i>").duplicate(t).prependTo($(this).children(".stars-wrapper"))})}function cardRainingVis(){$(".card-popup-rainingvis").each(function(e){var t=Math.round(parseFloat($(this).attr("data-rating"))),n=$(this).attr("data-stars");if($(this).children(".stars-wrapper").length&&$(this).children(".stars-wrapper").remove(),0<t)if($(this).prepend('<span class="stars-wrapper"></span>'),t<parseFloat(n)){var a=parseInt(n-t);$("<i class='far fa-star'></i>").duplicate(a).prependTo($(this).children(".stars-wrapper")),$("<i class='fas fa-star'></i>").duplicate(t).prependTo($(this).children(".stars-wrapper"))}else $("<i class='fas fa-star'></i>").duplicate(t).prependTo($(this).children(".stars-wrapper"))}),$(".price-level-item").each(function(e){var t=$(this).attr("data-pricerating");$("<strong>$</strong>").duplicate(t).prependTo(this)})}function getBoundsRadius(e){var t=e.getNorthEast().lat()/57.2958,n=e.getNorthEast().lng()/57.2958,a=e.getCenter().lat()/57.2958,i=e.getCenter().lng()/57.2958;return 6378.8*Math.acos(Math.sin(a)*Math.sin(t)+Math.cos(a)*Math.cos(t)*Math.cos(n-i))}function fetchAddress(e){var t="https://nominatim.openstreetmap.org/reverse?format=json&lat="+e[1]+"&lon="+e[0]+"&zoom=18&addressdetails=1";fetch(t).then(function(e){return e.json()}).then(function(e){null!=e.display_name&&e.display_name&&$("#contact_infos_address").val(e.display_name)})}function inrange(e,t,n){return!isNaN(t)&&e<=t&&t<=n}function valid_coords(e,t){return e=parseFloat(e),t=parseFloat(t),!(!inrange(-90,e,90)||!inrange(-180,t,180))}$.fn.duplicate=function(e,t){for(var n=[],a=0;a<e;a++)$.merge(n,this.clone(t).get());return this.pushStack(n)},$(function(){cardRaining(),cardRainingVis(),$(".footer-bg").length&&$("<span class='footer-bg-pin'></span>").duplicate(4).prependTo(".footer-bg")}),window.addEventListener("mapPopupOpened",function(e){cardRaining()});var AjaxHelper={config:{},initConfig:function(){this.config={ajaxParams:{type:"POST",url:_townhub_add_ons.url,data:{}},actionPrefix:"townhub_addons_"}},init:function(){this.initConfig()},send:function(e,t){var n=JSON.parse(JSON.stringify(this.config.ajaxParams));t=t||{},e=this.config.actionPrefix+e,$.extend(n,t),n.data instanceof FormData?(n.data.append("action",e),n.data.append("_nonce",_townhub_add_ons.nonce),n.data.append("_wpnonce",_townhub_add_ons.nonce)):(n.data.action=e,n.data._nonce=_townhub_add_ons.nonce,n.data._wpnonce=_townhub_add_ons.nonce),null!=_townhub_add_ons.wpml&&(n.data.lang=_townhub_add_ons.wpml);var a=n.success,i=n.error;return(a||i)&&(n.success=function(e){null!=e.debug&&e.debug&&console.log(e),e.success&&a&&a(e.data),!e.success&&i&&i(e.data)},i&&(n.error=function(e){console.log(e),i(e)})),$.ajax(n)}};function extract_map_datas(){var t=[];return $("#listing-items .listing-item").length&&$("#listing-items .listing-item").each(function(){var e=decodeURIComponent($(this).data("lmap"));try{t.push(JSON.parse(e))}catch(e){console.log(e)}}),t}AjaxHelper.init(),$(function(){$(".list-search-form-js").each(function(){0==$(this).find('input[name="search_term"]').length&&$(this).append('<input type="hidden" name="search_term" value="">')}),$(".col-list-wrap.anim_clw.show_toggle_filter").length&&$(".back-to-filters").attr("href","#lisconfw")}),$(document).on("change",'.fuzone input[type="file"]',function(e){var a=this;$(a).closest(".fuzone").children(".fu-imgs").html(""),a.files.length>_townhub_add_ons.md_limit?(alert(_townhub_add_ons.md_limit_msg),a.value=""):0<a.files.length&&_.each(a.files,function(e,t){if(null!=e.type&&0===e.type.indexOf("image/"))if(e.size/1024/1024>_townhub_add_ons.md_limit_size)alert(_townhub_add_ons.md_limit_size_msg),a.value="";else{var n=new FileReader;n.onload=function(e){$(a).closest(".fuzone").children(".fu-imgs").append('<img src="'+e.target.result+'">')},n.readAsDataURL(e)}else a.value=""})}),$(document).on("click",".del-listing",function(e){e.preventDefault();var t=$(this),n=$(this).data("id"),a=$(this).data("title");window.confirm(_townhub_add_ons.i18n["del-listing"].replace("{{listing_title}}",a))&&n&&AjaxHelper.send("delete_listing",{data:{lid:n},success:function(e){t.closest(".dashboard-card.listing").remove()},error:function(e){null!=e.error&&e.error&&$.notify(e.error,{className:"cth-error"})}})}),$(document).on("click",".set-lfeatured",function(e){e.preventDefault();var t=$(this),n={lid:$(this).data("id")},a=!1;t.hasClass("lfeatured")&&(a=!0,n.lfeatured=!0),t.addClass("do-process").attr("disabled",!0),AjaxHelper.send("featured_listing",{data:n,success:function(e){a?t.removeClass("lfeatured"):t.addClass("lfeatured"),t.removeClass("do-process").attr("disabled",!1)},error:function(e){null!=e.error&&e.error&&$.notify(e.error,{className:"cth-error"}),t.removeClass("do-process").attr("disabled",!1)}})}),$(".more-filter-option").on("click",function(){$(".hidden-listing-filter").slideToggle(500),$(this).find("span").toggleClass("mfilopact")}),$(".show-search-button").on("click",function(){$(".vis-header-search").slideToggle(500)});var listing_grid_wrap_cols="",hbarWidth=0;$(".grid-opt li .expand-listing-view").on("click",function(e){e.preventDefault();$(this);""==listing_grid_wrap_cols&&(listing_grid_wrap_cols=$(this).closest(".listings-grid-wrap").attr("class")),0==hbarWidth&&(hbarWidth=$(this).closest(".list-main-wrap-header").width()),$(this).hasClass("act-grid-opt")?($(this).closest(".col-list-wrap").removeClass("expanded"),$(this).closest(".listings-grid-wrap").attr("class",listing_grid_wrap_cols),$(this).closest(".list-main-wrap-header").css("width",hbarWidth)):($(this).closest(".col-list-wrap").addClass("expanded"),$(this).closest(".listings-grid-wrap").attr("class","listings-grid-wrap four-cols template-column-expanded")),$(this).toggleClass("act-grid-opt"),onListingsChanged("listing-view-expand")});var shf=$(".shsb_btn"),ahimcocn=$(".anim_clw"),mapover=$(".map-overlay , .close_sbfilters");function showhiddenfilters(){shf.removeClass("shsb_btn_act"),ahimcocn.addClass("hidsb_act"),mapover.fadeIn(200)}function hidehiddenfilters(){shf.addClass("shsb_btn_act"),ahimcocn.removeClass("hidsb_act"),mapover.fadeOut(200)}function getFormDataObj(e){var n={};return e&&$.each(e,function(e,t){n.hasOwnProperty(t.name)?(n[t.name]=$.makeArray(n[t.name]),n[t.name].push(t.value)):n[t.name]=t.value}),n}function getParameterByName(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}shf.on("click",function(){$(this).hasClass("shsb_btn_act")?showhiddenfilters():hidehiddenfilters()}),mapover.on("click",function(){hidehiddenfilters()}),$(document).on("submit","#list-search-page-form",function(e){return e.preventDefault(),doAjaxSearch(this),!1}),$(document).on("click",".mb-open-filter",function(e){e.preventDefault(),$(this).toggleClass("active"),$(this).closest(".listsearch-options").toggleClass("mb-filter-show")}),$(document).on("click",".clear-filter-btn",function(e){e.preventDefault(),$("#list-search-page-form").length&&($("#list-search-page-form").trigger("reset"),$("#list-search-page-form").find('select[name="ltype"]').val(""),$("#list-search-page-form").find('select[name="lcats[]"]').val(""),$("#list-search-page-form").find('select[name="llocs"]').val(""),$("#list-search-page-form").find('input[name="search_term"]').val(""),$(".list-search-page-form .chosen-select").niceSelect("update"),doAjaxSearch(document.getElementById("list-search-page-form")))}),$(document).on("change",'.list-search-page-form select[name="ltype"]',function(e){var n=$(this).val(),a=$(this).closest(".list-search-page-form-wrap");a.find('select[name="lcats[]"]').val(""),a.find('select[name="llocs"]').val(""),1064<$(window).outerWidth()&&doAjaxSearch(this.form),a.length&&(a.addClass("loading-show"),$.ajax({type:"POST",url:_townhub_add_ons.url,data:{action:"townhub_change_ltype",ltype:n,_wpnonce:_townhub_add_ons.nonce},success:function(e){if(null==e.error){a.replaceWith(e),$(".list-search-page-form .chosen-select").niceSelect(),$(".price-slider").length&&$(".price-slider").each(function(){var t=$(this);t.ionRangeSlider({keyboard:!0,onFinish:function(e){t.closest(".price-rage-item").children(".price_range_hidden").val(e.input.val()).trigger("change")}})}),$(".single-range").length&&$(".single-range").ionRangeSlider({type:"single"}),cardRaining();var t=new CustomEvent("filterChanged",{detail:n});window.dispatchEvent(t)}else console.log(e);a.removeClass("loading-show")},error:function(e){a.removeClass("loading-show"),console.log(e)}}))}),$(document).on("change",'.list-search-page-form select[name="lcats[]"]',function(e){if("yes"!=_townhub_add_ons.hide_cat_features){var t=$(this).val(),a=$(".list-search-page-form .listing-features-view");a.length&&(a.addClass("loading-feas"),a.children(".listing-features").html(""));var i=$(".list-search-page-form .listing-subcats-view");i.length&&(i.addClass("loading-subcats"),i.children(".listing-subcats").html("")),$("#lsearch-results-title span").length&&$("#lsearch-results-title span").text($(this).children("option:selected").text()),AjaxHelper.send("cats_features",{data:{cats:t},success:function(e){if(a.length&&null!=e.features){var t=_.template($("#tmpl-feature-search").html(),{variable:"data",evaluate:/<#([\s\S]+?)#>/g,interpolate:/{{{([\s\S]+?)}}}/g,escape:/{{([^}]+?)}}(?!})/g})({features:e.features});a.children(".listing-features").html(t),-1<t.indexOf("<")&&a.removeClass("loading-feas")}if($(".listing-term-desc").length&&null!=e.cat_desc&&$(".listing-term-desc").html(e.cat_desc),i.length&&null!=e.subcats){var n=_.template($("#tmpl-filter-subcats").html(),{variable:"data",evaluate:/<#([\s\S]+?)#>/g,interpolate:/{{{([\s\S]+?)}}}/g,escape:/{{([^}]+?)}}(?!})/g})({subcats:e.subcats});i.children(".listing-subcats").html(n),-1<n.indexOf("<")&&i.removeClass("loading-subcats")}},error:function(e){$(".listing-term-desc").length&&$(".listing-term-desc").html("")}})}}),$(document).on("change",'.listsearch-options input[name="search_term"],.listsearch-options input[name="lfeas[]"],.listsearch-options select[name="llocs"],.listsearch-options input[name="filter_subcats[]"],.listsearch-options input[name="status"],.listsearch-options select[name="price_range"],.listsearch-options select[name="fprice"],.listsearch-options select[name="morderby"],.listsearch-options input[name="event_date"],.listsearch-options input[name="event_time"],.listsearch-options input[name="ltags[]"],.listsearch-options input[name="ldistance"],.listsearch-options input[name="listing_tags[]"],.listsearch-options .custom-filter-auto',function(e){1064<$(window).outerWidth()&&doAjaxSearch(this.form)}),$(document).on("click",".ajax-pagination .ajax-pagi-item",function(e){if($("#list-search-page-form").length){e.preventDefault();var t=$(this).data("page")||1,n=$("#listing-items");n.length&&$("html,body").animate({scrollTop:n.offset().top-200},{queue:!1,duration:0}),doAjaxSearch(document.getElementById("list-search-page-form"),{paged:t})}}),$("#lfilter-orderby").on("change",function(e){$("#list-search-page-form").find('input[name="morderby"]').val($(this).val()),doAjaxSearch(document.getElementById("list-search-page-form"))});var ajax_count=1;function doAjaxSearch(e,t,n){ajax_count++;var a=getParameterByName("ltype"),i=getParameterByName("lcats%5B%5D"),s=getParameterByName("llocs"),o=getParameterByName("search_term"),r=getParameterByName("listing_tags%5B%5D"),l={};null!=o&&(l.search_term=o),null!=a&&(l.ltype=a),null!=i&&(l.lcats=[i]),null!=s&&(l.llocs=s),null!=r&&(l.listing_tags=[r]);var d={};null!=e&&(d=getFormDataObj($(e).serializeArray())),null==t&&(t={}),$.extend(!0,l,d,t),l.ajax_count=ajax_count,$(".listings-loader").length||$("#listing-items").addClass("loading-listings").after(_.template($("#tmpl-load-listings").html())),$(window).outerWidth()<1064&&hidehiddenfilters(),AjaxHelper.send("ajax_search",{data:l,success:function(e){if(null!=e.ajax_count&&e.ajax_count==ajax_count){var t=_.template($("#tmpl-no-results").html(),{variable:"data",evaluate:/<#([\s\S]+?)#>/g,interpolate:/{{{([\s\S]+?)}}}/g,escape:/{{([^}]+?)}}(?!})/g});$("#listing-items").html(""),null!=e.listings&&e.listings.length?$("#listing-items").html(e.listings):$("#listing-items").html(t()),onListingsChanged("ajax_search"),cardRainingVis(),updateLazyLoad(),initHiddenGal(),void 0!==e.pagination&&$(".listings-pagination-wrap").html(e.pagination),$("#listing-items").removeClass("loading-listings"),$(".listings-loader").remove()}},error:function(e){}})}function updateLazyLoad(){null!=window.lazyLoadInstance&&window.lazyLoadInstance.update()}function onListingsChanged(e){var t=new CustomEvent("listingsChanged",{detail:e});window.dispatchEvent(t)}function getPreciseLocation(){return new Promise(function(t,e){navigator.geolocation.getCurrentPosition(function(e){t({lat:e.coords.latitude,lng:e.coords.longitude})})})}function getLocationDataResult(t){var e="";null!==t&&"object"===(void 0===t?"undefined":_typeof(t))&&(Array.isArray(_townhub_add_ons.address_format)&&_townhub_add_ons.address_format.length?e=_townhub_add_ons.address_format.filter(function(e){return null!=t[e]&&""!=t[e]}).map(function(e){return t[e]}).join(", "):null!=t[_townhub_add_ons.location_type]&&(e=t[_townhub_add_ons.location_type]));return e}function extractAddressComponent(e,n){var a="";return $.each(e,function(e,t){null==n.formatted_address&&t.formatted_address&&(n.formatted_address=t.formatted_address),void 0!==n&&(n[t.types[0]]=t.address_components[0].long_name),t.types[0]==_townhub_add_ons.location_type&&(a=t.address_components[0].long_name)}),a=getLocationDataResult(n),null!==n&&"object"===(void 0===n?"undefined":_typeof(n))?(n.result=a,n):a}function extractOSMAddress(e,t){var n;return null!=e.display_name&&(t.formatted_address=e.display_name),null!=e.address&&(null!=e.address.country&&(t.country=e.address.country),null!=e.address.state&&(t.administrative_area_level_1=e.address.state),null!=e.address.city?t.administrative_area_level_2=e.address.city:null!=e.address.county&&(t.administrative_area_level_2=e.address.city),null!=e.address.postcode&&(t.postal_code=e.address.postcode),null!=e.address.village&&(t.locality=e.address.village),null!=e.address.city_district&&(t.sublocality=e.address.city_district)),n=getLocationDataResult(t),null!==t&&"object"===(void 0===t?"undefined":_typeof(t))?(t.result=n,t):n}function extractMapboxAddress(e,t){var n;if(null!=e.features&&0<e.features.length){var a=e.features[0],i=a.place_name,s=a.context;null!=i&&(t.formatted_address=i),null!=s&&Array.isArray(s)&&0<s.length&&s.forEach(function(e){null!=e.id&&(-1!==e.id.indexOf("country.")&&(t.country=e.text),-1!==e.id.indexOf("region.")&&(t.administrative_area_level_1=e.text),-1!==e.id.indexOf("place.")&&(t.administrative_area_level_2=e.text))})}return n=getLocationDataResult(t),null!==t&&"object"===(void 0===t?"undefined":_typeof(t))?(t.result=n,t):n}function addCurrentCity(a){if("mapbox"==_townhub_add_ons.map_provider)return new Promise(function(t,e){var n="https://api.mapbox.com/geocoding/v5/mapbox.places/"+a.lng+","+a.lat+".json?access_token="+_townhub_add_ons.mbtoken+"&limit=1";fetch(n).then(function(e){return e.json()}).then(function(e){a=extractMapboxAddress(e,a),t(a)})});if("googlemap"!=_townhub_add_ons.map_provider)return new Promise(function(t,e){var n="https://nominatim.openstreetmap.org/reverse?format=json&lat="+a.lat+"&lon="+a.lng+"&zoom=18&addressdetails=1";fetch(n).then(function(e){return e.json()}).then(function(e){a=extractOSMAddress(e,a),t(a)})});var t=new google.maps.Geocoder;return new Promise(function(n,e){t.geocode({location:a},function(e,t){"OK"===t&&e[0]&&(a=extractAddressComponent(e,a),n(a))})})}function getCurrentGeoLocation(t){getPreciseLocation().then(addCurrentCity).then(function(e){t(e)})}function doBookmarkAjax(e){var t=$(e),n=t.data("id"),a=t.data("map");parseInt(n)&&(t.removeClass("bookmark-listing-btn").addClass("bookmark-listing-btn-clicked"),t.html('<i class="fal fa-spinner fa-pulse"></i>'),AjaxHelper.send("bookmarks_listing",{data:{listing:parseInt(n),for_map:null!=a&&"1"==a},success:function(e){null!=e.icon&&t.html(e.icon),null!=e.bookmarks&&($(".bmcounter-head").length&&$(".bmcounter-head").text(e.bookmarks),$(".bmcounter-bot strong").length&&$(".bmcounter-bot strong").text(e.bookmarks)),null!=e.bookmarks_html&&""!=e.bookmarks_html&&$(".wishlist-items-wrap").length&&$(".wishlist-items-wrap").html(e.bookmarks_html)},error:function(e){}}))}window.doAjaxSearch=doAjaxSearch,window.getCurrentLoc=getCurrentGeoLocation,$(document).on("click",".get-current-city",function(e){getCurrentGeoLocation(function(e){null!=e.result&&setTimeout(function(){$(".auto-place-loc").val(e.result),0<$(".mapboxgl-ctrl-geocoder--input").length&&$(".mapboxgl-ctrl-geocoder--input").val(e.result),$(".auto-place-nearby").each(function(){$(this).val("on")}),$(".auto-place-lat").each(function(){$(this).val(e.lat)}),$(".auto-place-lng").each(function(){$(this).val(e.lng)}),$(".nearby-checkbox").each(function(){$(this).prop("checked",!0)})},500)})}),$(document).on("change",".distance-radius",function(){$(this).closest(".nearby-distance-wrap").find(".distance-value").text($(this).val())}),$(document).on("submit","#user-info-form",function(e){e.preventDefault();var t=$(this);t.find(".ajax-result-message").removeClass("dis-msg"),$("#edit-profile-submit").addClass("disabled").attr("disabled",!0).children("i").removeClass("fa-save").addClass("fa-spinner fa-pulse");var n=$('input[type="file"]:not([disabled])',t);n.each(function(e,t){0<t.files.length||$(t).prop("disabled",!0)});var a=new FormData(this);n.prop("disabled",!1),AjaxHelper.send("edit_profile",{data:a,cache:!1,contentType:!1,processData:!1,success:function(e){null!=e.url&&e.url?window.location.href=e.url:null!=e.message&&e.message&&(t.find(".ajax-result-message").addClass("dis-msg").text(e.message),$.notify(e.message))},error:function(e){$("#edit-profile-submit").removeClass("disabled").attr("disabled",!1).children("i").removeClass("fa-spinner fa-pulse").addClass("fa-save"),null!=e.error&&e.error&&(t.find(".ajax-result-message").addClass("dis-msg").text(e.error),$.notify(e.error,{className:"cth-error"}))}})}),$(document).on("change",'.edit-profile-photo input[type="file"]',function(e){var a=this,i=$(a).closest(".edit-profile-photo").children(".profile-photo-wrap");a.files.length&&_.each(a.files,function(e,t){if(null!=e.type&&0===e.type.indexOf("image/"))if(e.size/1024/1024>_townhub_add_ons.md_limit_size)alert(_townhub_add_ons.md_limit_size_msg),a.value="";else{var n=new FileReader;n.onload=function(e){i.html('<img src="'+e.target.result+'" class="avatar avatar-150 photo">')},n.readAsDataURL(e),$(a).closest(".upload-photo-js-wrap").removeClass("user-photo-deleted")}else a.value=""})}),$(document).on("submit","#user-changepass-form",function(e){e.preventDefault();var t=$(this),n=new FormData(this);t.find(".ajax-result-message").removeClass("dis-msg"),$("#change-pass-submit").addClass("disabled").attr("disabled",!0).children("i").removeClass("fa-save").addClass("fa-spinner fa-pulse"),AjaxHelper.send("change_pass",{data:n,cache:!1,contentType:!1,processData:!1,success:function(e){null!=e.url&&e.url?window.location.href=e.url:null!=e.message&&e.message&&(t.find(".ajax-result-message").addClass("dis-msg").text(e.message),$.notify(e.message))},error:function(e){$("#change-pass-submit").removeClass("disabled").attr("disabled",!1).children("i").removeClass("fa-spinner fa-pulse").addClass("fa-save"),null!=e.error&&e.error&&(t.find(".ajax-result-message").addClass("dis-msg").text(e.error),$.notify(e.error,{className:"cth-error"}))}})}),$(".quantity-item").on("click",".minus",function(e){e.preventDefault();var t=$(this).closest(".quantity-item"),n=t.data("min")||0,a=t.data("step")||1,i=t.children(".qty"),s=parseInt(i.val());n<(s=isNaN(s)?1:s)&&$(".qty").val(s-a),n<s?i.val(s-a):i.val(n)}),$(".quantity-item").on("click",".plus",function(e){e.preventDefault();var t=$(this).closest(".quantity-item"),n=t.data("step")||1,a=t.children(".qty"),i=parseInt(a.val());i=isNaN(i)?0:i,a.val(i+n),$(".qty").val(i+n)}),$(".CVUploader .cth-file-upload").length&&$(document).on("change",".CVUploader .cth-file-upload",function(e){var t=$(this).closest(".CVUploader").children(".cv-uploaded-name");if("files"in this&&0<this.files.length){var n=this.files[0];t.text(n.name)}else t.text("")}),$(document).on("submit",".listing-booking-formxs",function(e){e.preventDefault();var t=new FormData(this),n=$(this),a=$(this).find(".lbooking-submitxs");a.addClass("disabled").attr("disabled",!0).children("i").removeClass("fa-angle-right").addClass("fa-spinner fa-pulse"),AjaxHelper.send("booking_listing",{data:t,cache:!1,contentType:!1,processData:!1,success:function(t){n.fadeOut(300,function(){var e=n.parent();null!=t.message&&n.after('<div class="booking-message">'+t.message+"</div>"),n.remove(),$("html, body").animate({scrollTop:e.offset().top-250},800)}),null!=t.url&&(_townhub_add_ons.lb_delay?setTimeout(function(){window.location.href=t.url},_townhub_add_ons.lb_delay):window.location.href=t.url)},error:function(e){a.removeClass("disabled").attr("disabled",!1).children("i").removeClass("fa-spinner fa-pulse").addClass("fa-angle-right")}})}),$(".lroom-form-cart").each(function(){$(".lroom-form-cart").on("submit",function(e){e.preventDefault();var t=new FormData(this),n=$(this),a=($(this).find(".lroom-submit"),$(".rooms-container").data("listingids"));$(".get-listing-ids").val(a),AjaxHelper.send("booking_woo_listing",{data:t,cache:!1,contentType:!1,processData:!1,success:function(e){null!=e.debug&&!0===e.debug&&console.log(e),null!=e.message&&n.after('<div class="booking-message">'+e.message+"</div>"),$(this).remove(),void 0!==e.url&&(window.location.href=e.url)},error:function(e){}})})}),$(function(){$(".lroom-options").hide(),$(".lroom-option-submit").click(function(){var e=$(this).nextAll("div.lroom-options:first");$(".lroom-options").not(e).hide(),e.toggle()})}),$('<div class="quantity-nav"><div class="quantity-button quantity-up">+</div><div class="quantity-button quantity-down">-</div></div>').insertAfter(".quantity-search input"),$(".quantity-search").each(function(){var n=jQuery(this),a=n.find('input[type="number"]'),e=n.find(".quantity-up"),t=n.find(".quantity-down"),i=a.attr("min"),s=a.attr("max");e.click(function(){var e=parseFloat(a.val());if(s<=e)var t=e;else t=e+1;n.find("input").val(t),n.find("input").trigger("change")}),t.click(function(){var e=parseFloat(a.val());if(e<=i)var t=e;else t=e-1;n.find("input").val(t),n.find("input").trigger("change")})}),$(document).on("click",".cancel-booking",function(e){e.preventDefault();var t=$(this),n=t.data("id"),a=t.data("title");window.confirm(_townhub_add_ons.i18n["cancel-booking"].replace("{{booking_title}}",a))&&n&&AjaxHelper.send("cancel_lbooking",{data:{bkid:n},success:function(e){t.remove()},error:function(e){null!=e.error&&e.error&&$.notify(e.error,{className:"cth-error"})}})}),$(document).on("click",".del-booking",function(e){e.preventDefault();var t=$(this),n=t.data("id"),a=t.data("title");window.confirm(_townhub_add_ons.i18n["del-booking"].replace("{{booking_title}}",a))&&n&&AjaxHelper.send("delete_lbooking",{data:{bkid:n},success:function(e){t.closest(".dashboard-booking-item").remove()},error:function(e){null!=e.error&&e.error&&$.notify(e.error,{className:"cth-error"})}})}),$(document).on("click",".approve-booking",function(e){e.preventDefault();var t=$(this),n=t.data("id"),a=t.data("title");window.confirm(_townhub_add_ons.i18n["approve-booking"].replace("{{booking_title}}",a))&&n&&AjaxHelper.send("approve_lbooking",{data:{bkid:n},success:function(e){t.removeClass("approve-booking").attr("data-tooltip",_townhub_add_ons.lb_approved)},error:function(e){null!=e.error&&e.error&&$.notify(e.error,{className:"cth-error"})}})}),$(document).on("submit",".author-message-form",function(e){e.preventDefault();var t=new FormData(this),n=$(this),a=$(".author-msg-submit");a.addClass("disabled").attr("disabled",!0).children("i").removeClass("fa-paper-plane").addClass("fa-spinner fa-pulse"),n.addClass("processing"),AjaxHelper.send("lauthor_message",{data:t,cache:!1,contentType:!1,processData:!1,success:function(t){n.fadeOut(300,function(){null!=t.message&&""!=t.message&&n.after('<div class="lauthor-message">'+t.message+"</div>"),a.removeClass("disabled").attr("disabled",!1).children("i").removeClass("fa-spinner fa-pulse").addClass("fa-paper-plane"),$(this).hide();var e=n.parent();$("html, body").animate({scrollTop:e.offset().top-250},800)})},error:function(e){null!=e.error&&$(".author-message-error").html(e.error),a.removeClass("disabled").attr("disabled",!1).children("i").removeClass("fa-spinner fa-pulse").addClass("fa-paper-plane")}})}),$(document).on("click",".del-lauthor_msg",function(e){e.preventDefault();var t=$(this),n=t.data("id"),a=t.data("title");window.confirm(_townhub_add_ons.i18n["del-message"].replace("{{message_title}}",a))&&n&&AjaxHelper.send("del_lmessage",{data:{msgid:n},success:function(e){t.closest(".dashboard-message-item").remove()},error:function(e){null!=e.error&&e.error&&$.notify(e.error,{className:"cth-error"})}})}),$(document).on("click",".show-ctform-btn",function(e){e.preventDefault(),$(this).closest(".contacts-boxes").addClass("show-ctform")}),$(document).on("click",".close-ctform-btn",function(e){e.preventDefault(),$(this).closest(".contacts-boxes").removeClass("show-ctform")}),$(document).on("submit",".chat-lauthor-message-form",function(e){e.preventDefault();var t=new FormData(this),n=$(this);AjaxHelper.send("chat_lauthor_message",{data:t,cache:!1,contentType:!1,processData:!1,success:function(e){n.fadeOut(300,function(){null!=e.message&&n.after('<div class="lauthor-message">'+e.message+"</div>"),$(this).remove()})},error:function(e){}})}),$(document).on("submit",".reset-password-form",function(e){e.preventDefault();var t=new FormData(this),n=$(this);AjaxHelper.send("reset_password",{data:t,cache:!1,contentType:!1,processData:!1,success:function(e){$(".resetpwd-error").remove(),n.fadeOut(300,function(){null!=e.message&&n.after('<div class="resetpwd-message">'+e.message+"</div>"),$(this).remove()})},error:function(e){$(".resetpwd-error").remove(),null!=e.error&&n.before('<div class="resetpwd-error">'+e.error+"</div>")}})}),$(document).on("submit",".listing-claim-form",function(e){e.preventDefault();var t=new FormData(this),n=$(this);$("#lclaim-submit").attr("disabled",!0).addClass("submitted").append('<i class="fa fa-spinner fa-pulse"></i>'),AjaxHelper.send("claim_listing",{data:t,cache:!1,contentType:!1,processData:!1,success:function(e){$(".claim-error").remove(),null!=e.message&&n.before('<div class="claim-msg claim-success">'+e.message+"</div>"),n.remove()},error:function(e){$("#lclaim-submit").removeClass("submitted").attr("disabled",!1).find(".fa-spinner").remove(),$(".claim-error").remove(),null!=e.message&&n.before('<div class="claim-msg claim-error">'+e.message+"</div>")}})}),$(document).on("click",".delete-notification",function(e){e.preventDefault();var t=$(this),n=t.data("notification");n&&(t.closest(".notification-list-item").addClass("opa-50"),AjaxHelper.send("delete_notification",{data:{id:n},success:function(e){t.closest(".notification-list-item").remove()},error:function(e){null!=e.error&&e.error&&$.notify(e.error,{className:"cth-error"}),t.closest(".notification-list-item").removeClass("opa-50")}}))}),window.doBookmarkAjax=doBookmarkAjax,$(document).on("click.",".bookmark-listing-btn",function(e){e.preventDefault(),doBookmarkAjax(this)}),$(document).on("click",".bookmark-listing-btn-clicked",function(e){e.preventDefault()}),$(document).on("click",".delete-bookmark-btn",function(e){e.preventDefault();var t=$(this),n=t.data("id");parseInt(n)&&(t.removeClass("delete-bookmark-btn").addClass("delete-bookmark-btn-clicked"),t.closest(".wishlist-item").addClass("del-process"),AjaxHelper.send("delete_bookmark",{data:{listing:parseInt(n)},success:function(e){t.closest(".wishlist-item").remove(),null!=e.bookmarks&&($(".bmcounter-head").length&&$(".bmcounter-head").text(e.bookmarks),$(".bmcounter-bot strong").length&&$(".bmcounter-bot strong").text(e.bookmarks))},error:function(e){}}))}),$(document).on("click",".delete-bookmark-btn-clicked",function(e){e.preventDefault()}),$(document).on("click",".report-listing-opener",function(e){e.preventDefault();var t=$("#ctb-listing-report-modal");t.fadeIn(),t.find(".modal_main").addClass("vis_mr"),$("html, body").addClass("hid-body")}),$(document).on("submit",".listing-report-form",function(e){e.preventDefault();var t=new FormData(this),n=$(this);$("#lreport-submit").attr("disabled",!0).addClass("submitted").append('<i class="fal fa-spinner fa-pulse"></i>'),AjaxHelper.send("report_listing",{data:t,cache:!1,contentType:!1,processData:!1,success:function(e){$(".report-error").remove(),null!=e.message&&n.before('<div class="report-msg report-success">'+e.message+"</div>"),n.remove()},error:function(e){$("#lreport-submit").removeClass("submitted").attr("disabled",!1).find(".fa-spinner").remove(),$(".report-error").remove(),null!=e.message&&n.before('<div class="report-msg report-error">'+e.message+"</div>")}})});var dofollow=!1;function initHiddenGal(){$(".dynamic-gal").on("click",function(){var dynamicgal=eval($(this).attr("data-dynamicPath"));$(this).lightGallery({dynamic:!0,dynamicEl:dynamicgal,download:!1,loop:!1,counter:!1,thumbnail:!1,loadVimeoThumbnail:!1,loadYoutubeThumbnail:!1})})}function initIsotope(){$(".cthiso-isotope-wrapper .cthiso-items").length&&$(".cthiso-isotope-wrapper .cthiso-items").each(function(){var e=$(this).closest(".cthiso-isotope-wrapper").find(".cthiso-filters").length?$(this).closest(".cthiso-isotope-wrapper").find(".cthiso-filters .cthiso-filter:first-child").attr("data-filter"):"*",t=$(this).isotope({singleMode:!0,columnWidth:".cthiso-sizer",itemSelector:".cthiso-item, .cthiso-item-second, .cthiso-item-three",transformsEnabled:!0,transitionDuration:"700ms",resizable:!0,percentPosition:!0,filter:e,originLeft:"1"!=_townhub_add_ons.is_rtl});null!=window.lazyLoadInstance?t.isotope("layout"):t.imagesLoaded(function(){t.isotope("layout")}),$(".cthiso-filters").on("click","a.cthiso-filter",function(e){e.preventDefault();var t=$(this).attr("data-filter"),n=$(this).closest(".cthiso-isotope-wrapper").find(".cthiso-items");n.length&&n.isotope({filter:t}),$(this).closest(".cthiso-filters").find("a").removeClass("cthiso-filter-active"),$(this).addClass("cthiso-filter-active")})})}$(document).on("click",".do-follow-author",function(e){if(e.preventDefault(),!0!==dofollow){var t=$(this),n=t.data("id");dofollow=!0,parseInt(n)&&(t.children("i").length&&t.children("i").removeClass("fa-user-plus").addClass("fa-spinner fa-pulse"),AjaxHelper.send("follow_author",{data:{author:parseInt(n)},success:function(e){t.removeClass("do-follow-author").addClass("unfollow-author"),null!=e.button&&""!=e.button&&t.html(e.button),dofollow=!1},error:function(e){dofollow=!1}}))}}),$(document).on("click",".unfollow-author",function(e){if(e.preventDefault(),!0!==dofollow){var t=$(this),n=t.data("id");dofollow=!0,parseInt(n)&&(t.children("i").length&&t.children("i").removeClass("fa-user-minus").addClass("fa-spinner fa-pulse"),AjaxHelper.send("unfollow_author",{data:{author:parseInt(n)},success:function(e){t.removeClass("unfollow-author").addClass("do-follow-author"),null!=e.button&&""!=e.button&&t.html(e.button),dofollow=!1},error:function(e){dofollow=!1}}))}}),$(document).on("click",".cwb",function(e){e.preventDefault();var t=new CustomEvent("call_chat",{detail:"author_id"});window.dispatchEvent(t)}),$(".woocommerce-ordering .orderby").niceSelect(),$(".chosen-select").niceSelect(),$(function(){$(".image-popup").lightGallery({selector:"this",cssEasing:"cubic-bezier(0.25, 0, 0.25, 1)",download:!1,counter:!1,thumbnail:!1,loadVimeoThumbnail:!1,loadYoutubeThumbnail:!1});var e=$(".lightgallery");e.data("looped");e.lightGallery({selector:".lightgallery a.popup-image",cssEasing:"cubic-bezier(0.25, 0, 0.25, 1)",download:!1,loop:!1,counter:!1,thumbnail:!1,loadVimeoThumbnail:!1,loadYoutubeThumbnail:!1}),initHiddenGal()}),$(document).on("click",".room-modal-open",function(e){e.preventDefault();var t=$(this).data("roomid");return $("html, body").addClass("hid-body"),$(".ajax-modal-overlay").fadeIn(400),$(".ajax-modal-container").animate({right:"0",opacity:1},300),$.ajax({type:"POST",url:_townhub_add_ons.url,data:{action:"townhub_single_room",rid:t,_wpnonce:_townhub_add_ons.nonce},success:function(e){$("#ajax-modal").empty().append(e),initHiddenGal(),$(".ajax-loader").fadeOut(200),$(".ajax-modal-wrap").animate({opacity:1},300),window.dispatchEvent(new CustomEvent("roomModalOpened",{detail:"hasListing"}))},error:function(e){console.log(e)}}),!1}),$(document).on("click",".ajax-modal-overlay , .ajax-modal-close",function(){$("html, body").removeClass("hid-body"),$(".ajax-modal-overlay").fadeOut(100),$(".ajax-modal-container").animate({right:"-550px",opacity:0},300),setTimeout(function(){$("#ajax-modal").empty(),$(".ajax-loader").fadeIn(100)},300)}),$(function(){initIsotope(),window.addEventListener("galChanged",function(e){var t=$(e.detail).closest(".cthiso-items");t.length&&null!=t.data("isotope")&&t.isotope("layout")}),$(".box-cat").on({mouseenter:function(){if(void 0!==$(this).data("bgscr")){var e=$(this).data("bgscr");$(this).closest(".slider-item").children(".bg-ser").css("background-image","url("+e+")")}}}),0<$(".countdown-widget").length&&$(".countdown-widget").each(function(){var e=$(this),t=e.data("countdate"),n=e.data("tz");n=parseInt(n),isNaN(n)&&(n=0),e.find(".countdown").downCount({date:t,offset:n},function(){e.addClass("countdown-ended")})}),$(".lweather-widget").length&&$(".lweather-widget").each(function(){var e=$(this),t=e.data("lat"),n=e.data("lon");t&&n&&e.flatWeatherPlugin({lat:t,lon:n,api:"openweathermap",view:"full",timeformat:"12",displayCityNameOnly:!1,forecast:50,render:!0,loadingAnimation:!0,strings:_townhub_add_ons.weather_strings,units:_townhub_add_ons.weather_unit})}),$(".background-youtube-wrapper").YTPlayer(),$(".background-vimeo").each(function(){var e=$(this),t=e.data("opts")?e.data("opts"):{video:"161566855",quality:"1080p",mute:"1"},n="//player.vimeo.com/video/"+t.video;"1"==t.mute?n+="?background=1&quality="+t.quality+"&loop="+t.loop:n+="?autoplay=1&quality="+t.quality+"&loop="+t.loop,e.append('<iframe src="'+n+'"  frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen ></iframe>')});var e=$(".media-container"),t=$(".background-vimeo iframe"),n=$(".video-container");$(".video-holder").height(e.height()),1024<$(window).width()?0<$(".video-holder").size()&&(e.height()/9*16>e.width()?(t.height(e.height()).width(e.height()/9*16),t.css({"margin-left":-1*$("iframe").width()/2+"px",top:"-75px","margin-top":"0px"})):(t.width($(window).width()).height($(window).width()/16*9),t.css({"margin-left":-1*$("iframe").width()/2+"px","margin-top":-1*$("iframe").height()/2+"px",top:"50%"}))):($(window).width(),$(".video-holder").height(e.height()),t.height(e.height())),n.css("width",$(window).width()+"px"),n.css("height",parseInt(.5625*$(window).width())+"px"),n.height()<$(window).height()&&(n.css("height",$(window).height()+"px"),n.css("width",parseInt(1280/720*$(window).height())+"px"));var a=$(".share-container"),i=a.data("share");null!=i&&"string"==typeof i&&(i=(i=i.split(",")).map(function(e){return e.trim()})).length&&a.share({networks:i}),$(".showshare").on("click",function(e){e.preventDefault(),$(this).toggleClass("vis-butsh"),$(".share-container").hasClass("isShare")?(a.removeClass("isShare"),a.addClass("visshare")):(a.addClass("isShare"),a.removeClass("visshare"))}),$(".grid-opt li span.llist").on("click",function(e){e.preventDefault(),$(".grid-opt li span").removeClass("act-grid-opt"),$(".listing-item").addClass("list-layout"),$(this).addClass("act-grid-opt"),onListingsChanged("listing-view-list")}),$(".grid-opt li span.lgrid").on("click",function(e){e.preventDefault(),$(".grid-opt li span").removeClass("act-grid-opt"),$(".listing-item").removeClass("list-layout"),$(this).addClass("act-grid-opt"),onListingsChanged("listing-view-grid")}),$(document).on("click",".init-dsmen",function(){$(".user-profile-menu-wrap").slideToggle(400)})})}(jQuery),function(a){var r="listing-item",l="masonry-pad",d={sm:{width:430,columns:1},md:{width:768,columns:2},lg:{width:992,columns:3},four:{columns:4},five:{columns:5},six:{columns:6},seven:{columns:7},eight:{columns:8},nine:{columns:9},ten:{columns:10}};!function(){function n(e){var t=this;if(_classCallCheck(this,n),null===e)return!1;this.layout;if(this.container=e,this.panels=e.querySelectorAll("."+r),this.state={heights:[]},this.layout(),window.addEventListener("resize",_.debounce(function(){t.layout()},100)),window.addEventListener("listingsChanged",_.debounce(function(){t.__reInit(),null!=window.lazyLoadInstance?t.layout():imagesLoaded(e,function(e){t.layout()})},100)),null!=window.lazyLoadInstance)this.layout();else imagesLoaded(e,function(e){t.layout()})}_createClass(n,[{key:"__reInit",value:function(){var e=this.container;this.panels=e.querySelectorAll("."+r)}},{key:"__reset",value:function(){var e=this.container;this.state.heights=[];var t=e.querySelectorAll("."+l);if(t.length)for(var n=0;n<t.length;n++)t[n].parentNode.removeChild(t[n]);e.removeAttribute("style")}},{key:"__populateHeights",value:function(){var e=this.panels,t=this.state.heights;if(e.length)for(var n=0;n<e.length;n++){var a=e[n],i=getComputedStyle(a),s=i.order,o=i.msFlexOrder,r=i.height,l=i.marginTop,d=i.marginBottom,c=s||o;t[c-1]||(t[c-1]=0),t[c-1]=parseInt(t[c-1],10)+parseInt(r,10)+parseInt(l,10)+parseInt(d,10)}}},{key:"__setLayout",value:function(){var e=this.container,t=this.state.heights;this.state.maxHeight=Math.max.apply(Math,_toConsumableArray(t)),e.style.height=this.state.maxHeight+10+"px"}},{key:"__pad",value:function(){var a=this.container,e=this.state,t=e.heights,i=e.maxHeight,s=this._getLayoutSize();if(t.length<d[s].columns)for(var n=d[s].columns-t.length,o=0;o<n;o++)t.push(0);t.forEach(function(e,t){if(e<i){var n=document.createElement("div");n.className=l,n.style.height=i-e+"px",n.style.width=100/d[s].columns+"%",n.style.order=t+1,n.style.msFlexOrder=t+1,a.appendChild(n)}})}},{key:"layout",value:function(){this.__reset(),this.__populateHeights(),this.__setLayout(),this.__pad()}},{key:"_getLayoutSize",value:function(){var e=this.container,t=window.innerWidth;if(t<768)return"sm";if(t<992)return"md";var n=a(e).closest(".listings-grid-wrap");return n.hasClass("one-cols")?"sm":n.hasClass("two-cols")?"md":n.hasClass("four-cols")?"four":n.hasClass("five-cols")?"five":n.hasClass("six-cols")?"six":n.hasClass("seven-cols")?"seven":n.hasClass("eight-cols")?"eight":n.hasClass("nine-cols")?"nine":n.hasClass("ten-cols")?"ten":"lg"}},{key:"__createNewPanels",value:function(){var e=this.container,t=this.panels;if(t.length){var n=this._getLayoutSize(),a=t.length%d[n].columns;if(0<a)for(var i=d[n].columns-a,s=0;s<i;s++){var o=document.createElement("div");o.className=r,o.className+=" hidden-listing",o.style.height="1px",e.appendChild(o)}}}}])}()}(jQuery),function(d){d(function(){var s;d(".select-images-list:not(.single-image-select)").sortable(),d(".select-images-btn").on("click",function(e){e.preventDefault();var n=d(this),a=null==n.data("single")&&"toggle",i=d(this).data("field");(s=wp.media.frames.file_frame=wp.media({title:n.data("uploader_title"),button:{text:n.data("uploader_button_text")},multiple:a})).on("select",function(){if(a){s.state().get("selection").map(function(e){e=e.toJSON();var t=_.template(d("#tmpl-imageslist").html(),{variable:"data",evaluate:/<#([\s\S]+?)#>/g,interpolate:/{{{([\s\S]+?)}}}/g,escape:/{{([^}]+?)}}(?!})/g});n.closest(".select-images-wrap").children(".select-images-list").append(t(d.extend({},e,{field:i})))}),n.closest(".select-images-wrap").children(".select-images-list").sortable()}else{var e=s.state().get("selection").first().toJSON(),t=_.template(d("#tmpl-imageslist").html(),{variable:"data",evaluate:/<#([\s\S]+?)#>/g,interpolate:/{{{([\s\S]+?)}}}/g,escape:/{{([^}]+?)}}(?!})/g});n.closest(".select-images-wrap").children(".select-images-list").html(t(d.extend({},e,{field:i}))),"custom_avatar"!=n.data("field")&&"cover_bg"!=n.data("field")||(n.closest(".edit-profile-photo").children(".profile-photo-wrap").html('<img src="'+e.url+'" class="avatar avatar-150 photo">'),n.closest(".upload-photo-js-wrap").removeClass("user-photo-deleted"),n.closest(".upload-photo-js-wrap").find('input[name="'+n.data("field")+'_delete"]').val("no"))}}),null!=window._townhub_submit&&(wp.media.model.settings.post.id=window._townhub_submit.id),s.open()}),d(document).on("click",".select-image-item",function(e){e.preventDefault();var a=d(this),n=d(this).data("field");(s=wp.media.frames.file_frame=wp.media({title:a.data("uploader_title"),button:{text:a.data("uploader_button_text")},multiple:!1})).on("select",function(){var e=s.state().get("selection").first().toJSON(),t=_.template(d("#tmpl-imageslist").html(),{variable:"data",evaluate:/<#([\s\S]+?)#>/g,interpolate:/{{{([\s\S]+?)}}}/g,escape:/{{([^}]+?)}}(?!})/g});a.replaceWith(t(d.extend({},e,{field:n})))}),s.on("open",function(){var e=s.state().get("selection"),t=a.children("input").data("id"),n=wp.media.attachment(t);n.fetch(),e.add(n?[n]:[])}),null!=window._townhub_submit&&(wp.media.model.settings.post.id=window._townhub_submit.id),s.open()}),d(document).on("click",".del-user-photo",function(e){e.preventDefault();var t=d(this).data("name"),n=d(this).closest(".upload-photo-js-wrap");n&&(n.find(".profile-photo-wrap").empty(),n.find(".photoUpload").append('<input type="hidden" name="'+t+'_delete" value="yes">'));var a=document.getElementsByName(t);if(a.length)for(var i=0;i<a.length;i++)a[i].value="";var s=document.getElementsByName(t+"[]");if(s.length)for(var o=0;o<s.length;o++)s[o].value="";var r=document.getElementsByName(t+"_upload");if(r.length)for(var l=0;l<r.length;l++)r[l].value="";n.addClass("user-photo-deleted")}),d(document).on("change",".rate-range",function(){var e=0;d(".rate-range").each(function(){e+=parseFloat(d(this).val())}),0<d(".rate-range").length?d("#reviews-total-score").html((e/d(".rate-range").length).toFixed(1)):d("#reviews-total-score").html(e.toFixed(1))}),d(document).ready(function(){"yes"==d(".remov-reviw-cont").data("remov")&&d("#reviews-total-sec").css("display","none")}),d(document).on("click",".remove-img-btn",function(e){e.preventDefault(),e.stopPropagation(),d(this).closest(".select-image-item").remove()}),d(".bk-tick").on("click",function(e){e.preventDefault(),d(".quantity-item-bk").toggle()}),d(".booking-ticket-warp").each(function(){var n=0;d(".quantity-item").each(function(){var e=d(this).find("input[name='lb_quantity']").attr("value"),t=d(".bk-tick").data("lprice");d(".qtyTotal").html(e),d("input[name='qty']").val(e),""!=t&&(n+=parseFloat(e)*parseFloat(t))}),d("#total-bki").html(n.toFixed(0))}).change(function(){var n=0;d(".quantity-item").each(function(){var e=d(this).find("input[name='lb_quantity']").val(),t=d(".bk-tick").data("lprice");d(".qtyTotal").html(e),d("input[name='qty']").val(e),""!=t&&(n+=parseFloat(e)*parseFloat(t))}),d("#total-bki").html(n.toFixed(0))}),d(".quantity-search").each(function(){var n=jQuery(this),a=n.find('input[type="number"]'),e=n.find(".quantity-up"),t=n.find(".quantity-down"),i=a.attr("min"),s=a.attr("max");e.click(function(){var e=parseFloat(a.val());if(s<=e)var t=e;else t=e+1;n.find("input").val(t),n.find("input").trigger("change")}),t.click(function(){var e=parseFloat(a.val());if(e<=i)var t=e;else t=e-1;n.find("input").val(t),n.find("input").trigger("change")})}),d(document).ready(function(){d(".lservices-header").click(function(){d(".lservices-body").toggle()}),d(".lservices-item").each(function(){d(".lserv-item").click(function(){var e=d("input[name='addservices[]']:checked").length;d(".count-select-ser").text(e)})})})})}(jQuery),function(r){if(r(function(){jQuery(".images-collage-item, .collage-image-btn, .collage-image-input").each(function(){var e=jQuery(this),t=e.data("position-left"),n=e.data("position-top"),a=e.data("zindex");e.css({top:n+"%"}),e.css({"z-index":a}),e.css({left:t+"%"})}),r(".qtt-item-js").each(function(){var e=jQuery(this),a=e.find('input[type="number"]'),t=e.find(".qtt-up"),n=e.find(".qtt-down");t.click(function(){var e=parseInt(a.val()),t=a.attr("max"),n=e+1;t<=e&&(n=t),a.val(n),a.trigger("change")}),n.click(function(){var e=parseInt(a.val()),t=a.attr("min"),n=e-1;e<=t&&(n=t),a.val(n),a.trigger("change")})}),r(".tariff-toggle").on("click",function(){r("#yearly-1").is(":checked")&&(r(".price-item").addClass("year-mont"),r(".yearly_price_input").val("1")),r("#monthly-1").is(":checked")&&(r(".price-item").removeClass("year-mont"),r(".yearly_price_input").val("0"))})}),r(document).on("change",".lservices-row input[name='addservices[]']",function(){var e=r(this).closest(".lservices-row"),t=0;e.find("input[name='addservices[]']").each(function(){r(this).prop("checked")&&null!=r(this).attr("data-price")&&(t+=parseFloat(r(this).attr("data-price")))}),e.find("input[name='item_total']").val(t).trigger("change"),e.find(".count-select-ser").text(e.find("input[name='addservices[]']:checked").length)}),r(function(){var e=parseInt(_townhub_add_ons.js_decimals),t=".",n=",";if(isNaN(e)&&(e=-1),null!=_townhub_add_ons.currency){var a=_townhub_add_ons.currency,i=a.decimal,s=a.dec_sep,o=a.ths_sep;null!=i&&(i=parseInt(i),isNaN(i)||(e=i)),null!=s&&""!=s&&(t=s),null!=o&&""!=o&&(n=o)}r("form[name=esb-tour-booking]").jAutoCalc({decimalPlaces:e,attribute:"data-jcalc",thousandOpts:[n],decimalOpts:[t]}),r("form[name=esb-general-booking]").jAutoCalc({decimalPlaces:e,attribute:"data-jcalc",thousandOpts:[n],decimalOpts:[t]}),r("form[name=esb-inquiry-form]").jAutoCalc({decimalPlaces:e,attribute:"data-jcalc",thousandOpts:[n],decimalOpts:[t]}),r(document).on("change","form input[name=grand_total]",function(){r(this).attr("size",r(this).val().length)})}),window.addEventListener("tour_date_selected",function(e){if(null!=e.detail){var t=e.detail,n=t.guests,a=t.price,i=t.price_children,s=t.price_infant;null!=a&&r("form[name=esb-tour-booking] input[name=price_adult]").length&&r("form[name=esb-tour-booking] input[name=price_adult]").val(a).trigger("change"),null!=i&&r("form[name=esb-tour-booking] input[name=price_children]").length&&r("form[name=esb-tour-booking] input[name=price_children]").val(i).trigger("change"),null!=s&&r("form[name=esb-tour-booking] input[name=price_infant]").length&&r("form[name=esb-tour-booking] input[name=price_infant]").val(s).trigger("change"),null!=n&&(r("form[name=esb-tour-booking] input[name=adults]").length&&r("form[name=esb-tour-booking] input[name=adults]").attr("max",n),r("form[name=esb-tour-booking] input[name=children]").length&&r("form[name=esb-tour-booking] input[name=children]").attr("max",n),r("form[name=esb-tour-booking] input[name=infants]").length&&r("form[name=esb-tour-booking] input[name=infants]").attr("max",n))}}),r("form[name=esb-general-booking]").on("submit",function(e){r(this).find("input[name='slots[]']").length&&!r(this).find("input[name='slots[]']:checked").length&&(e.preventDefault(),r(this).find(".time-slots-row .cth-dropdown-warp").addClass("options-show"))}),r(".time-slots-row").on("change","input[name='slots[]']",function(){var e=r(this).closest(".time-slots-row");e.find("input[name='slots[]']:checked").length?(e.find(".cth-dropdown-warp").addClass("has-selected"),e.find(".cth-dropdown-header .slot-selected").text(e.find("input[name='slots[]']:checked").first().attr("data-slot"))):e.find(".cth-dropdown-warp").removeClass("has-selected")}),window.addEventListener("general_daterange_selected",function(e){if(null!=e.detail){var t=e.detail,n=(t.checkin,t.checkout,t.days),a=t.nights;null!=a&&(r("form[name=esb-general-booking] input[name=nights]").length&&r("form[name=esb-general-booking] input[name=nights]").val(a).trigger("change"),r("form[name=esb-inquiry-form] input[name=nights]").length&&r("form[name=esb-inquiry-form] input[name=nights]").val(a).trigger("change")),null!=n&&(r("form[name=esb-general-booking] input[name=days]").length&&r("form[name=esb-general-booking] input[name=days]").val(n).trigger("change"),r("form[name=esb-inquiry-form] input[name=days]").length&&r("form[name=esb-inquiry-form] input[name=days]").val(n).trigger("change"))}}),window.addEventListener("general_date_selected",function(e){if(null!=e.detail){var t=e.detail,n=t.guests,a=t.price,i=t.price_children,s=t.price_infant;null!=a&&r("form[name=esb-general-booking] input[name=lprice]").length&&r("form[name=esb-general-booking] input[name=lprice]").val(a).trigger("change"),null!=a&&r("form[name=esb-general-booking] input[name=price_adult]").length&&r("form[name=esb-general-booking] input[name=price_adult]").val(a).trigger("change"),null!=i&&r("form[name=esb-general-booking] input[name=price_children]").length&&r("form[name=esb-general-booking] input[name=price_children]").val(i).trigger("change"),null!=s&&r("form[name=esb-general-booking] input[name=price_infant]").length&&r("form[name=esb-general-booking] input[name=price_infant]").val(s).trigger("change"),null!=n&&(r("form[name=esb-general-booking] input[name=adults]").length&&r("form[name=esb-general-booking] input[name=adults]").attr("max",n),r("form[name=esb-general-booking] input[name=children]").length&&r("form[name=esb-general-booking] input[name=children]").attr("max",n),r("form[name=esb-general-booking] input[name=infants]").length&&r("form[name=esb-general-booking] input[name=infants]").attr("max",n))}}),window.addEventListener("availability_dates_selected",function(e){if(null!=e.detail){var t=e.detail.metas;if(null!=t){var n=t.guests,a=t.price,i=t.price_children,s=t.price_infant;r("form[name=esb-general-booking]").length&&(null!=a&&r("form[name=esb-general-booking] input[name=lprice]").length&&r("form[name=esb-general-booking] input[name=lprice]").val(a).trigger("change"),null!=a&&r("form[name=esb-general-booking] input[name=price_adult]").length&&r("form[name=esb-general-booking] input[name=price_adult]").val(a).trigger("change"),null!=i&&r("form[name=esb-general-booking] input[name=price_children]").length&&r("form[name=esb-general-booking] input[name=price_children]").val(i).trigger("change"),null!=s&&r("form[name=esb-general-booking] input[name=price_infant]").length&&r("form[name=esb-general-booking] input[name=price_infant]").val(s).trigger("change"),null!=n&&(r("form[name=esb-general-booking] input[name=adults]").length&&r("form[name=esb-general-booking] input[name=adults]").attr("max",n),r("form[name=esb-general-booking] input[name=children]").length&&r("form[name=esb-general-booking] input[name=children]").attr("max",n),r("form[name=esb-general-booking] input[name=infants]").length&&r("form[name=esb-general-booking] input[name=infants]").attr("max",n)))}}}),window.addEventListener("general_daterange_selected",function(e){if(null!=e.detail)e.detail.metas}),window.addEventListener("bk_time_slots_selected",function(e){var t=0;if(null!=e.detail){var n=e.detail,a=n.slots,i=n.eleID;Array.isArray(a)&&(t=a.length),r("#"+i).length&&r("#"+i).val(t).trigger("change")}}),window.addEventListener("bk_tickets_selected",function(e){if(null!=e.detail){var t=e.detail,n=t.eleID,a=t.tickets,i=0;Array.isArray(a)&&a.forEach(function(e){return i+=e.qtt*e.price}),r("#"+n).length&&r("#"+n).val(i).trigger("change")}}),r(document).on("click",".cth-dropdown-header",function(e){r(this).closest(".cth-dropdown-warp").toggleClass("options-show")}),r(document).on("click",".tickets-select_header",function(){r(this).toggleClass("vis-ticket_select"),r(this).parent(".tickets-select_item").find(".tickets-select_content").slideToggle(400)}),r(document).on("click",".multiqtts-select_header",function(){r(this).toggleClass("vis-multiqtt_select"),r(this).parent(".multiqtts-select_item").find(".multiqtts-select_content").slideToggle(400)}),r(document).on("click",".act-hiddenpanel",function(){var e=r(this).data("ctext"),t=r(this).data("mtext");r(this).toggleClass("active-hidden-opt-btn").find("span").text(r(this).find("span").text()===e?t:e),r(".hidden-listing-filter").slideToggle(400)}),r(document).on("click",".advanced-filter-close",function(){var e=r(".act-hiddenpanel").data("mtext");r(".act-hiddenpanel").toggleClass("active-hidden-opt-btn").find("span").text(e),r(".hidden-listing-filter").slideToggle(400)}),r(document).on("click",".show_gcc",function(e){e.preventDefault(),r(this).parents(".geodir-category-footer").find(".geodir-category_contacts").addClass("visgdcc")}),r(document).on("click",".close_gcc",function(){r(this).parent(".geodir-category_contacts").removeClass("visgdcc")}),r(document).on("click",".tfp-btn",function(){r(this).toggleClass("rot_tfp-btn"),r(".tfp-det").toggleClass("vis_tfp-det ")}),0<r(".single-carousel").length&&r(".single-carousel").each(function(){var e={preloadImages:!1,freeMode:!0,slidesPerView:"auto",spaceBetween:10,loop:!1,grabCursor:!0,mousewheel:!1,observer:!0,observeParents:!0,navigation:{nextEl:r(this).closest(".single-carousel-wrap").children(".sc-next")[0],prevEl:r(this).closest(".single-carousel-wrap").children(".sc-prev")[0]}},t=r(this).children(".swiper-container"),n=t.data("options");null!=n&&"object"===(void 0===n?"undefined":_typeof(n))&&(e=Object.assign(e,n)),new Swiper(t[0],e)}),0<r(".clients-carousel").length&&r(".clients-carousel").each(function(){var e={preloadImages:!1,freeMode:!1,slidesPerView:5,spaceBetween:10,loop:!0,grabCursor:!0,mousewheel:!1,observer:!0,observeParents:!0,navigation:{nextEl:r(this).closest(".clients-carousel-wrap").children(".cc-next")[0],prevEl:r(this).closest(".clients-carousel-wrap").children(".cc-prev")[0]},breakpoints:{1064:{slidesPerView:3},768:{slidesPerView:2},520:{slidesPerView:1}}},t=r(this).children(".swiper-container"),n=t.data("options");null!=n&&"object"===(void 0===n?"undefined":_typeof(n))&&(e=Object.assign(e,n)),new Swiper(t[0],e)}),0<r(".testimonilas-carousel").length&&r(".testimonilas-carousel").each(function(){var e={preloadImages:!1,slidesPerView:3,spaceBetween:20,loop:!0,grabCursor:!0,mousewheel:!1,centeredSlides:!0,observer:!0,observeParents:!0,pagination:{el:r(this).closest(".testimonilas-carousel-wrap").children(".tc-pagination")[0],clickable:!0,dynamicBullets:!0},navigation:{nextEl:r(this).closest(".testimonilas-carousel-wrap").children(".listing-carousel-button-next")[0],prevEl:r(this).closest(".testimonilas-carousel-wrap").children(".listing-carousel-button-prev")[0]},breakpoints:{1064:{slidesPerView:2},640:{slidesPerView:1}}},t=r(this).children(".swiper-container"),n=t.data("options");null!=n&&"object"===(void 0===n?"undefined":_typeof(n))&&(e=Object.assign(e,n)),new Swiper(t[0],e)}),0<r(".dashboard-header-stats").length)new Swiper(".dashboard-header-stats .swiper-container",{preloadImages:!1,freeMode:!1,slidesPerView:3,spaceBetween:10,loop:!1,grabCursor:!0,mousewheel:!1,observer:!0,observeParents:!0,navigation:{nextEl:".dhs-next",prevEl:".dhs-prev"},breakpoints:{768:{slidesPerView:2},640:{slidesPerView:1}}});if(0<r(".listing-carousel").length&&r(".listing-carousel").each(function(){var e={preloadImages:!1,loop:!0,grabCursor:!0,speed:1400,slidesPerView:"auto",spaceBetween:0,effect:"slide",mousewheel:!1,observer:!0,observeParents:!0,pagination:{el:".listing-carousel_pagination-wrap",clickable:!0},navigation:{nextEl:".listing-carousel-button-next",prevEl:".listing-carousel-button-prev"},breakpoints:{480:{slidesPerView:1},640:{slidesPerView:"auto"}}},t=r(this).children(".swiper-container"),n=t.data("options");null!=t.data("slides")&&(e.slidesPerView=e.breakpoints[640].slidesPerView=t.data("slides")),null!=n&&"object"===(void 0===n?"undefined":_typeof(n))&&(e=Object.assign(e,n)),new Swiper(t[0],e)}),0<r(".category-carousel").length)new Swiper(".category-carousel .swiper-container",{preloadImages:!1,freeMode:!0,slidesPerView:"auto",spaceBetween:10,loop:!1,grabCursor:!0,mousewheel:!0,observer:!0,observeParents:!0,scrollbar:{el:".hs_init",draggable:!0},navigation:{nextEl:".cc-next",prevEl:".cc-prev"}});if(0<r(".listing-slider").length&&r(".listing-slider").each(function(){var e={slidesPerView:4,watchSlidesVisibility:!0,spaceBetween:15,loop:!0,lazy:{loadPrevNext:!0},preloadImages:!0,grabCursor:!0,mousewheel:!1,centeredSlides:!0,observer:!0,observeParents:!0,pagination:{el:r(this).closest(".listing-slider-wrap").children(".tc-pagination_wrap .tc-pagination2")[0],clickable:!0,dynamicBullets:!0},navigation:{nextEl:r(this).children(".listing-carousel-button-next2")[0],prevEl:r(this).children(".listing-carousel-button-prev2")[0]},breakpoints:{1650:{slidesPerView:3},1270:{slidesPerView:2},850:{slidesPerView:1}}},t=r(this).children(".swiper-container"),n=t.data("options");null!=n&&"object"===(void 0===n?"undefined":_typeof(n))&&(e=Object.assign(e,n)),new Swiper(t[0],e)}),0<r(".single-slider").length&&r(".single-slider").each(function(){var e={preloadImages:!1,slidesPerView:1,spaceBetween:0,loop:!0,autoHeight:!0,grabCursor:!0,mousewheel:!1,observer:!0,observeParents:!0,pagination:{el:".ss-slider-pagination",clickable:!0},navigation:{nextEl:r(this).closest(".single-slider-wrap").children(".ss-slider-cont-next")[0],prevEl:r(this).closest(".single-slider-wrap").children(".ss-slider-cont-prev")[0]}},t=r(this).children(".swiper-container"),n=t.data("options");null!=n&&"object"===(void 0===n?"undefined":_typeof(n))&&(e=Object.assign(e,n));new Swiper(t[0],e)}),0<r(".hero-slider").length)new Swiper(".hero-slider .swiper-container",{preloadImages:!1,loop:!0,speed:1400,spaceBetween:0,observer:!0,observeParents:!0,pagination:{el:".listing-carousel_pagination-wrap",clickable:!0},navigation:{nextEl:".slider-hero-button-next",prevEl:".slider-hero-button-prev"}});if(0<r(".slideshow-container").length){var e=new Swiper(".slideshow-container .swiper-container",{preloadImages:!1,loop:!0,speed:1400,spaceBetween:0,observer:!0,observeParents:!0,effect:"fade",autoplay:{delay:3e3,disableOnInteraction:!1}});t(),e.on("slideChangeTransitionStart",function(){r(".slide-progress").css({width:0,transition:"width 0s"})}),e.on("slideChangeTransitionEnd",function(){t()})}function t(){r(".slide-progress").css({width:"100%",transition:"width 3000ms"})}r(".price-slider").length&&r(".price-slider").each(function(){var t=r(this);t.ionRangeSlider({keyboard:!0,onChange:function(e){_townhub_add_ons.is_rtl},onFinish:function(e){t.closest(".price-rage-item").children(".price_range_hidden").val(e.input.val()).trigger("change")}})}),"1"!=_townhub_add_ons.is_rtl&&(r(".rate-range").ionRangeSlider({type:"single",hide_min_max:!0}),r(".price-range").ionRangeSlider({type:"single",values:["$","$$","$$$","$$$$"]}),r(".single-range").ionRangeSlider({type:"single"})),document.addEventListener("DOMContentLoaded",function(){r(".particles-decor").each(function(){var e=function(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"")+"_"+Math.random().toString(36).substr(2,9)}("parti");r("<div/>",{id:e,class:"particles-js"}).appendTo(r(this)),particlesJS(e,{particles:{number:{value:15,density:{enable:0,value_area:1200}},color:{value:["#4DB7FE","#384F95","#F75C96","#F8BD38"]},shape:{type:"circle",stroke:{width:0,color:"#000000"},polygon:{nb_sides:7},image:{src:"img/github.svg",width:100,height:100}},opacity:{value:1,random:0,anim:{enable:0,speed:1,opacity_min:0,sync:!1}},size:{value:7,random:1,anim:{enable:!1,speed:4,size_min:.4,sync:!1}},line_linked:{enable:!1,distance:150,color:"#ffffff",opacity:.4,width:1},move:{enable:!0,speed:1.5,direction:"none",random:0,straight:!1,out_mode:"out",bounce:!1,attract:{enable:0,rotateX:600,rotateY:600}}},retina_detect:!0})})})}(jQuery);